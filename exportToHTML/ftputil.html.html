<html>
<head>
<title>ftputil.html</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #e8bf6a;}
.s1 { color: #a9b7c6;}
.s2 { color: #bababa;}
.s3 { color: #a5c261;}
.s4 { color: #6d9cbe;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
ftputil.html</font>
</center></td></tr></table>
<pre><span class="s0">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;</span>
<span class="s0">&lt;!DOCTYPE </span><span class="s2">html </span><span class="s0">PUBLIC </span><span class="s3">&quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;html </span><span class="s2">xmlns</span><span class="s3">=&quot;http://www.w3.org/1999/xhtml&quot; </span><span class="s2">xml:lang</span><span class="s3">=&quot;en&quot; </span><span class="s2">lang</span><span class="s3">=&quot;en&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;head&gt;</span>
<span class="s0">&lt;meta </span><span class="s2">http-equiv</span><span class="s3">=&quot;Content-Type&quot; </span><span class="s2">content</span><span class="s3">=&quot;text/html; charset=utf-8&quot; </span><span class="s0">/&gt;</span>
<span class="s0">&lt;meta </span><span class="s2">name</span><span class="s3">=&quot;generator&quot; </span><span class="s2">content</span><span class="s3">=&quot;Docutils 0.16: http://docutils.sourceforge.net/&quot; </span><span class="s0">/&gt;</span>
<span class="s0">&lt;title&gt;</span><span class="s1">ftputil -- a high-level FTP client library</span><span class="s0">&lt;/title&gt;</span>
<span class="s0">&lt;meta </span><span class="s2">name</span><span class="s3">=&quot;date&quot; </span><span class="s2">content</span><span class="s3">=&quot;2021-03-18&quot; </span><span class="s0">/&gt;</span>
<span class="s0">&lt;meta </span><span class="s2">name</span><span class="s3">=&quot;author&quot; </span><span class="s2">content</span><span class="s3">=&quot;Stefan Schwarzer </span><span class="s4">&amp;lt;</span><span class="s3">sschwarzer</span><span class="s4">&amp;#64;</span><span class="s3">sschwarzer.net</span><span class="s4">&amp;gt;</span><span class="s3">&quot; </span><span class="s0">/&gt;</span>
<span class="s0">&lt;style </span><span class="s2">type</span><span class="s3">=&quot;text/css&quot;</span><span class="s0">&gt;</span>

<span class="s1">/*</span>
<span class="s1">:Author: David Goodger</span>
<span class="s1">:Contact: goodger@users.sourceforge.net</span>
<span class="s1">:Date: $Date: 2005-05-26 12:51:39 +0200 (Thu, 26 May 2005) $</span>
<span class="s1">:Version: $Revision: 3368 $</span>
<span class="s1">:Copyright: This stylesheet has been placed in the public domain.</span>

<span class="s1">Default cascading style sheet for the HTML output of Docutils.</span>
<span class="s1">*/</span>

<span class="s1">/* &quot;! important&quot; is used here to override other ``margin-top`` and</span>
   <span class="s1">``margin-bottom`` styles that are later in the stylesheet or </span>
   <span class="s1">more specific.  See http://www.w3.org/TR/CSS1#the-cascade */</span>
<span class="s1">.first {</span>
  <span class="s1">margin-top: 0 ! important }</span>

<span class="s1">.last, .with-subtitle {</span>
  <span class="s1">margin-bottom: 0 ! important }</span>

<span class="s1">.hidden {</span>
  <span class="s1">display: none }</span>

<span class="s1">a.toc-backref {</span>
  <span class="s1">text-decoration: none ;</span>
  <span class="s1">color: black }</span>

<span class="s1">blockquote.epigraph {</span>
  <span class="s1">margin: 2em 5em ; }</span>

<span class="s1">dl.docutils dd {</span>
  <span class="s1">margin-bottom: 0.5em }</span>

<span class="s1">/* Uncomment (and remove this text!) to get bold-faced definition list terms</span>
<span class="s1">dl.docutils dt {</span>
  <span class="s1">font-weight: bold }</span>
<span class="s1">*/</span>

<span class="s1">div.abstract {</span>
  <span class="s1">margin: 2em 5em }</span>

<span class="s1">div.abstract p.topic-title {</span>
  <span class="s1">font-weight: bold ;</span>
  <span class="s1">text-align: center }</span>

<span class="s1">div.admonition, div.attention, div.caution, div.danger, div.error,</span>
<span class="s1">div.hint, div.important, div.note, div.tip, div.warning {</span>
  <span class="s1">margin: 2em ;</span>
  <span class="s1">border: medium outset ;</span>
  <span class="s1">padding: 1em }</span>

<span class="s1">div.admonition p.admonition-title, div.hint p.admonition-title,</span>
<span class="s1">div.important p.admonition-title, div.note p.admonition-title,</span>
<span class="s1">div.tip p.admonition-title {</span>
  <span class="s1">font-weight: bold ;</span>
  <span class="s1">font-family: sans-serif }</span>

<span class="s1">div.attention p.admonition-title, div.caution p.admonition-title,</span>
<span class="s1">div.danger p.admonition-title, div.error p.admonition-title,</span>
<span class="s1">div.warning p.admonition-title {</span>
  <span class="s1">color: red ;</span>
  <span class="s1">font-weight: bold ;</span>
  <span class="s1">font-family: sans-serif }</span>

<span class="s1">/* Uncomment (and remove this text!) to get reduced vertical space in</span>
   <span class="s1">compound paragraphs.</span>
<span class="s1">div.compound .compound-first, div.compound .compound-middle {</span>
  <span class="s1">margin-bottom: 0.5em }</span>

<span class="s1">div.compound .compound-last, div.compound .compound-middle {</span>
  <span class="s1">margin-top: 0.5em }</span>
<span class="s1">*/</span>

<span class="s1">div.dedication {</span>
  <span class="s1">margin: 2em 5em ;</span>
  <span class="s1">text-align: center ;</span>
  <span class="s1">font-style: italic }</span>

<span class="s1">div.dedication p.topic-title {</span>
  <span class="s1">font-weight: bold ;</span>
  <span class="s1">font-style: normal }</span>

<span class="s1">div.figure {</span>
  <span class="s1">margin-left: 2em }</span>

<span class="s1">div.footer, div.header {</span>
  <span class="s1">font-size: smaller }</span>

<span class="s1">div.line-block {</span>
  <span class="s1">display: block ;</span>
  <span class="s1">margin-top: 1em ;</span>
  <span class="s1">margin-bottom: 1em }</span>

<span class="s1">div.line-block div.line-block {</span>
  <span class="s1">margin-top: 0 ;</span>
  <span class="s1">margin-bottom: 0 ;</span>
  <span class="s1">margin-left: 1.5em }</span>

<span class="s1">div.sidebar {</span>
  <span class="s1">margin-left: 1em ;</span>
  <span class="s1">border: medium outset ;</span>
  <span class="s1">padding: 1em ;</span>
  <span class="s1">background-color: #ffffee ;</span>
  <span class="s1">width: 40% ;</span>
  <span class="s1">float: right ;</span>
  <span class="s1">clear: right }</span>

<span class="s1">div.sidebar p.rubric {</span>
  <span class="s1">font-family: sans-serif ;</span>
  <span class="s1">font-size: medium }</span>

<span class="s1">div.system-messages {</span>
  <span class="s1">margin: 5em }</span>

<span class="s1">div.system-messages h1 {</span>
  <span class="s1">color: red }</span>

<span class="s1">div.system-message {</span>
  <span class="s1">border: medium outset ;</span>
  <span class="s1">padding: 1em }</span>

<span class="s1">div.system-message p.system-message-title {</span>
  <span class="s1">color: red ;</span>
  <span class="s1">font-weight: bold }</span>

<span class="s1">div.topic {</span>
  <span class="s1">margin: 2em }</span>

<span class="s1">h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,</span>
<span class="s1">h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {</span>
  <span class="s1">margin-top: 0.4em }</span>

<span class="s1">h1.title {</span>
  <span class="s1">text-align: center }</span>

<span class="s1">h2.subtitle {</span>
  <span class="s1">text-align: center }</span>

<span class="s1">hr.docutils {</span>
  <span class="s1">width: 75% }</span>

<span class="s1">ol.simple, ul.simple {</span>
  <span class="s1">margin-bottom: 1em }</span>

<span class="s1">ol.arabic {</span>
  <span class="s1">list-style: decimal }</span>

<span class="s1">ol.loweralpha {</span>
  <span class="s1">list-style: lower-alpha }</span>

<span class="s1">ol.upperalpha {</span>
  <span class="s1">list-style: upper-alpha }</span>

<span class="s1">ol.lowerroman {</span>
  <span class="s1">list-style: lower-roman }</span>

<span class="s1">ol.upperroman {</span>
  <span class="s1">list-style: upper-roman }</span>

<span class="s1">p.attribution {</span>
  <span class="s1">text-align: right ;</span>
  <span class="s1">margin-left: 50% }</span>

<span class="s1">p.caption {</span>
  <span class="s1">font-style: italic }</span>

<span class="s1">p.credits {</span>
  <span class="s1">font-style: italic ;</span>
  <span class="s1">font-size: smaller }</span>

<span class="s1">p.label {</span>
  <span class="s1">white-space: nowrap }</span>

<span class="s1">p.rubric {</span>
  <span class="s1">font-weight: bold ;</span>
  <span class="s1">font-size: larger ;</span>
  <span class="s1">color: maroon ;</span>
  <span class="s1">text-align: center }</span>

<span class="s1">p.sidebar-title {</span>
  <span class="s1">font-family: sans-serif ;</span>
  <span class="s1">font-weight: bold ;</span>
  <span class="s1">font-size: larger }</span>

<span class="s1">p.sidebar-subtitle {</span>
  <span class="s1">font-family: sans-serif ;</span>
  <span class="s1">font-weight: bold }</span>

<span class="s1">p.topic-title {</span>
  <span class="s1">font-weight: bold }</span>

<span class="s1">pre.address {</span>
  <span class="s1">margin-bottom: 0 ;</span>
  <span class="s1">margin-top: 0 ;</span>
  <span class="s1">font-family: serif ;</span>
  <span class="s1">font-size: 100% }</span>

<span class="s1">pre.line-block {</span>
  <span class="s1">font-family: serif ;</span>
  <span class="s1">font-size: 100% }</span>

<span class="s1">pre.literal-block, pre.doctest-block {</span>
  <span class="s1">margin-left: 2em ;</span>
  <span class="s1">margin-right: 2em ;</span>
  <span class="s1">background-color: #eeeeee }</span>

<span class="s1">span.classifier {</span>
  <span class="s1">font-family: sans-serif ;</span>
  <span class="s1">font-style: oblique }</span>

<span class="s1">span.classifier-delimiter {</span>
  <span class="s1">font-family: sans-serif ;</span>
  <span class="s1">font-weight: bold }</span>

<span class="s1">span.interpreted {</span>
  <span class="s1">font-family: sans-serif }</span>

<span class="s1">span.option {</span>
  <span class="s1">white-space: nowrap }</span>

<span class="s1">span.pre {</span>
  <span class="s1">white-space: pre }</span>

<span class="s1">span.problematic {</span>
  <span class="s1">color: red }</span>

<span class="s1">span.section-subtitle {</span>
  <span class="s1">/* font-size relative to parent (&lt;h#&gt; element) */</span>
  <span class="s1">font-size: 80% }</span>

<span class="s1">table.citation {</span>
  <span class="s1">border-left: solid thin gray }</span>

<span class="s1">table.docinfo {</span>
  <span class="s1">margin: 2em 4em }</span>

<span class="s1">table.docutils {</span>
  <span class="s1">margin-top: 0.5em ;</span>
  <span class="s1">margin-bottom: 0.5em }</span>

<span class="s1">table.footnote {</span>
  <span class="s1">border-left: solid thin black }</span>

<span class="s1">table.docutils td, table.docutils th,</span>
<span class="s1">table.docinfo td, table.docinfo th {</span>
  <span class="s1">padding-left: 0.5em ;</span>
  <span class="s1">padding-right: 0.5em ;</span>
  <span class="s1">vertical-align: top }</span>

<span class="s1">table.docutils th.field-name, table.docinfo th.docinfo-name {</span>
  <span class="s1">font-weight: bold ;</span>
  <span class="s1">text-align: left ;</span>
  <span class="s1">white-space: nowrap ;</span>
  <span class="s1">padding-left: 0 }</span>

<span class="s1">h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,</span>
<span class="s1">h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {</span>
  <span class="s1">font-size: 100% }</span>

<span class="s1">tt.docutils {</span>
  <span class="s1">background-color: #eeeeee }</span>

<span class="s1">ul.auto-toc {</span>
  <span class="s1">list-style-type: none }</span>

<span class="s0">&lt;/style&gt;</span>
<span class="s0">&lt;/head&gt;</span>
<span class="s0">&lt;body&gt;</span>
<span class="s0">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;document&quot; </span><span class="s2">id</span><span class="s3">=&quot;ftputil-a-high-level-ftp-client-library&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;h1 </span><span class="s2">class</span><span class="s3">=&quot;title&quot;</span><span class="s0">&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftputil</span><span class="s0">&lt;/tt&gt; </span><span class="s1">-- a high-level FTP client library</span><span class="s0">&lt;/h1&gt;</span>
<span class="s0">&lt;table </span><span class="s2">class</span><span class="s3">=&quot;docinfo&quot; </span><span class="s2">frame</span><span class="s3">=&quot;void&quot; </span><span class="s2">rules</span><span class="s3">=&quot;none&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;col </span><span class="s2">class</span><span class="s3">=&quot;docinfo-name&quot; </span><span class="s0">/&gt;</span>
<span class="s0">&lt;col </span><span class="s2">class</span><span class="s3">=&quot;docinfo-content&quot; </span><span class="s0">/&gt;</span>
<span class="s0">&lt;tbody </span><span class="s2">valign</span><span class="s3">=&quot;top&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;tr&gt;&lt;th </span><span class="s2">class</span><span class="s3">=&quot;docinfo-name&quot;</span><span class="s0">&gt;</span><span class="s1">Version:</span><span class="s0">&lt;/th&gt;</span>
<span class="s0">&lt;td&gt;</span><span class="s1">5.0.1</span><span class="s0">&lt;/td&gt;&lt;/tr&gt;</span>
<span class="s0">&lt;tr&gt;&lt;th </span><span class="s2">class</span><span class="s3">=&quot;docinfo-name&quot;</span><span class="s0">&gt;</span><span class="s1">Date:</span><span class="s0">&lt;/th&gt;</span>
<span class="s0">&lt;td&gt;</span><span class="s1">2021-03-18</span><span class="s0">&lt;/td&gt;&lt;/tr&gt;</span>
<span class="s0">&lt;tr </span><span class="s2">class</span><span class="s3">=&quot;summary field&quot;</span><span class="s0">&gt;&lt;th </span><span class="s2">class</span><span class="s3">=&quot;docinfo-name&quot;</span><span class="s0">&gt;</span><span class="s1">Summary:</span><span class="s0">&lt;/th&gt;&lt;td </span><span class="s2">class</span><span class="s3">=&quot;field-body&quot;</span><span class="s0">&gt;</span><span class="s1">high-level FTP client library for Python</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;/tr&gt;</span>
<span class="s0">&lt;tr </span><span class="s2">class</span><span class="s3">=&quot;keywords field&quot;</span><span class="s0">&gt;&lt;th </span><span class="s2">class</span><span class="s3">=&quot;docinfo-name&quot;</span><span class="s0">&gt;</span><span class="s1">Keywords:</span><span class="s0">&lt;/th&gt;&lt;td </span><span class="s2">class</span><span class="s3">=&quot;field-body&quot;</span><span class="s0">&gt;</span><span class="s1">FTP, </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftplib</span><span class="s0">&lt;/tt&gt; </span><span class="s1">substitute, virtual filesystem, pure Python</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;/tr&gt;</span>
<span class="s0">&lt;tr&gt;&lt;th </span><span class="s2">class</span><span class="s3">=&quot;docinfo-name&quot;</span><span class="s0">&gt;</span><span class="s1">Author:</span><span class="s0">&lt;/th&gt;</span>
<span class="s0">&lt;td&gt;</span><span class="s1">Stefan Schwarzer </span><span class="s4">&amp;lt;</span><span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference external&quot; </span><span class="s2">href</span><span class="s3">=&quot;mailto:sschwarzer</span><span class="s4">&amp;#64;</span><span class="s3">sschwarzer.net&quot;</span><span class="s0">&gt;</span><span class="s1">sschwarzer</span><span class="s4">&amp;#64;</span><span class="s1">sschwarzer.net</span><span class="s0">&lt;/a&gt;</span><span class="s4">&amp;gt;</span><span class="s0">&lt;/td&gt;&lt;/tr&gt;</span>
<span class="s0">&lt;/tbody&gt;</span>
<span class="s0">&lt;/table&gt;</span>
<span class="s0">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;contents topic&quot; </span><span class="s2">id</span><span class="s3">=&quot;contents&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;p </span><span class="s2">class</span><span class="s3">=&quot;topic-title&quot;</span><span class="s0">&gt;</span><span class="s1">Contents</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;ul </span><span class="s2">class</span><span class="s3">=&quot;simple&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;li&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#introduction&quot; </span><span class="s2">id</span><span class="s3">=&quot;id4&quot;</span><span class="s0">&gt;</span><span class="s1">Introduction</span><span class="s0">&lt;/a&gt;&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#ftputil-features&quot; </span><span class="s2">id</span><span class="s3">=&quot;id5&quot;</span><span class="s0">&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftputil</span><span class="s0">&lt;/tt&gt; </span><span class="s1">features</span><span class="s0">&lt;/a&gt;&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#exception-hierarchy&quot; </span><span class="s2">id</span><span class="s3">=&quot;id6&quot;</span><span class="s0">&gt;</span><span class="s1">Exception hierarchy</span><span class="s0">&lt;/a&gt;&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#ftphost-objects&quot; </span><span class="s2">id</span><span class="s3">=&quot;id7&quot;</span><span class="s0">&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">FTPHost</span><span class="s0">&lt;/tt&gt; </span><span class="s1">objects</span><span class="s0">&lt;/a&gt;&lt;ul&gt;</span>
<span class="s0">&lt;li&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#construction&quot; </span><span class="s2">id</span><span class="s3">=&quot;id8&quot;</span><span class="s0">&gt;</span><span class="s1">Construction</span><span class="s0">&lt;/a&gt;&lt;ul&gt;</span>
<span class="s0">&lt;li&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#id1&quot; </span><span class="s2">id</span><span class="s3">=&quot;id9&quot;</span><span class="s0">&gt;</span><span class="s1">Introduction</span><span class="s0">&lt;/a&gt;&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#session-factories&quot; </span><span class="s2">id</span><span class="s3">=&quot;id10&quot;</span><span class="s0">&gt;</span><span class="s1">Session factories</span><span class="s0">&lt;/a&gt;&lt;/li&gt;</span>
<span class="s0">&lt;/ul&gt;</span>
<span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#directory-and-file-names&quot; </span><span class="s2">id</span><span class="s3">=&quot;id11&quot;</span><span class="s0">&gt;</span><span class="s1">Directory and file names</span><span class="s0">&lt;/a&gt;&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#hidden-files-and-directories&quot; </span><span class="s2">id</span><span class="s3">=&quot;id12&quot;</span><span class="s0">&gt;</span><span class="s1">Hidden files and directories</span><span class="s0">&lt;/a&gt;&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#ftphost-attributes-and-methods&quot; </span><span class="s2">id</span><span class="s3">=&quot;id13&quot;</span><span class="s0">&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">FTPHost</span><span class="s0">&lt;/tt&gt; </span><span class="s1">attributes and methods</span><span class="s0">&lt;/a&gt;&lt;ul&gt;</span>
<span class="s0">&lt;li&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#attributes&quot; </span><span class="s2">id</span><span class="s3">=&quot;id14&quot;</span><span class="s0">&gt;</span><span class="s1">Attributes</span><span class="s0">&lt;/a&gt;&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#remote-file-system-navigation&quot; </span><span class="s2">id</span><span class="s3">=&quot;id15&quot;</span><span class="s0">&gt;</span><span class="s1">Remote file system navigation</span><span class="s0">&lt;/a&gt;&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#uploading-and-downloading-files&quot; </span><span class="s2">id</span><span class="s3">=&quot;id16&quot;</span><span class="s0">&gt;</span><span class="s1">Uploading and downloading files</span><span class="s0">&lt;/a&gt;&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#id2&quot; </span><span class="s2">id</span><span class="s3">=&quot;id17&quot;</span><span class="s0">&gt;</span><span class="s1">Time zone correction</span><span class="s0">&lt;/a&gt;&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#creating-and-removing-directories&quot; </span><span class="s2">id</span><span class="s3">=&quot;id18&quot;</span><span class="s0">&gt;</span><span class="s1">Creating and removing directories</span><span class="s0">&lt;/a&gt;&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#removing-files-and-links&quot; </span><span class="s2">id</span><span class="s3">=&quot;id19&quot;</span><span class="s0">&gt;</span><span class="s1">Removing files and links</span><span class="s0">&lt;/a&gt;&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#retrieving-information-about-directories-files-and-links&quot; </span><span class="s2">id</span><span class="s3">=&quot;id20&quot;</span><span class="s0">&gt;</span><span class="s1">Retrieving information about directories, files and links</span><span class="s0">&lt;/a&gt;&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#local-caching-of-file-system-information&quot; </span><span class="s2">id</span><span class="s3">=&quot;id21&quot;</span><span class="s0">&gt;</span><span class="s1">Local caching of file system information</span><span class="s0">&lt;/a&gt;&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#iteration-over-directories&quot; </span><span class="s2">id</span><span class="s3">=&quot;id22&quot;</span><span class="s0">&gt;</span><span class="s1">Iteration over directories</span><span class="s0">&lt;/a&gt;&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#other-methods&quot; </span><span class="s2">id</span><span class="s3">=&quot;id23&quot;</span><span class="s0">&gt;</span><span class="s1">Other methods</span><span class="s0">&lt;/a&gt;&lt;/li&gt;</span>
<span class="s0">&lt;/ul&gt;</span>
<span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;/ul&gt;</span>
<span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#file-like-objects&quot; </span><span class="s2">id</span><span class="s3">=&quot;id24&quot;</span><span class="s0">&gt;</span><span class="s1">File-like objects</span><span class="s0">&lt;/a&gt;&lt;ul&gt;</span>
<span class="s0">&lt;li&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#id3&quot; </span><span class="s2">id</span><span class="s3">=&quot;id25&quot;</span><span class="s0">&gt;</span><span class="s1">Construction</span><span class="s0">&lt;/a&gt;&lt;ul&gt;</span>
<span class="s0">&lt;li&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#basics&quot; </span><span class="s2">id</span><span class="s3">=&quot;id26&quot;</span><span class="s0">&gt;</span><span class="s1">Basics</span><span class="s0">&lt;/a&gt;&lt;/li&gt;</span>
<span class="s0">&lt;/ul&gt;</span>
<span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#attributes-and-methods&quot; </span><span class="s2">id</span><span class="s3">=&quot;id27&quot;</span><span class="s0">&gt;</span><span class="s1">Attributes and methods</span><span class="s0">&lt;/a&gt;&lt;/li&gt;</span>
<span class="s0">&lt;/ul&gt;</span>
<span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#ftphost-instances-vs-ftp-connections&quot; </span><span class="s2">id</span><span class="s3">=&quot;id28&quot;</span><span class="s0">&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">FTPHost</span><span class="s0">&lt;/tt&gt; </span><span class="s1">instances vs. FTP connections</span><span class="s0">&lt;/a&gt;&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#writing-directory-parsers&quot; </span><span class="s2">id</span><span class="s3">=&quot;id29&quot;</span><span class="s0">&gt;</span><span class="s1">Writing directory parsers</span><span class="s0">&lt;/a&gt;&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#faq-tips-and-tricks&quot; </span><span class="s2">id</span><span class="s3">=&quot;id30&quot;</span><span class="s0">&gt;</span><span class="s1">FAQ / Tips and tricks</span><span class="s0">&lt;/a&gt;&lt;ul&gt;</span>
<span class="s0">&lt;li&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#where-can-i-get-the-latest-version&quot; </span><span class="s2">id</span><span class="s3">=&quot;id31&quot;</span><span class="s0">&gt;</span><span class="s1">Where can I get the latest version?</span><span class="s0">&lt;/a&gt;&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#is-there-a-mailing-list-on-ftputil&quot; </span><span class="s2">id</span><span class="s3">=&quot;id32&quot;</span><span class="s0">&gt;</span><span class="s1">Is there a mailing list on </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftputil</span><span class="s0">&lt;/tt&gt;</span><span class="s1">?</span><span class="s0">&lt;/a&gt;&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#i-found-a-bug-what-now&quot; </span><span class="s2">id</span><span class="s3">=&quot;id33&quot;</span><span class="s0">&gt;</span><span class="s1">I found a bug! What now?</span><span class="s0">&lt;/a&gt;&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#does-ftputil-support-tls&quot; </span><span class="s2">id</span><span class="s3">=&quot;id34&quot;</span><span class="s0">&gt;</span><span class="s1">Does </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftputil</span><span class="s0">&lt;/tt&gt; </span><span class="s1">support TLS?</span><span class="s0">&lt;/a&gt;&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#how-do-i-connect-to-a-non-default-port&quot; </span><span class="s2">id</span><span class="s3">=&quot;id35&quot;</span><span class="s0">&gt;</span><span class="s1">How do I connect to a non-default port?</span><span class="s0">&lt;/a&gt;&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#how-do-i-set-active-or-passive-mode&quot; </span><span class="s2">id</span><span class="s3">=&quot;id36&quot;</span><span class="s0">&gt;</span><span class="s1">How do I set active or passive mode?</span><span class="s0">&lt;/a&gt;&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#how-can-i-debug-an-ftp-connection-problem&quot; </span><span class="s2">id</span><span class="s3">=&quot;id37&quot;</span><span class="s0">&gt;</span><span class="s1">How can I debug an FTP connection problem?</span><span class="s0">&lt;/a&gt;&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#conditional-upload-download-to-from-a-server-in-a-different-time-zone&quot; </span><span class="s2">id</span><span class="s3">=&quot;id38&quot;</span><span class="s0">&gt;</span><span class="s1">Conditional upload/download to/from a server in a different time zone</span><span class="s0">&lt;/a&gt;&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#when-i-use-ftputil-all-i-get-is-a-parsererror-exception&quot; </span><span class="s2">id</span><span class="s3">=&quot;id39&quot;</span><span class="s0">&gt;</span><span class="s1">When I use </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftputil</span><span class="s0">&lt;/tt&gt;</span><span class="s1">, all I get is a </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ParserError</span><span class="s0">&lt;/tt&gt; </span><span class="s1">exception</span><span class="s0">&lt;/a&gt;&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#isdir-isfile-or-islink-incorrectly-return-false&quot; </span><span class="s2">id</span><span class="s3">=&quot;id40&quot;</span><span class="s0">&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">isdir</span><span class="s0">&lt;/tt&gt;</span><span class="s1">, </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">isfile</span><span class="s0">&lt;/tt&gt; </span><span class="s1">or </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">islink</span><span class="s0">&lt;/tt&gt; </span><span class="s1">incorrectly return </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">False</span><span class="s0">&lt;/tt&gt;&lt;/a&gt;&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#i-don-t-find-an-answer-to-my-problem-in-this-document&quot; </span><span class="s2">id</span><span class="s3">=&quot;id41&quot;</span><span class="s0">&gt;</span><span class="s1">I don't find an answer to my problem in this document</span><span class="s0">&lt;/a&gt;&lt;/li&gt;</span>
<span class="s0">&lt;/ul&gt;</span>
<span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#bugs-and-limitations&quot; </span><span class="s2">id</span><span class="s3">=&quot;id42&quot;</span><span class="s0">&gt;</span><span class="s1">Bugs and limitations</span><span class="s0">&lt;/a&gt;&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#files&quot; </span><span class="s2">id</span><span class="s3">=&quot;id43&quot;</span><span class="s0">&gt;</span><span class="s1">Files</span><span class="s0">&lt;/a&gt;&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#references&quot; </span><span class="s2">id</span><span class="s3">=&quot;id44&quot;</span><span class="s0">&gt;</span><span class="s1">References</span><span class="s0">&lt;/a&gt;&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#authors&quot; </span><span class="s2">id</span><span class="s3">=&quot;id45&quot;</span><span class="s0">&gt;</span><span class="s1">Authors</span><span class="s0">&lt;/a&gt;&lt;/li&gt;</span>
<span class="s0">&lt;/ul&gt;</span>
<span class="s0">&lt;/div&gt;</span>
<span class="s0">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;section&quot; </span><span class="s2">id</span><span class="s3">=&quot;introduction&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;h1&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;toc-backref&quot; </span><span class="s2">href</span><span class="s3">=&quot;#id4&quot;</span><span class="s0">&gt;</span><span class="s1">Introduction</span><span class="s0">&lt;/a&gt;&lt;/h1&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">The </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftputil</span><span class="s0">&lt;/tt&gt; </span><span class="s1">module is a high-level interface to the </span><span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference external&quot; </span><span class="s2">href</span><span class="s3">=&quot;https://docs.python.org/library/ftplib.html&quot;</span><span class="s0">&gt;</span><span class="s1">ftplib</span><span class="s0">&lt;/a&gt;</span>
<span class="s1">module. The </span><span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#ftphost-objects&quot;</span><span class="s0">&gt;</span><span class="s1">FTPHost objects</span><span class="s0">&lt;/a&gt; </span><span class="s1">generated from it allow many operations</span>
<span class="s1">similar to those of </span><span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference external&quot; </span><span class="s2">href</span><span class="s3">=&quot;https://docs.python.org/library/os.html&quot;</span><span class="s0">&gt;</span><span class="s1">os</span><span class="s0">&lt;/a&gt;</span><span class="s1">, </span><span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference external&quot; </span><span class="s2">href</span><span class="s3">=&quot;https://docs.python.org/library/os.path.html&quot;</span><span class="s0">&gt;</span><span class="s1">os.path</span><span class="s0">&lt;/a&gt; </span><span class="s1">and </span><span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference external&quot; </span><span class="s2">href</span><span class="s3">=&quot;https://docs.python.org/library/shutil.html&quot;</span><span class="s0">&gt;</span><span class="s1">shutil</span><span class="s0">&lt;/a&gt;</span><span class="s1">.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">Example:</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;pre </span><span class="s2">class</span><span class="s3">=&quot;literal-block&quot;</span><span class="s0">&gt;</span>
<span class="s1">import ftputil</span>

<span class="s1"># Download some files from the login directory.</span>
<span class="s1">with ftputil.FTPHost(</span><span class="s4">&amp;quot;</span><span class="s1">ftp.domain.com</span><span class="s4">&amp;quot;</span><span class="s1">, </span><span class="s4">&amp;quot;</span><span class="s1">user</span><span class="s4">&amp;quot;</span><span class="s1">, </span><span class="s4">&amp;quot;</span><span class="s1">password</span><span class="s4">&amp;quot;</span><span class="s1">) as ftp_host:</span>
    <span class="s1">names = ftp_host.listdir(ftp_host.curdir)</span>
    <span class="s1">for name in names:</span>
        <span class="s1">if ftp_host.path.isfile(name):</span>
            <span class="s1">ftp_host.download(name, name)  # remote, local</span>
    <span class="s1"># Make a new directory and copy a remote file into it.</span>
    <span class="s1">ftp_host.mkdir(</span><span class="s4">&amp;quot;</span><span class="s1">newdir</span><span class="s4">&amp;quot;</span><span class="s1">)</span>
    <span class="s1">with ftp_host.open(</span><span class="s4">&amp;quot;</span><span class="s1">index.html</span><span class="s4">&amp;quot;</span><span class="s1">, </span><span class="s4">&amp;quot;</span><span class="s1">rb</span><span class="s4">&amp;quot;</span><span class="s1">) as source:</span>
        <span class="s1">with ftp_host.open(</span><span class="s4">&amp;quot;</span><span class="s1">newdir/index.html</span><span class="s4">&amp;quot;</span><span class="s1">, </span><span class="s4">&amp;quot;</span><span class="s1">wb</span><span class="s4">&amp;quot;</span><span class="s1">) as target:</span>
            <span class="s1">ftp_host.copyfileobj(source, target)  # similar to shutil.copyfileobj</span>
<span class="s0">&lt;/pre&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">Also, there are </span><span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#ftphost-lstat&quot;</span><span class="s0">&gt;</span><span class="s1">FTPHost.lstat</span><span class="s0">&lt;/a&gt; </span><span class="s1">and </span><span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#ftphost-stat&quot;</span><span class="s0">&gt;</span><span class="s1">FTPHost.stat</span><span class="s0">&lt;/a&gt; </span><span class="s1">to request size and</span>
<span class="s1">modification time of a file. The latter can also follow links, similar</span>
<span class="s1">to </span><span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference external&quot; </span><span class="s2">href</span><span class="s3">=&quot;https://docs.python.org/library/os.html#os.stat&quot;</span><span class="s0">&gt;</span><span class="s1">os.stat</span><span class="s0">&lt;/a&gt;</span><span class="s1">. </span><span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#ftphost-walk&quot;</span><span class="s0">&gt;</span><span class="s1">FTPHost.walk</span><span class="s0">&lt;/a&gt; </span><span class="s1">and </span><span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#ftphost-path-walk&quot;</span><span class="s0">&gt;</span><span class="s1">FTPHost.path.walk</span><span class="s0">&lt;/a&gt; </span><span class="s1">work, too.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/div&gt;</span>
<span class="s0">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;section&quot; </span><span class="s2">id</span><span class="s3">=&quot;ftputil-features&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;h1&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;toc-backref&quot; </span><span class="s2">href</span><span class="s3">=&quot;#id5&quot;</span><span class="s0">&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftputil</span><span class="s0">&lt;/tt&gt; </span><span class="s1">features</span><span class="s0">&lt;/a&gt;&lt;/h1&gt;</span>
<span class="s0">&lt;ul </span><span class="s2">class</span><span class="s3">=&quot;simple&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;li&gt;</span><span class="s1">Method names are familiar from Python's </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">os</span><span class="s0">&lt;/tt&gt;</span><span class="s1">, </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">os.path</span><span class="s0">&lt;/tt&gt; </span><span class="s1">and</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">shutil</span><span class="s0">&lt;/tt&gt; </span><span class="s1">modules. For example, use </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">os.path.join</span><span class="s0">&lt;/tt&gt; </span><span class="s1">to join</span>
<span class="s1">paths for a local file system and </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftp_host.path.join</span><span class="s0">&lt;/tt&gt; </span><span class="s1">to join</span>
<span class="s1">paths for a remote FTP file system.</span><span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;</span><span class="s1">Remote file system navigation (</span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">getcwd</span><span class="s0">&lt;/tt&gt;</span><span class="s1">, </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">chdir</span><span class="s0">&lt;/tt&gt;</span><span class="s1">)</span><span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;</span><span class="s1">Upload and download files (</span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">upload</span><span class="s0">&lt;/tt&gt;</span><span class="s1">, </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">upload_if_newer</span><span class="s0">&lt;/tt&gt;</span><span class="s1">,</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">download</span><span class="s0">&lt;/tt&gt;</span><span class="s1">, </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">download_if_newer</span><span class="s0">&lt;/tt&gt;</span><span class="s1">)</span><span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;</span><span class="s1">Time zone synchronization between client and server (needed</span>
<span class="s1">for </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">upload_if_newer</span><span class="s0">&lt;/tt&gt; </span><span class="s1">and </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">download_if_newer</span><span class="s0">&lt;/tt&gt;</span><span class="s1">)</span><span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;</span><span class="s1">Create and remove directories (</span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">mkdir</span><span class="s0">&lt;/tt&gt;</span><span class="s1">, </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">makedirs</span><span class="s0">&lt;/tt&gt;</span><span class="s1">, </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">rmdir</span><span class="s0">&lt;/tt&gt;</span><span class="s1">,</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">rmtree</span><span class="s0">&lt;/tt&gt;</span><span class="s1">) and remove files (</span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">remove</span><span class="s0">&lt;/tt&gt;</span><span class="s1">)</span><span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;</span><span class="s1">Get information about directories, files and links (</span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">listdir</span><span class="s0">&lt;/tt&gt;</span><span class="s1">,</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">stat</span><span class="s0">&lt;/tt&gt;</span><span class="s1">, </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">lstat</span><span class="s0">&lt;/tt&gt;</span><span class="s1">, </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">exists</span><span class="s0">&lt;/tt&gt;</span><span class="s1">, </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">isdir</span><span class="s0">&lt;/tt&gt;</span><span class="s1">, </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">isfile</span><span class="s0">&lt;/tt&gt;</span><span class="s1">, </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">islink</span><span class="s0">&lt;/tt&gt;</span><span class="s1">,</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">abspath</span><span class="s0">&lt;/tt&gt;</span><span class="s1">, </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">dirname</span><span class="s0">&lt;/tt&gt;</span><span class="s1">, </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">basename</span><span class="s0">&lt;/tt&gt; </span><span class="s1">etc.)</span><span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;</span><span class="s1">Iterate over remote file systems (</span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">walk</span><span class="s0">&lt;/tt&gt;</span><span class="s1">)</span><span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;</span><span class="s1">Local caching of results from </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">lstat</span><span class="s0">&lt;/tt&gt; </span><span class="s1">and </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">stat</span><span class="s0">&lt;/tt&gt; </span><span class="s1">calls to reduce</span>
<span class="s1">network access (also applies to </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">exists</span><span class="s0">&lt;/tt&gt;</span><span class="s1">, </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">getmtime</span><span class="s0">&lt;/tt&gt; </span><span class="s1">etc.).</span><span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;</span><span class="s1">Read files from and write files to remote hosts via</span>
<span class="s1">file-like objects (</span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">FTPHost.open</span><span class="s0">&lt;/tt&gt;</span><span class="s1">; the generated file-like objects</span>
<span class="s1">have the familiar methods like </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">read</span><span class="s0">&lt;/tt&gt;</span><span class="s1">, </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">readline</span><span class="s0">&lt;/tt&gt;</span><span class="s1">, </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">readlines</span><span class="s0">&lt;/tt&gt;</span><span class="s1">,</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">write</span><span class="s0">&lt;/tt&gt;</span><span class="s1">, </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">writelines</span><span class="s0">&lt;/tt&gt; </span><span class="s1">and </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">close</span><span class="s0">&lt;/tt&gt;</span><span class="s1">. You can also iterate over</span>
<span class="s1">these files line by line in a </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">for</span><span class="s0">&lt;/tt&gt; </span><span class="s1">loop.</span><span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;/ul&gt;</span>
<span class="s0">&lt;/div&gt;</span>
<span class="s0">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;section&quot; </span><span class="s2">id</span><span class="s3">=&quot;exception-hierarchy&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;h1&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;toc-backref&quot; </span><span class="s2">href</span><span class="s3">=&quot;#id6&quot;</span><span class="s0">&gt;</span><span class="s1">Exception hierarchy</span><span class="s0">&lt;/a&gt;&lt;/h1&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">The exceptions are in the namespace of the </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftputil.error</span><span class="s0">&lt;/tt&gt; </span><span class="s1">module, e. g.</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftputil.error.TemporaryError</span><span class="s0">&lt;/tt&gt;</span><span class="s1">.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">The exception classes are organized as follows:</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;pre </span><span class="s2">class</span><span class="s3">=&quot;literal-block&quot;</span><span class="s0">&gt;</span>
<span class="s1">FTPError</span>
    <span class="s1">FTPOSError(FTPError, OSError)</span>
        <span class="s1">PermanentError(FTPOSError)</span>
            <span class="s1">CommandNotImplementedError(PermanentError)</span>
        <span class="s1">TemporaryError(FTPOSError)</span>
    <span class="s1">FTPIOError(FTPError)</span>
    <span class="s1">InternalError(FTPError)</span>
        <span class="s1">InaccessibleLoginDirError(InternalError)</span>
        <span class="s1">NoEncodingError(InternalError)</span>
        <span class="s1">ParserError(InternalError)</span>
        <span class="s1">RootDirError(InternalError)</span>
        <span class="s1">TimeShiftError(InternalError)</span>
<span class="s0">&lt;/pre&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">and are described here:</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;ul&gt;</span>
<span class="s0">&lt;li&gt;&lt;p </span><span class="s2">class</span><span class="s3">=&quot;first&quot;</span><span class="s0">&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">FTPError</span><span class="s0">&lt;/tt&gt;&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">is the root of the exception hierarchy of the module.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;p </span><span class="s2">class</span><span class="s3">=&quot;first&quot;</span><span class="s0">&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">FTPOSError</span><span class="s0">&lt;/tt&gt;&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">is derived from </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">OSError</span><span class="s0">&lt;/tt&gt;</span><span class="s1">. This is for similarity between the</span>
<span class="s1">os module and </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">FTPHost</span><span class="s0">&lt;/tt&gt; </span><span class="s1">objects. Compare</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;pre </span><span class="s2">class</span><span class="s3">=&quot;literal-block&quot;</span><span class="s0">&gt;</span>
<span class="s1">try:</span>
    <span class="s1">os.chdir(</span><span class="s4">&amp;quot;</span><span class="s1">nonexisting_directory</span><span class="s4">&amp;quot;</span><span class="s1">)</span>
<span class="s1">except OSError:</span>
    <span class="s1">...</span>
<span class="s0">&lt;/pre&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">with</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;pre </span><span class="s2">class</span><span class="s3">=&quot;literal-block&quot;</span><span class="s0">&gt;</span>
<span class="s1">host = ftputil.FTPHost(</span><span class="s4">&amp;quot;</span><span class="s1">host</span><span class="s4">&amp;quot;</span><span class="s1">, </span><span class="s4">&amp;quot;</span><span class="s1">user</span><span class="s4">&amp;quot;</span><span class="s1">, </span><span class="s4">&amp;quot;</span><span class="s1">password</span><span class="s4">&amp;quot;</span><span class="s1">)</span>
<span class="s1">try:</span>
    <span class="s1">host.chdir(</span><span class="s4">&amp;quot;</span><span class="s1">nonexisting_directory</span><span class="s4">&amp;quot;</span><span class="s1">)</span>
<span class="s1">except OSError:</span>
    <span class="s1">...</span>
<span class="s0">&lt;/pre&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">Imagine a function</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;pre </span><span class="s2">class</span><span class="s3">=&quot;literal-block&quot;</span><span class="s0">&gt;</span>
<span class="s1">def func(path, file):</span>
    <span class="s1">...</span>
<span class="s0">&lt;/pre&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">which works on the local file system and catches </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">OSErrors</span><span class="s0">&lt;/tt&gt;</span><span class="s1">. If you</span>
<span class="s1">change the parameter list to</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;pre </span><span class="s2">class</span><span class="s3">=&quot;literal-block&quot;</span><span class="s0">&gt;</span>
<span class="s1">def func(path, file, os=os):</span>
    <span class="s1">...</span>
<span class="s0">&lt;/pre&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">where </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">os</span><span class="s0">&lt;/tt&gt; </span><span class="s1">denotes the </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">os</span><span class="s0">&lt;/tt&gt; </span><span class="s1">module, you can call the function also as</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;pre </span><span class="s2">class</span><span class="s3">=&quot;literal-block&quot;</span><span class="s0">&gt;</span>
<span class="s1">host = ftputil.FTPHost(</span><span class="s4">&amp;quot;</span><span class="s1">host</span><span class="s4">&amp;quot;</span><span class="s1">, </span><span class="s4">&amp;quot;</span><span class="s1">user</span><span class="s4">&amp;quot;</span><span class="s1">, </span><span class="s4">&amp;quot;</span><span class="s1">password</span><span class="s4">&amp;quot;</span><span class="s1">)</span>
<span class="s1">func(path, file, os=host)</span>
<span class="s0">&lt;/pre&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">to use the same code for both a local and remote file system.</span>
<span class="s1">Another similarity between </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">OSError</span><span class="s0">&lt;/tt&gt; </span><span class="s1">and </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">FTPOSError</span><span class="s0">&lt;/tt&gt; </span><span class="s1">is that</span>
<span class="s1">the latter holds the FTP server return code in the </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">errno</span><span class="s0">&lt;/tt&gt;</span>
<span class="s1">attribute of the exception object and the error text in</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">strerror</span><span class="s0">&lt;/tt&gt;</span><span class="s1">.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;p </span><span class="s2">class</span><span class="s3">=&quot;first&quot;</span><span class="s0">&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">PermanentError</span><span class="s0">&lt;/tt&gt;&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">is raised for 5xx return codes from the FTP server. This</span>
<span class="s1">corresponds to </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftplib.error_perm</span><span class="s0">&lt;/tt&gt; </span><span class="s1">(though </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">PermanentError</span><span class="s0">&lt;/tt&gt; </span><span class="s1">and</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftplib.error_perm</span><span class="s0">&lt;/tt&gt; </span><span class="s1">are </span><span class="s0">&lt;em&gt;</span><span class="s1">not</span><span class="s0">&lt;/em&gt; </span><span class="s1">identical).</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;p </span><span class="s2">class</span><span class="s3">=&quot;first&quot;</span><span class="s0">&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">CommandNotImplementedError</span><span class="s0">&lt;/tt&gt;&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">indicates that an underlying command the code tries to use is not</span>
<span class="s1">implemented. For an example, see the description of the</span>
<span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#ftphost-chmod&quot;</span><span class="s0">&gt;</span><span class="s1">FTPHost.chmod</span><span class="s0">&lt;/a&gt; </span><span class="s1">method.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;p </span><span class="s2">class</span><span class="s3">=&quot;first&quot;</span><span class="s0">&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">TemporaryError</span><span class="s0">&lt;/tt&gt;&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">is raised for FTP return codes from the 4xx category. This</span>
<span class="s1">corresponds to </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftplib.error_temp</span><span class="s0">&lt;/tt&gt; </span><span class="s1">(though </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">TemporaryError</span><span class="s0">&lt;/tt&gt; </span><span class="s1">and</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftplib.error_temp</span><span class="s0">&lt;/tt&gt; </span><span class="s1">are </span><span class="s0">&lt;em&gt;</span><span class="s1">not</span><span class="s0">&lt;/em&gt; </span><span class="s1">identical).</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;p </span><span class="s2">class</span><span class="s3">=&quot;first&quot;</span><span class="s0">&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">FTPIOError</span><span class="s0">&lt;/tt&gt;&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">denotes an I/O error on the remote host. This appears</span>
<span class="s1">mainly with file-like objects that are retrieved by calling</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">FTPHost.open</span><span class="s0">&lt;/tt&gt;</span><span class="s1">. Compare</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;pre </span><span class="s2">class</span><span class="s3">=&quot;literal-block&quot;</span><span class="s0">&gt;</span>
<span class="s4">&amp;gt;&amp;gt;&amp;gt; </span><span class="s1">try:</span>
<span class="s1">...     f = open(</span><span class="s4">&amp;quot;</span><span class="s1">not_there</span><span class="s4">&amp;quot;</span><span class="s1">)</span>
<span class="s1">... except IOError as obj:</span>
<span class="s1">...     print(obj.errno)</span>
<span class="s1">...     print(obj.strerror)</span>
<span class="s1">...</span>
<span class="s1">2</span>
<span class="s1">No such file or directory</span>
<span class="s0">&lt;/pre&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">with</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;pre </span><span class="s2">class</span><span class="s3">=&quot;literal-block&quot;</span><span class="s0">&gt;</span>
<span class="s4">&amp;gt;&amp;gt;&amp;gt; </span><span class="s1">ftp_host = ftputil.FTPHost(</span><span class="s4">&amp;quot;</span><span class="s1">host</span><span class="s4">&amp;quot;</span><span class="s1">, </span><span class="s4">&amp;quot;</span><span class="s1">user</span><span class="s4">&amp;quot;</span><span class="s1">, </span><span class="s4">&amp;quot;</span><span class="s1">password</span><span class="s4">&amp;quot;</span><span class="s1">)</span>
<span class="s4">&amp;gt;&amp;gt;&amp;gt; </span><span class="s1">try:</span>
<span class="s1">...     f = ftp_host.open(</span><span class="s4">&amp;quot;</span><span class="s1">not_there</span><span class="s4">&amp;quot;</span><span class="s1">)</span>
<span class="s1">... except IOError as obj:</span>
<span class="s1">...     print(obj.errno)</span>
<span class="s1">...     print(obj.strerror)</span>
<span class="s1">...</span>
<span class="s1">550</span>
<span class="s1">550 not_there: No such file or directory.</span>
<span class="s0">&lt;/pre&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">As you can see, both code snippets are similar. However, the error</span>
<span class="s1">codes aren't the same.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;p </span><span class="s2">class</span><span class="s3">=&quot;first&quot;</span><span class="s0">&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">InternalError</span><span class="s0">&lt;/tt&gt;&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">subsumes exception classes for signaling errors due to limitations</span>
<span class="s1">of the FTP protocol or the concrete implementation of </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftputil</span><span class="s0">&lt;/tt&gt;</span><span class="s1">.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;p </span><span class="s2">class</span><span class="s3">=&quot;first&quot;</span><span class="s0">&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">InaccessibleLoginDirError</span><span class="s0">&lt;/tt&gt;&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">This exception is raised if the directory in which </span><span class="s4">&amp;quot;</span><span class="s1">you</span><span class="s4">&amp;quot; </span><span class="s1">are placed</span>
<span class="s1">upon login is not accessible, i. e. a </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">chdir</span><span class="s0">&lt;/tt&gt; </span><span class="s1">call with the</span>
<span class="s1">directory as argument would fail.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;p </span><span class="s2">class</span><span class="s3">=&quot;first&quot;</span><span class="s0">&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">NoEncodingError</span><span class="s0">&lt;/tt&gt;&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">is raised if an FTP session instance doesn't have an </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">encoding</span><span class="s0">&lt;/tt&gt;</span>
<span class="s1">attribute (see also </span><span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#session-factories&quot;</span><span class="s0">&gt;</span><span class="s1">session factories</span><span class="s0">&lt;/a&gt;</span><span class="s1">).</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;p </span><span class="s2">class</span><span class="s3">=&quot;first&quot;</span><span class="s0">&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ParserError</span><span class="s0">&lt;/tt&gt;&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">is used for errors during the parsing of directory</span>
<span class="s1">listings from the server. This exception is used by the </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">FTPHost</span><span class="s0">&lt;/tt&gt;</span>
<span class="s1">methods </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">stat</span><span class="s0">&lt;/tt&gt;</span><span class="s1">, </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">lstat</span><span class="s0">&lt;/tt&gt;</span><span class="s1">, and </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">listdir</span><span class="s0">&lt;/tt&gt;</span><span class="s1">.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;p </span><span class="s2">class</span><span class="s3">=&quot;first&quot;</span><span class="s0">&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">RootDirError</span><span class="s0">&lt;/tt&gt;&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">Because of the implementation of the </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">lstat</span><span class="s0">&lt;/tt&gt; </span><span class="s1">method it is not</span>
<span class="s1">possible to do a </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">stat</span><span class="s0">&lt;/tt&gt; </span><span class="s1">call on the root directory </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">/</span><span class="s0">&lt;/tt&gt;</span><span class="s1">.</span>
<span class="s1">If you know </span><span class="s0">&lt;em&gt;</span><span class="s1">any</span><span class="s0">&lt;/em&gt; </span><span class="s1">way to do it, please let me know. :-)</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">This problem does </span><span class="s0">&lt;em&gt;</span><span class="s1">not</span><span class="s0">&lt;/em&gt; </span><span class="s1">affect stat calls on items </span><span class="s0">&lt;em&gt;</span><span class="s1">in</span><span class="s0">&lt;/em&gt; </span><span class="s1">the root</span>
<span class="s1">directory.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;p </span><span class="s2">class</span><span class="s3">=&quot;first&quot;</span><span class="s0">&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">TimeShiftError</span><span class="s0">&lt;/tt&gt;&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">is used to denote errors which relate to setting the </span><span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#time-shift&quot;</span><span class="s0">&gt;</span><span class="s1">time shift</span><span class="s0">&lt;/a&gt;</span><span class="s1">.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;/ul&gt;</span>
<span class="s0">&lt;/div&gt;</span>
<span class="s0">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;section&quot; </span><span class="s2">id</span><span class="s3">=&quot;ftphost-objects&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;h1&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;toc-backref&quot; </span><span class="s2">href</span><span class="s3">=&quot;#id7&quot;</span><span class="s0">&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">FTPHost</span><span class="s0">&lt;/tt&gt; </span><span class="s1">objects</span><span class="s0">&lt;/a&gt;&lt;/h1&gt;</span>
<span class="s0">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;section&quot; </span><span class="s2">id</span><span class="s3">=&quot;construction&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;span </span><span class="s2">id</span><span class="s3">=&quot;ftphost-construction&quot;</span><span class="s0">&gt;&lt;/span&gt;&lt;h2&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;toc-backref&quot; </span><span class="s2">href</span><span class="s3">=&quot;#id8&quot;</span><span class="s0">&gt;</span><span class="s1">Construction</span><span class="s0">&lt;/a&gt;&lt;/h2&gt;</span>
<span class="s0">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;section&quot; </span><span class="s2">id</span><span class="s3">=&quot;id1&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;h3&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;toc-backref&quot; </span><span class="s2">href</span><span class="s3">=&quot;#id9&quot;</span><span class="s0">&gt;</span><span class="s1">Introduction</span><span class="s0">&lt;/a&gt;&lt;/h3&gt;</span>
<span class="s0">&lt;p&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">FTPHost</span><span class="s0">&lt;/tt&gt; </span><span class="s1">instances can be created with the following call:</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;pre </span><span class="s2">class</span><span class="s3">=&quot;literal-block&quot;</span><span class="s0">&gt;</span>
<span class="s1">ftp_host = ftputil.FTPHost(server, user, password, account,</span>
                           <span class="s1">session_factory=ftplib.FTP)</span>
<span class="s0">&lt;/pre&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">The first four parameters are strings with the same meaning as for the</span>
<span class="s1">FTP class in the </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftplib</span><span class="s0">&lt;/tt&gt; </span><span class="s1">module. Usually the </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">account</span><span class="s0">&lt;/tt&gt; </span><span class="s1">and</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">session_factory</span><span class="s0">&lt;/tt&gt; </span><span class="s1">arguments aren't needed though.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">FTPHost</span><span class="s0">&lt;/tt&gt; </span><span class="s1">objects can also be used in a </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">with</span><span class="s0">&lt;/tt&gt; </span><span class="s1">statement:</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;pre </span><span class="s2">class</span><span class="s3">=&quot;literal-block&quot;</span><span class="s0">&gt;</span>
<span class="s1">import ftputil</span>

<span class="s1">with ftputil.FTPHost(server, user, password) as ftp_host:</span>
    <span class="s1">print(ftp_host.listdir(ftp_host.curdir))</span>
<span class="s0">&lt;/pre&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">After the </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">with</span><span class="s0">&lt;/tt&gt; </span><span class="s1">block, the </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">FTPHost</span><span class="s0">&lt;/tt&gt; </span><span class="s1">instance and the</span>
<span class="s1">associated FTP sessions will be closed automatically.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">If something goes wrong during the </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">FTPHost</span><span class="s0">&lt;/tt&gt; </span><span class="s1">construction or in the</span>
<span class="s1">body of the </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">with</span><span class="s0">&lt;/tt&gt; </span><span class="s1">statement, the instance is closed as well.</span>
<span class="s1">Exceptions will be propagated (as with </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">try ... finally</span><span class="s0">&lt;/tt&gt;</span><span class="s1">).</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/div&gt;</span>
<span class="s0">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;section&quot; </span><span class="s2">id</span><span class="s3">=&quot;session-factories&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;span </span><span class="s2">id</span><span class="s3">=&quot;session-factory&quot;</span><span class="s0">&gt;&lt;/span&gt;&lt;h3&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;toc-backref&quot; </span><span class="s2">href</span><span class="s3">=&quot;#id10&quot;</span><span class="s0">&gt;</span><span class="s1">Session factories</span><span class="s0">&lt;/a&gt;&lt;/h3&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">The keyword argument </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">session_factory</span><span class="s0">&lt;/tt&gt; </span><span class="s1">may be used to generate FTP</span>
<span class="s1">connections with other factories than the default </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftplib.FTP</span><span class="s0">&lt;/tt&gt;</span><span class="s1">. For</span>
<span class="s1">example, the standard library of Python 3 contains a class</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftplib.FTP_TLS</span><span class="s0">&lt;/tt&gt; </span><span class="s1">which extends </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftplib.FTP</span><span class="s0">&lt;/tt&gt; </span><span class="s1">to use an encrypted</span>
<span class="s1">connection.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">In fact, all positional and keyword arguments other than</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">session_factory</span><span class="s0">&lt;/tt&gt; </span><span class="s1">are passed to the factory to generate a new</span>
<span class="s1">background session. This also happens for every remote file that is</span>
<span class="s1">opened; see below.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">This functionality of the constructor also allows to wrap</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftplib.FTP</span><span class="s0">&lt;/tt&gt; </span><span class="s1">objects to do something that wouldn't be possible with</span>
<span class="s1">the </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftplib.FTP</span><span class="s0">&lt;/tt&gt; </span><span class="s1">constructor alone.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">As an example, assume you want to connect to another than the default</span>
<span class="s1">port, but </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftplib.FTP</span><span class="s0">&lt;/tt&gt; </span><span class="s1">only offers this by means of its </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">connect</span><span class="s0">&lt;/tt&gt;</span>
<span class="s1">method, not via its constructor. One solution is to use a custom</span>
<span class="s1">class as a session factory:</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;pre </span><span class="s2">class</span><span class="s3">=&quot;literal-block&quot;</span><span class="s0">&gt;</span>
<span class="s1">import ftplib</span>
<span class="s1">import ftputil</span>

<span class="s1">EXAMPLE_PORT = 50001</span>

<span class="s1">class MySession(ftplib.FTP):</span>

    <span class="s1">def __init__(self, host, userid, password, port):</span>
        <span class="s4">&amp;quot;&amp;quot;&amp;quot;</span><span class="s1">Act like ftplib.FTP's constructor but connect to another port.</span><span class="s4">&amp;quot;&amp;quot;&amp;quot;</span>
        <span class="s1">ftplib.FTP.__init__(self)</span>
        <span class="s1">self.connect(host, port)</span>
        <span class="s1">self.login(userid, password)</span>

<span class="s1"># Try _not_ to use an _instance_ `MySession()` as factory, -</span>
<span class="s1"># use the class itself.</span>
<span class="s1">with ftputil.FTPHost(host, userid, password, port=EXAMPLE_PORT,</span>
                     <span class="s1">session_factory=MySession) as ftp_host:</span>
    <span class="s1"># Use `ftp_host` as usual.</span>
    <span class="s1">...</span>
<span class="s0">&lt;/pre&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">On login, the format of the directory listings (needed for stat'ing</span>
<span class="s1">files and directories) should be determined automatically. If not,</span>
<span class="s1">please </span><span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference external&quot; </span><span class="s2">href</span><span class="s3">=&quot;https://ftputil.sschwarzer.net/issuetrackernotes&quot;</span><span class="s0">&gt;</span><span class="s1">enter a ticket</span><span class="s0">&lt;/a&gt;</span><span class="s1">.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">For the most common uses you don't need to create your own session</span>
<span class="s1">factory class though. The </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftputil.session</span><span class="s0">&lt;/tt&gt; </span><span class="s1">module has a function</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">session_factory</span><span class="s0">&lt;/tt&gt; </span><span class="s1">that can create session factories for a variety</span>
<span class="s1">of parameters:</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;pre </span><span class="s2">class</span><span class="s3">=&quot;literal-block&quot;</span><span class="s0">&gt;</span>
<span class="s1">session_factory(base_class=ftplib.FTP,</span>
                <span class="s1">port=21,</span>
                <span class="s1">use_passive_mode=None,</span>
                <span class="s1">encrypt_data_channel=True,</span>
                <span class="s1">encoding=None,</span>
                <span class="s1">debug_level=None)</span>
<span class="s0">&lt;/pre&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">with</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;ul&gt;</span>
<span class="s0">&lt;li&gt;&lt;p </span><span class="s2">class</span><span class="s3">=&quot;first&quot;</span><span class="s0">&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">base_class</span><span class="s0">&lt;/tt&gt; </span><span class="s1">is a base class to inherit a new session factory</span>
<span class="s1">class from. By default, this is </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftplib.FTP</span><span class="s0">&lt;/tt&gt; </span><span class="s1">from the Python</span>
<span class="s1">standard library.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;p </span><span class="s2">class</span><span class="s3">=&quot;first&quot;</span><span class="s0">&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">port</span><span class="s0">&lt;/tt&gt; </span><span class="s1">is the command channel port. The default is 21, used in most</span>
<span class="s1">FTP server configurations.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;p </span><span class="s2">class</span><span class="s3">=&quot;first&quot;</span><span class="s0">&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">use_passive_mode</span><span class="s0">&lt;/tt&gt; </span><span class="s1">is either a boolean that determines whether</span>
<span class="s1">passive mode should be used or </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">None</span><span class="s0">&lt;/tt&gt;</span><span class="s1">. </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">None</span><span class="s0">&lt;/tt&gt; </span><span class="s1">means to let the</span>
<span class="s1">base class choose active or passive mode.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;p </span><span class="s2">class</span><span class="s3">=&quot;first&quot;</span><span class="s0">&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">encrypt_data_channel</span><span class="s0">&lt;/tt&gt; </span><span class="s1">defines whether to encrypt the data channel</span>
<span class="s1">for secure connections. This is only supported for the base classes</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftplib.FTP_TLS</span><span class="s0">&lt;/tt&gt; </span><span class="s1">and </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">M2Crypto.ftpslib.FTP_TLS</span><span class="s0">&lt;/tt&gt;</span><span class="s1">, otherwise the</span>
<span class="s1">parameter is ignored.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;p </span><span class="s2">class</span><span class="s3">=&quot;first&quot;</span><span class="s0">&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">encoding</span><span class="s0">&lt;/tt&gt; </span><span class="s1">can be a string to set the encoding of directory and</span>
<span class="s1">file paths on the remote server. (This has nothing to do with the</span>
<span class="s1">encoding of file contents!) If you pass a string and your base class</span>
<span class="s1">is neither </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftplib.FTP</span><span class="s0">&lt;/tt&gt; </span><span class="s1">nor </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftplib.FTP_TLS</span><span class="s0">&lt;/tt&gt;</span><span class="s1">, the used heuristic</span>
<span class="s1">in </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">session_factory</span><span class="s0">&lt;/tt&gt; </span><span class="s1">may not work reliably. Therefore, if in</span>
<span class="s1">doubt, let </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">encoding</span><span class="s0">&lt;/tt&gt; </span><span class="s1">be </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">None</span><span class="s0">&lt;/tt&gt; </span><span class="s1">and define your </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">base_class</span><span class="s0">&lt;/tt&gt;</span>
<span class="s1">so that it sets the encoding you want.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">Note: In Python 3.9, the default path encoding for </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftplib.FTP</span><span class="s0">&lt;/tt&gt;</span>
<span class="s1">and </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftplib.FTP_TLS</span><span class="s0">&lt;/tt&gt; </span><span class="s1">changed from previously </span><span class="s4">&amp;quot;</span><span class="s1">latin-1</span><span class="s4">&amp;quot; </span><span class="s1">to </span><span class="s4">&amp;quot;</span><span class="s1">utf-8</span><span class="s4">&amp;quot;</span><span class="s1">.</span>
<span class="s1">Hence, if you don't pass an </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">encoding</span><span class="s0">&lt;/tt&gt; </span><span class="s1">to </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">session_factory</span><span class="s0">&lt;/tt&gt;</span><span class="s1">,</span>
<span class="s1">you'll get different path encodings for Python 3.8 and earlier vs.</span>
<span class="s1">Python 3.9 and later.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">If you're sure that you always use only ASCII characters in your</span>
<span class="s1">remote paths, you don't need to worry about the path encoding and</span>
<span class="s1">don't need to use the </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">encoding</span><span class="s0">&lt;/tt&gt; </span><span class="s1">argument.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;p </span><span class="s2">class</span><span class="s3">=&quot;first&quot;</span><span class="s0">&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">debug_level</span><span class="s0">&lt;/tt&gt; </span><span class="s1">sets the debug level for FTP session instances. The</span>
<span class="s1">semantics is defined by the base class. For example, a debug level</span>
<span class="s1">of 2 causes the most verbose output for Python's </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftplib.FTP</span><span class="s0">&lt;/tt&gt;</span>
<span class="s1">class.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;/ul&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">All of these parameters can be combined. For example, you could use</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;pre </span><span class="s2">class</span><span class="s3">=&quot;literal-block&quot;</span><span class="s0">&gt;</span>
<span class="s1">import ftplib</span>

<span class="s1">import ftputil</span>
<span class="s1">import ftputil.session</span>


<span class="s1">my_session_factory = ftputil.session.session_factory(</span>
                       <span class="s1">base_class=ftpslib.FTP_TLS,</span>
                       <span class="s1">port=31,</span>
                       <span class="s1">encrypt_data_channel=True,</span>
                       <span class="s1">encoding=</span><span class="s4">&amp;quot;</span><span class="s1">UTF-8</span><span class="s4">&amp;quot;</span><span class="s1">,</span>
                       <span class="s1">debug_level=2)</span>

<span class="s1">with ftputil.FTPHost(server, user, password,</span>
                     <span class="s1">session_factory=my_session_factory) as ftp_host:</span>
    <span class="s1">...</span>
<span class="s0">&lt;/pre&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">to create and use a session factory derived from </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftplib.FTP_TLS</span><span class="s0">&lt;/tt&gt;</span>
<span class="s1">that connects on command channel 31, will encrypt the data channel,</span>
<span class="s1">use the UTF-8 encoding for remote paths and print output for debug</span>
<span class="s1">level 2.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">Note: Generally, you can achieve everything you can do with</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftputil.session.session_factory</span><span class="s0">&lt;/tt&gt; </span><span class="s1">with an explicit session factory</span>
<span class="s1">as described at the start of this section.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/div&gt;</span>
<span class="s0">&lt;/div&gt;</span>
<span class="s0">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;section&quot; </span><span class="s2">id</span><span class="s3">=&quot;directory-and-file-names&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;h2&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;toc-backref&quot; </span><span class="s2">href</span><span class="s3">=&quot;#id11&quot;</span><span class="s0">&gt;</span><span class="s1">Directory and file names</span><span class="s0">&lt;/a&gt;&lt;/h2&gt;</span>
<span class="s0">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;admonition note&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;p </span><span class="s2">class</span><span class="s3">=&quot;first admonition-title&quot;</span><span class="s0">&gt;</span><span class="s1">Note</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p </span><span class="s2">class</span><span class="s3">=&quot;last&quot;</span><span class="s0">&gt;</span><span class="s1">Keep in mind that this section only applies to directory and file</span>
<span class="s0">&lt;em&gt;</span><span class="s1">names</span><span class="s0">&lt;/em&gt;</span><span class="s1">, not file </span><span class="s0">&lt;em&gt;</span><span class="s1">contents</span><span class="s0">&lt;/em&gt;</span><span class="s1">. Encoding and decoding for file</span>
<span class="s1">contents is handled by the </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">encoding</span><span class="s0">&lt;/tt&gt; </span><span class="s1">argument for</span>
<span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#ftphost-open&quot;</span><span class="s0">&gt;</span><span class="s1">FTPHost.open</span><span class="s0">&lt;/a&gt;</span><span class="s1">.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/div&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">Generally, paths can be </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">str</span><span class="s0">&lt;/tt&gt; </span><span class="s1">or </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">bytes</span><span class="s0">&lt;/tt&gt; </span><span class="s1">objects (or </span><span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference external&quot; </span><span class="s2">href</span><span class="s3">=&quot;https://docs.python.org/3/library/os.html#os.PathLike&quot;</span><span class="s0">&gt;</span><span class="s1">PathLike</span><span class="s0">&lt;/a&gt;</span>
<span class="s1">objects wrapping </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">str</span><span class="s0">&lt;/tt&gt; </span><span class="s1">or </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">bytes</span><span class="s0">&lt;/tt&gt;</span><span class="s1">). However, you can't mix</span>
<span class="s1">different string types (</span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">bytes</span><span class="s0">&lt;/tt&gt; </span><span class="s1">and </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">str</span><span class="s0">&lt;/tt&gt;</span><span class="s1">) in one call (for</span>
<span class="s1">example in </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">FTPHost.path.join</span><span class="s0">&lt;/tt&gt;</span><span class="s1">). If a method gets a string argument</span>
<span class="s1">(or a string argument wrapped in a </span><span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference external&quot; </span><span class="s2">href</span><span class="s3">=&quot;https://docs.python.org/3/library/os.html#os.PathLike&quot;</span><span class="s0">&gt;</span><span class="s1">PathLike</span><span class="s0">&lt;/a&gt; </span><span class="s1">object) and returns one</span>
<span class="s1">or more strings, these strings will have the same string type</span>
<span class="s1">(</span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">bytes</span><span class="s0">&lt;/tt&gt; </span><span class="s1">or </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">str</span><span class="s0">&lt;/tt&gt;</span><span class="s1">) as the argument(s). Mixing different string</span>
<span class="s1">types in one call (for example in </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">FTPHost.path.join</span><span class="s0">&lt;/tt&gt;</span><span class="s1">) isn't allowed</span>
<span class="s1">and will cause a </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">TypeError</span><span class="s0">&lt;/tt&gt;</span><span class="s1">. These rules are the same as for local</span>
<span class="s1">file system operations.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">Although you can pass paths as </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">str</span><span class="s0">&lt;/tt&gt; </span><span class="s1">or </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">bytes</span><span class="s0">&lt;/tt&gt;</span><span class="s1">, the former is</span>
<span class="s1">recommended. See below for the reason.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;&lt;em&gt;</span><span class="s1">If</span><span class="s0">&lt;/em&gt; </span><span class="s1">you have directory or file names with non-ASCII characters, you</span>
<span class="s1">need to be aware of the encoding the </span><span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#session-factory&quot;</span><span class="s0">&gt;</span><span class="s1">session factory</span><span class="s0">&lt;/a&gt; </span><span class="s1">(e. g.</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftplib.FTP</span><span class="s0">&lt;/tt&gt;</span><span class="s1">) uses. This needs to be the same encoding that the FTP</span>
<span class="s1">server uses for the paths.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">The following diagram shows string conversions on the way from your</span>
<span class="s1">code to the remote FTP server. The opposite way works analogously, so</span>
<span class="s1">encoding steps in the diagram become decoding steps and decoding steps</span>
<span class="s1">in the diagram become encoding steps.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">Both </span><span class="s4">&amp;quot;</span><span class="s1">branching points</span><span class="s4">&amp;quot; </span><span class="s1">in the upper and lower part of diagrams are</span>
<span class="s1">independent, so depending on how you pass paths to ftputil and which</span>
<span class="s1">file system API the FTP server uses, there are four possible</span>
<span class="s1">combinations.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;pre </span><span class="s2">class</span><span class="s3">=&quot;literal-block&quot;</span><span class="s0">&gt;</span>
  <span class="s1">+-----------+       +-----------+</span>
  <span class="s1">| Your code |       | Your code |</span>
  <span class="s1">+-----------+       +-----------+</span>
       <span class="s1">|                    |</span>
       <span class="s1">|  str               |  bytes</span>
       <span class="s1">v                    v</span>
 <span class="s1">+-------------+     +-------------+  decode with encoding of session,</span>
 <span class="s1">| ftputil API |     | ftputil API |  e. g. `ftplib.FTP` instance</span>
 <span class="s1">+-------------+     +-------------+</span>
         <span class="s1">\               /</span>
          <span class="s1">\     str     /</span>
           <span class="s1">v           v</span>
         <span class="s1">+---------------+  encode with encoding</span>
         <span class="s1">|  ftplib API   |  specified in `FTP` instance</span>
         <span class="s1">+---------------+</span>
                 <span class="s1">|</span>
                 <span class="s1">|  bytes</span>
                 <span class="s1">v</span>
          <span class="s1">+-------------+</span>
          <span class="s1">| socket API  |</span>
          <span class="s1">+-------------+</span>
             <span class="s1">/       \</span>
            <span class="s1">/         \                 local / client</span>
 <span class="s1">- - - - - / - - - - - \ - - - - - - - - - - - - - - - - - - - - - -</span>
          <span class="s1">/             \              remote / server</span>
         <span class="s1">/     bytes     \</span>
        <span class="s1">v                 v</span>
 <span class="s1">+------------+      +------------+  decode with encoding from</span>
 <span class="s1">| FTP server |      | FTP server |  FTP server configuration</span>
 <span class="s1">+------------+      +------------+</span>
       <span class="s1">|                   |</span>
       <span class="s1">|  bytes            |  str</span>
       <span class="s1">v                   v</span>
<span class="s1">+-------------+      +-------------+</span>
<span class="s1">| remote file |      | remote file |</span>
<span class="s1">| system API  |      | system API  |</span>
<span class="s1">+-------------+      +-------------+</span>
        <span class="s1">\                 /</span>
         <span class="s1">\      bytes    /</span>
          <span class="s1">v             v</span>
       <span class="s1">+-------------------+</span>
       <span class="s1">|    file system    |</span>
       <span class="s1">+-------------------+</span>
<span class="s0">&lt;/pre&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">As you can see at the top of the diagram, if you use </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">str</span><span class="s0">&lt;/tt&gt; </span><span class="s1">objects</span>
<span class="s1">(regular unicode strings), there's one fewer decoding step, and so one</span>
<span class="s1">fewer source of problems. If you use </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">bytes</span><span class="s0">&lt;/tt&gt; </span><span class="s1">objects for paths,</span>
<span class="s1">ftputil tries to get the encoding for the FTP server from the</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">encoding</span><span class="s0">&lt;/tt&gt; </span><span class="s1">attribute of the session instance (say, an instance of</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftplib.FTP</span><span class="s0">&lt;/tt&gt;</span><span class="s1">). If no </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">encoding</span><span class="s0">&lt;/tt&gt; </span><span class="s1">attribute is present, a</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">NoEncodingError</span><span class="s0">&lt;/tt&gt; </span><span class="s1">is raised.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">All encoding/decoding steps must use the same encoding, the encoding</span>
<span class="s1">the server uses (at the bottom of the diagram). If the server uses the</span>
<span class="s1">bytes from the socket directly, i. e. without an encoding step, you</span>
<span class="s1">have to use the file system encoding.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">Until and including Python 3.8, the encoding implicitly assumed by</span>
<span class="s1">the </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftplib</span><span class="s0">&lt;/tt&gt; </span><span class="s1">module was latin-1, so using </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">bytes</span><span class="s0">&lt;/tt&gt; </span><span class="s1">was the safest</span>
<span class="s1">strategy. However, Python 3.9 made the </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">encoding</span><span class="s0">&lt;/tt&gt;</span>
<span class="s1">configurable via an </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftplib.FTP</span><span class="s0">&lt;/tt&gt; </span><span class="s1">constructor argument </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">encoding</span><span class="s0">&lt;/tt&gt;</span><span class="s1">,</span>
<span class="s0">&lt;em&gt;</span><span class="s1">but defaults to UTF-8</span><span class="s0">&lt;/em&gt;</span><span class="s1">.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">If you don't pass a </span><span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#session-factory&quot;</span><span class="s0">&gt;</span><span class="s1">session factory</span><span class="s0">&lt;/a&gt; </span><span class="s1">to the </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftputil.FTPHost</span><span class="s0">&lt;/tt&gt;</span>
<span class="s1">constructor, ftputil will use latin-1 encoding for the paths. This is</span>
<span class="s1">the same value as in earlier ftputil versions in combination with</span>
<span class="s1">Python 3.8 and earlier.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">Summary:</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;ul </span><span class="s2">class</span><span class="s3">=&quot;simple&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;li&gt;</span><span class="s1">If possible, use only ASCII characters in paths.</span><span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;</span><span class="s1">If possible, pass paths to ftputil as </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">str</span><span class="s0">&lt;/tt&gt;</span><span class="s1">, not </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">bytes</span><span class="s0">&lt;/tt&gt;</span><span class="s1">.</span><span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;</span><span class="s1">If you use a custom session factory, the session instances created</span>
<span class="s1">by the factory must have an </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">encoding</span><span class="s0">&lt;/tt&gt; </span><span class="s1">attribute with the name of</span>
<span class="s1">the path encoding to use. If your session instances don't have an</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">encoding</span><span class="s0">&lt;/tt&gt; </span><span class="s1">attribute, ftputil raises a </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">NoEncodingError</span><span class="s0">&lt;/tt&gt; </span><span class="s1">when</span>
<span class="s1">the session is created.</span><span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;/ul&gt;</span>
<span class="s0">&lt;/div&gt;</span>
<span class="s0">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;section&quot; </span><span class="s2">id</span><span class="s3">=&quot;hidden-files-and-directories&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;h2&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;toc-backref&quot; </span><span class="s2">href</span><span class="s3">=&quot;#id12&quot;</span><span class="s0">&gt;</span><span class="s1">Hidden files and directories</span><span class="s0">&lt;/a&gt;&lt;/h2&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">Whether ftputil sees </span><span class="s4">&amp;quot;</span><span class="s1">hidden</span><span class="s4">&amp;quot; </span><span class="s1">files and directories (usually files or</span>
<span class="s1">directories whose names start with a dot) depends on the FTP server</span>
<span class="s1">configuration. By default, ftputil does </span><span class="s0">&lt;em&gt;</span><span class="s1">not</span><span class="s0">&lt;/em&gt; </span><span class="s1">use the </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;&lt;span </span><span class="s2">class</span><span class="s3">=&quot;pre&quot;</span><span class="s0">&gt;</span><span class="s1">-a</span><span class="s0">&lt;/span&gt;&lt;/tt&gt; </span><span class="s1">option in</span>
<span class="s1">the FTP </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">LIST</span><span class="s0">&lt;/tt&gt; </span><span class="s1">command to find hidden files.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">To tell the server to list hidden directories and files, set</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">FTPHost.use_list_a_option</span><span class="s0">&lt;/tt&gt; </span><span class="s1">to </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">True</span><span class="s0">&lt;/tt&gt;</span><span class="s1">:</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;pre </span><span class="s2">class</span><span class="s3">=&quot;literal-block&quot;</span><span class="s0">&gt;</span>
<span class="s1">ftp_host = ftputil.FTPHost(server, user, password, account,</span>
                           <span class="s1">session_factory=ftplib.FTP)</span>
<span class="s1">ftp_host.use_list_a_option = True</span>
<span class="s0">&lt;/pre&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">Caveats:</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;ul </span><span class="s2">class</span><span class="s3">=&quot;simple&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;li&gt;</span><span class="s1">If the server doesn't understand the </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;&lt;span </span><span class="s2">class</span><span class="s3">=&quot;pre&quot;</span><span class="s0">&gt;</span><span class="s1">-a</span><span class="s0">&lt;/span&gt;&lt;/tt&gt; </span><span class="s1">option at all, the</span>
<span class="s1">server may interpret </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;&lt;span </span><span class="s2">class</span><span class="s3">=&quot;pre&quot;</span><span class="s0">&gt;</span><span class="s1">-a</span><span class="s0">&lt;/span&gt;&lt;/tt&gt; </span><span class="s1">as the name of a file or directory,</span>
<span class="s1">which can result in odd behavior. Therefore, use </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;&lt;span </span><span class="s2">class</span><span class="s3">=&quot;pre&quot;</span><span class="s0">&gt;</span><span class="s1">-a</span><span class="s0">&lt;/span&gt;&lt;/tt&gt; </span><span class="s1">only if</span>
<span class="s1">you're sure the server you're talking to supports it. Another</span>
<span class="s1">approach is to have test code for </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;&lt;span </span><span class="s2">class</span><span class="s3">=&quot;pre&quot;</span><span class="s0">&gt;</span><span class="s1">-a</span><span class="s0">&lt;/span&gt;&lt;/tt&gt; </span><span class="s1">support and fall back to</span>
<span class="s1">not using the option.</span><span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;</span><span class="s1">Even if the server knows about the </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;&lt;span </span><span class="s2">class</span><span class="s3">=&quot;pre&quot;</span><span class="s0">&gt;</span><span class="s1">-a</span><span class="s0">&lt;/span&gt;&lt;/tt&gt; </span><span class="s1">option, the server may</span>
<span class="s1">be configured to ignore it.</span><span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;/ul&gt;</span>
<span class="s0">&lt;/div&gt;</span>
<span class="s0">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;section&quot; </span><span class="s2">id</span><span class="s3">=&quot;ftphost-attributes-and-methods&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;h2&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;toc-backref&quot; </span><span class="s2">href</span><span class="s3">=&quot;#id13&quot;</span><span class="s0">&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">FTPHost</span><span class="s0">&lt;/tt&gt; </span><span class="s1">attributes and methods</span><span class="s0">&lt;/a&gt;&lt;/h2&gt;</span>
<span class="s0">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;section&quot; </span><span class="s2">id</span><span class="s3">=&quot;attributes&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;h3&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;toc-backref&quot; </span><span class="s2">href</span><span class="s3">=&quot;#id14&quot;</span><span class="s0">&gt;</span><span class="s1">Attributes</span><span class="s0">&lt;/a&gt;&lt;/h3&gt;</span>
<span class="s0">&lt;ul&gt;</span>
<span class="s0">&lt;li&gt;&lt;p </span><span class="s2">class</span><span class="s3">=&quot;first&quot;</span><span class="s0">&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">curdir</span><span class="s0">&lt;/tt&gt;</span><span class="s1">, </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">pardir</span><span class="s0">&lt;/tt&gt;</span><span class="s1">, </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">sep</span><span class="s0">&lt;/tt&gt;&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">are strings which denote the current and the parent directory on the</span>
<span class="s1">remote server. </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">sep</span><span class="s0">&lt;/tt&gt; </span><span class="s1">holds the path separator. Though </span><span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference external&quot; </span><span class="s2">href</span><span class="s3">=&quot;https://www.ietf.org/rfc/rfc959.txt&quot;</span><span class="s0">&gt;</span><span class="s1">RFC 959</span><span class="s0">&lt;/a&gt;</span>
<span class="s1">(File Transfer Protocol) notes that these values may depend on the</span>
<span class="s1">FTP server implementation, the Unix variants seem to work well in</span>
<span class="s1">practice, even for non-Unix servers.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">Nevertheless, it's recommended that you don't hardcode these values</span>
<span class="s1">for remote paths, but use </span><span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#ftphost-path&quot;</span><span class="s0">&gt;</span><span class="s1">FTPHost.path</span><span class="s0">&lt;/a&gt; </span><span class="s1">as you would use</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">os.path</span><span class="s0">&lt;/tt&gt; </span><span class="s1">to write platform-independent Python code for local</span>
<span class="s1">filesystems. Keep in mind that most, </span><span class="s0">&lt;em&gt;</span><span class="s1">but not all</span><span class="s0">&lt;/em&gt;</span><span class="s1">, arguments of</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">FTPHost</span><span class="s0">&lt;/tt&gt; </span><span class="s1">methods refer to remote directories or files. For</span>
<span class="s1">example, in </span><span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#uploading-and-downloading-files&quot;</span><span class="s0">&gt;</span><span class="s1">FTPHost.upload</span><span class="s0">&lt;/a&gt;</span><span class="s1">, the first argument is a local</span>
<span class="s1">path and the second a remote path. Both of these should use their</span>
<span class="s1">respective path separators.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;/ul&gt;</span>
<span class="s0">&lt;/div&gt;</span>
<span class="s0">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;section&quot; </span><span class="s2">id</span><span class="s3">=&quot;remote-file-system-navigation&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;h3&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;toc-backref&quot; </span><span class="s2">href</span><span class="s3">=&quot;#id15&quot;</span><span class="s0">&gt;</span><span class="s1">Remote file system navigation</span><span class="s0">&lt;/a&gt;&lt;/h3&gt;</span>
<span class="s0">&lt;ul&gt;</span>
<span class="s0">&lt;li&gt;&lt;p </span><span class="s2">class</span><span class="s3">=&quot;first&quot;</span><span class="s0">&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">getcwd()</span><span class="s0">&lt;/tt&gt;&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">returns the absolute current directory on the remote host. This</span>
<span class="s1">method works like </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">os.getcwd</span><span class="s0">&lt;/tt&gt;</span><span class="s1">.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;p </span><span class="s2">class</span><span class="s3">=&quot;first&quot;</span><span class="s0">&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">chdir(directory)</span><span class="s0">&lt;/tt&gt;&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">sets the current directory on the FTP server. This resembles</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">os.chdir</span><span class="s0">&lt;/tt&gt;</span><span class="s1">, as you may have expected.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;/ul&gt;</span>
<span class="s0">&lt;/div&gt;</span>
<span class="s0">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;section&quot; </span><span class="s2">id</span><span class="s3">=&quot;uploading-and-downloading-files&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;span </span><span class="s2">id</span><span class="s3">=&quot;callback-function&quot;</span><span class="s0">&gt;&lt;/span&gt;&lt;h3&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;toc-backref&quot; </span><span class="s2">href</span><span class="s3">=&quot;#id16&quot;</span><span class="s0">&gt;</span><span class="s1">Uploading and downloading files</span><span class="s0">&lt;/a&gt;&lt;/h3&gt;</span>
<span class="s0">&lt;ul&gt;</span>
<span class="s0">&lt;li&gt;&lt;p </span><span class="s2">class</span><span class="s3">=&quot;first&quot;</span><span class="s0">&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">upload(source, target, callback=None)</span><span class="s0">&lt;/tt&gt;&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">copies a local source file (given by a filename, i. e. a string)</span>
<span class="s1">to the remote host under the name target. Both </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">source</span><span class="s0">&lt;/tt&gt; </span><span class="s1">and</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">target</span><span class="s0">&lt;/tt&gt; </span><span class="s1">may be absolute paths or relative to their corresponding</span>
<span class="s1">current directory (on the local or the remote host, respectively).</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">The file content is always transferred in binary mode.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">The callback, if given, will be invoked for each transferred chunk</span>
<span class="s1">of data:</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;pre </span><span class="s2">class</span><span class="s3">=&quot;literal-block&quot;</span><span class="s0">&gt;</span>
<span class="s1">callback(chunk)</span>
<span class="s0">&lt;/pre&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">where </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">chunk</span><span class="s0">&lt;/tt&gt; </span><span class="s1">is a bytestring. An example usage of a callback</span>
<span class="s1">method is to display a progress indicator.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;p </span><span class="s2">class</span><span class="s3">=&quot;first&quot;</span><span class="s0">&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">download(source, target, callback=None)</span><span class="s0">&lt;/tt&gt;&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">performs a download from the remote source file to a local target</span>
<span class="s1">file. Both </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">source</span><span class="s0">&lt;/tt&gt; </span><span class="s1">and </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">target</span><span class="s0">&lt;/tt&gt; </span><span class="s1">are strings. See the</span>
<span class="s1">description of </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">upload</span><span class="s0">&lt;/tt&gt; </span><span class="s1">for more details.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;/ul&gt;</span>
<span class="s0">&lt;ul </span><span class="s2">id</span><span class="s3">=&quot;upload-if-newer&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;li&gt;&lt;p </span><span class="s2">class</span><span class="s3">=&quot;first&quot;</span><span class="s0">&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">upload_if_newer(source, target, callback=None)</span><span class="s0">&lt;/tt&gt;&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">is similar to the </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">upload</span><span class="s0">&lt;/tt&gt; </span><span class="s1">method. The only difference is that the</span>
<span class="s1">upload is only invoked if the time of the last modification for the</span>
<span class="s1">source file is more recent than that of the target file or the</span>
<span class="s1">target doesn't exist at all. The check for the last modification</span>
<span class="s1">time considers the precision of the timestamps and transfers a file</span>
<span class="s4">&amp;quot;</span><span class="s1">if in doubt</span><span class="s4">&amp;quot;</span><span class="s1">. Consequently the code</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;pre </span><span class="s2">class</span><span class="s3">=&quot;literal-block&quot;</span><span class="s0">&gt;</span>
<span class="s1">ftp_host.upload_if_newer(</span><span class="s4">&amp;quot;</span><span class="s1">source_file</span><span class="s4">&amp;quot;</span><span class="s1">, </span><span class="s4">&amp;quot;</span><span class="s1">target_file</span><span class="s4">&amp;quot;</span><span class="s1">)</span>
<span class="s1">time.sleep(10)</span>
<span class="s1">ftp_host.upload_if_newer(</span><span class="s4">&amp;quot;</span><span class="s1">source_file</span><span class="s4">&amp;quot;</span><span class="s1">, </span><span class="s4">&amp;quot;</span><span class="s1">target_file</span><span class="s4">&amp;quot;</span><span class="s1">)</span>
<span class="s0">&lt;/pre&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">might upload the file again if the timestamp of the target file is</span>
<span class="s1">precise up to a minute, which is typically the case because the</span>
<span class="s1">remote datetime is determined by parsing a directory listing from</span>
<span class="s1">the server. To avoid unnecessary transfers, wait at least a minute</span>
<span class="s1">between calls of </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">upload_if_newer</span><span class="s0">&lt;/tt&gt; </span><span class="s1">for the same file. If it still</span>
<span class="s1">seems that a file is uploaded unnecessarily (or not when it should),</span>
<span class="s1">read the subsection on </span><span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#time-shift&quot;</span><span class="s0">&gt;</span><span class="s1">time shift</span><span class="s0">&lt;/a&gt; </span><span class="s1">settings.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">If an upload actually happened, the return value of</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">upload_if_newer</span><span class="s0">&lt;/tt&gt; </span><span class="s1">is a </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">True</span><span class="s0">&lt;/tt&gt;</span><span class="s1">, else </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">False</span><span class="s0">&lt;/tt&gt;</span><span class="s1">.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">Note that the method only checks the existence and/or the</span>
<span class="s1">modification time of the source and target file; it doesn't</span>
<span class="s1">compare any other file properties, say, the file size.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">This also means that if a transfer is interrupted, the remote file</span>
<span class="s1">will have a newer modification time than the local file, and thus</span>
<span class="s1">the transfer won't be repeated if </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">upload_if_newer</span><span class="s0">&lt;/tt&gt; </span><span class="s1">is used a</span>
<span class="s1">second time. There are at least two possibilities after a failed</span>
<span class="s1">upload:</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;ul </span><span class="s2">class</span><span class="s3">=&quot;simple&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;li&gt;</span><span class="s1">use </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">upload</span><span class="s0">&lt;/tt&gt; </span><span class="s1">instead of </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">upload_if_newer</span><span class="s0">&lt;/tt&gt;</span><span class="s1">, or</span><span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;</span><span class="s1">remove the incomplete target file with </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">FTPHost.remove</span><span class="s0">&lt;/tt&gt;</span><span class="s1">, then</span>
<span class="s1">use </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">upload</span><span class="s0">&lt;/tt&gt; </span><span class="s1">or </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">upload_if_newer</span><span class="s0">&lt;/tt&gt; </span><span class="s1">to transfer it again.</span><span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;/ul&gt;</span>
<span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;/ul&gt;</span>
<span class="s0">&lt;ul </span><span class="s2">id</span><span class="s3">=&quot;download-if-newer&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;li&gt;&lt;p </span><span class="s2">class</span><span class="s3">=&quot;first&quot;</span><span class="s0">&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">download_if_newer(source, target, callback=None)</span><span class="s0">&lt;/tt&gt;&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">corresponds to </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">upload_if_newer</span><span class="s0">&lt;/tt&gt; </span><span class="s1">but performs a download from the</span>
<span class="s1">server to the local host. Read the descriptions of download and</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">upload_if_newer</span><span class="s0">&lt;/tt&gt; </span><span class="s1">for more information. If a download actually</span>
<span class="s1">happened, the return value is </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">True</span><span class="s0">&lt;/tt&gt;</span><span class="s1">, else </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">False</span><span class="s0">&lt;/tt&gt;</span><span class="s1">.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;/ul&gt;</span>
<span class="s0">&lt;/div&gt;</span>
<span class="s0">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;section&quot; </span><span class="s2">id</span><span class="s3">=&quot;id2&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;span </span><span class="s2">id</span><span class="s3">=&quot;time-zone-correction&quot;</span><span class="s0">&gt;&lt;/span&gt;&lt;span </span><span class="s2">id</span><span class="s3">=&quot;time-shift&quot;</span><span class="s0">&gt;&lt;/span&gt;&lt;h3&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;toc-backref&quot; </span><span class="s2">href</span><span class="s3">=&quot;#id17&quot;</span><span class="s0">&gt;</span><span class="s1">Time zone correction</span><span class="s0">&lt;/a&gt;&lt;/h3&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">For </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">upload_if_newer</span><span class="s0">&lt;/tt&gt; </span><span class="s1">and </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">download_if_newer</span><span class="s0">&lt;/tt&gt; </span><span class="s1">to work correctly,</span>
<span class="s1">the time zone of the server must be taken into account. By default,</span>
<span class="s1">ftputil assumes that the timestamps in server listings are in </span><span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference external&quot; </span><span class="s2">href</span><span class="s3">=&quot;https://en.wikipedia.org/wiki/Utc&quot;</span><span class="s0">&gt;</span><span class="s1">UTC</span><span class="s0">&lt;/a&gt;</span><span class="s1">.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;ul </span><span class="s2">id</span><span class="s3">=&quot;set-time-shift&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;li&gt;&lt;p </span><span class="s2">class</span><span class="s3">=&quot;first&quot;</span><span class="s0">&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">set_time_shift(time_shift)</span><span class="s0">&lt;/tt&gt;&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">sets the so-called time shift value, measured in seconds. The time</span>
<span class="s1">shift here is defined as the difference between the time used in</span>
<span class="s1">server listings and UTC.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;pre </span><span class="s2">class</span><span class="s3">=&quot;literal-block&quot;</span><span class="s0">&gt;</span>
<span class="s1">time_shift = server_time - utc_time</span>
<span class="s0">&lt;/pre&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">For example, a server in Berlin/Germany set to the local time</span>
<span class="s1">(currently UTC+03:00), would require a time shift value of 3 *</span>
<span class="s1">3600.0 = 10800.0 seconds to be handled correctly by ftputil's</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">upload_if_newer</span><span class="s0">&lt;/tt&gt; </span><span class="s1">and </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">download_if_newer</span><span class="s0">&lt;/tt&gt;</span><span class="s1">, as well as the</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">stat</span><span class="s0">&lt;/tt&gt; </span><span class="s1">and </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">lstat</span><span class="s0">&lt;/tt&gt; </span><span class="s1">calls.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">Note that servers don't necessarily send their file system listings</span>
<span class="s1">in their local time zone. Some use UTC, which actually makes sense</span>
<span class="s1">because UTC doesn't lead to an ambiguity when there's a switch back</span>
<span class="s1">from the daylight saving time to the </span><span class="s4">&amp;quot;</span><span class="s1">normal</span><span class="s4">&amp;quot; </span><span class="s1">time of the server</span>
<span class="s1">location.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">If the time shift value is invalid, for example its absolute value</span>
<span class="s1">is larger than 24 hours, a </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">TimeShiftError</span><span class="s0">&lt;/tt&gt; </span><span class="s1">is raised.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;admonition note&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;p </span><span class="s2">class</span><span class="s3">=&quot;first admonition-title&quot;</span><span class="s0">&gt;</span><span class="s1">Note</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">Versions of ftputil before 4.0.0 used a different definition of</span>
<span class="s4">&amp;quot;</span><span class="s1">time shift</span><span class="s4">&amp;quot;</span><span class="s1">, server_time - local_client_time.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p </span><span class="s2">class</span><span class="s3">=&quot;last&quot;</span><span class="s0">&gt;</span><span class="s1">This had the advantage that the default of 0.0 would be correct</span>
<span class="s0">&lt;em&gt;</span><span class="s1">if</span><span class="s0">&lt;/em&gt; </span><span class="s1">the server was set to the same time zone as the client</span>
<span class="s1">where ftputil runs. On the other hand, this approach meant that</span>
<span class="s1">the time shift depended on </span><span class="s0">&lt;em&gt;</span><span class="s1">two</span><span class="s0">&lt;/em&gt; </span><span class="s1">time zones, not only the one</span>
<span class="s1">used on the server side. This could be confusing if server</span>
<span class="s1">and client </span><span class="s0">&lt;em&gt;</span><span class="s1">didn't</span><span class="s0">&lt;/em&gt; </span><span class="s1">use the same time zone.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/div&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">See also </span><span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#synchronize-times&quot;</span><span class="s0">&gt;</span><span class="s1">synchronize_times</span><span class="s0">&lt;/a&gt; </span><span class="s1">for a way to set the time shift with a</span>
<span class="s1">simple method call. If you can't use </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">synchronize_times</span><span class="s0">&lt;/tt&gt; &lt;em&gt;</span><span class="s1">and</span><span class="s0">&lt;/em&gt; </span><span class="s1">the</span>
<span class="s1">server uses the same time zone as the client, you can set the time</span>
<span class="s1">shift value with</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;pre </span><span class="s2">class</span><span class="s3">=&quot;literal-block&quot;</span><span class="s0">&gt;</span>
<span class="s1">set_time_shift(</span>
  <span class="s1">round( (datetime.datetime.now() - datetime.datetime.utcnow()).seconds, -2 )</span>
<span class="s1">)</span>
<span class="s0">&lt;/pre&gt;</span>
<span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;p </span><span class="s2">class</span><span class="s3">=&quot;first&quot;</span><span class="s0">&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">time_shift()</span><span class="s0">&lt;/tt&gt;&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">returns the currently-set time shift value. See </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">set_time_shift</span><span class="s0">&lt;/tt&gt;</span>
<span class="s1">above for its definition.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;/ul&gt;</span>
<span class="s0">&lt;ul </span><span class="s2">id</span><span class="s3">=&quot;synchronize-times&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;li&gt;&lt;p </span><span class="s2">class</span><span class="s3">=&quot;first&quot;</span><span class="s0">&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">synchronize_times()</span><span class="s0">&lt;/tt&gt;&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">synchronizes the local times of the server and the client, so that</span>
<span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#upload-if-newer&quot;</span><span class="s0">&gt;</span><span class="s1">upload_if_newer</span><span class="s0">&lt;/a&gt; </span><span class="s1">and </span><span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#download-if-newer&quot;</span><span class="s0">&gt;</span><span class="s1">download_if_newer</span><span class="s0">&lt;/a&gt; </span><span class="s1">work as expected, even</span>
<span class="s1">if the client and the server use different time zones. For this</span>
<span class="s1">to work, </span><span class="s0">&lt;em&gt;</span><span class="s1">all</span><span class="s0">&lt;/em&gt; </span><span class="s1">of the following conditions must be true:</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;ul </span><span class="s2">class</span><span class="s3">=&quot;simple&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;li&gt;</span><span class="s1">The connection between server and client is established.</span><span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;</span><span class="s1">The client has write access to the directory that is current when</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">synchronize_times</span><span class="s0">&lt;/tt&gt; </span><span class="s1">is called.</span><span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;/ul&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">If you can't fulfill these conditions, you can nevertheless set the</span>
<span class="s1">time shift value explicitly with </span><span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#set-time-shift&quot;</span><span class="s0">&gt;</span><span class="s1">set_time_shift</span><span class="s0">&lt;/a&gt;</span><span class="s1">. Trying to call</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">synchronize_times</span><span class="s0">&lt;/tt&gt; </span><span class="s1">if the above conditions aren't met results in</span>
<span class="s1">a </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">TimeShiftError</span><span class="s0">&lt;/tt&gt; </span><span class="s1">exception.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;/ul&gt;</span>
<span class="s0">&lt;/div&gt;</span>
<span class="s0">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;section&quot; </span><span class="s2">id</span><span class="s3">=&quot;creating-and-removing-directories&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;h3&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;toc-backref&quot; </span><span class="s2">href</span><span class="s3">=&quot;#id18&quot;</span><span class="s0">&gt;</span><span class="s1">Creating and removing directories</span><span class="s0">&lt;/a&gt;&lt;/h3&gt;</span>
<span class="s0">&lt;ul&gt;</span>
<span class="s0">&lt;li&gt;&lt;p </span><span class="s2">class</span><span class="s3">=&quot;first&quot;</span><span class="s0">&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">mkdir(path, [mode])</span><span class="s0">&lt;/tt&gt;&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">makes the given directory on the remote host. This does </span><span class="s0">&lt;em&gt;</span><span class="s1">not</span><span class="s0">&lt;/em&gt;</span>
<span class="s1">construct </span><span class="s4">&amp;quot;</span><span class="s1">intermediate</span><span class="s4">&amp;quot; </span><span class="s1">directories that don't already exist. The</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">mode</span><span class="s0">&lt;/tt&gt; </span><span class="s1">parameter is ignored; this is for compatibility with</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">os.mkdir</span><span class="s0">&lt;/tt&gt; </span><span class="s1">if an </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">FTPHost</span><span class="s0">&lt;/tt&gt; </span><span class="s1">object is passed into a function</span>
<span class="s1">instead of the </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">os</span><span class="s0">&lt;/tt&gt; </span><span class="s1">module. See the explanation in the subsection</span>
<span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#exception-hierarchy&quot;</span><span class="s0">&gt;</span><span class="s1">Exception hierarchy</span><span class="s0">&lt;/a&gt;</span><span class="s1">.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;p </span><span class="s2">class</span><span class="s3">=&quot;first&quot;</span><span class="s0">&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">makedirs(path, [mode], exist_ok=False)</span><span class="s0">&lt;/tt&gt;&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">works similar to </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">mkdir</span><span class="s0">&lt;/tt&gt; </span><span class="s1">(see above), but also makes intermediate</span>
<span class="s1">directories like </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">os.makedirs</span><span class="s0">&lt;/tt&gt;</span><span class="s1">. The </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">mode</span><span class="s0">&lt;/tt&gt; </span><span class="s1">parameter is only</span>
<span class="s1">there for compatibility with </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">os.makedirs</span><span class="s0">&lt;/tt&gt; </span><span class="s1">and is ignored.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">exist_ok</span><span class="s0">&lt;/tt&gt; </span><span class="s1">controls whether the existence of any directory but the</span>
<span class="s1">last in the </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">path</span><span class="s0">&lt;/tt&gt; </span><span class="s1">should be considered an error. If the default</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">False</span><span class="s0">&lt;/tt&gt; </span><span class="s1">is used or passed to </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">makedirs</span><span class="s0">&lt;/tt&gt;</span><span class="s1">, ftputil will raise a</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">PermanentError</span><span class="s0">&lt;/tt&gt; </span><span class="s1">if any directory but the last already exists.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;p </span><span class="s2">class</span><span class="s3">=&quot;first&quot;</span><span class="s0">&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">rmdir(path)</span><span class="s0">&lt;/tt&gt;&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">removes the given remote directory. If it's not empty, raise</span>
<span class="s1">a </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">PermanentError</span><span class="s0">&lt;/tt&gt;</span><span class="s1">.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;p </span><span class="s2">class</span><span class="s3">=&quot;first&quot;</span><span class="s0">&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">rmtree(path, ignore_errors=False, onerror=None)</span><span class="s0">&lt;/tt&gt;&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">removes the given remote, possibly non-empty, directory tree.</span>
<span class="s1">The interface of this method is rather complex, in favor of</span>
<span class="s1">compatibility with </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">shutil.rmtree</span><span class="s0">&lt;/tt&gt;</span><span class="s1">.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">If </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ignore_errors</span><span class="s0">&lt;/tt&gt; </span><span class="s1">is set to a true value, errors are ignored.</span>
<span class="s1">If </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ignore_errors</span><span class="s0">&lt;/tt&gt; </span><span class="s1">is a false value </span><span class="s0">&lt;em&gt;</span><span class="s1">and</span><span class="s0">&lt;/em&gt; &lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">onerror</span><span class="s0">&lt;/tt&gt; </span><span class="s1">isn't</span>
<span class="s1">set, all exceptions occurring during the tree iteration and</span>
<span class="s1">processing are raised. These exceptions are all of type</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">PermanentError</span><span class="s0">&lt;/tt&gt;</span><span class="s1">.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">To distinguish between different kinds of errors, pass in a callable</span>
<span class="s1">for </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">onerror</span><span class="s0">&lt;/tt&gt;</span><span class="s1">. This callable must accept three arguments:</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">func</span><span class="s0">&lt;/tt&gt;</span><span class="s1">, </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">path</span><span class="s0">&lt;/tt&gt; </span><span class="s1">and </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">exc_info</span><span class="s0">&lt;/tt&gt;</span><span class="s1">. </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">func</span><span class="s0">&lt;/tt&gt; </span><span class="s1">is a bound method</span>
<span class="s1">object, </span><span class="s0">&lt;em&gt;</span><span class="s1">for example</span><span class="s0">&lt;/em&gt; &lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">your_host_object.listdir</span><span class="s0">&lt;/tt&gt;</span><span class="s1">. </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">path</span><span class="s0">&lt;/tt&gt; </span><span class="s1">is the</span>
<span class="s1">path that was the recent argument of the respective method</span>
<span class="s1">(</span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">listdir</span><span class="s0">&lt;/tt&gt;</span><span class="s1">, </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">remove</span><span class="s0">&lt;/tt&gt;</span><span class="s1">, </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">rmdir</span><span class="s0">&lt;/tt&gt;</span><span class="s1">). </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">exc_info</span><span class="s0">&lt;/tt&gt; </span><span class="s1">is the exception</span>
<span class="s1">info as it is gotten from </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">sys.exc_info</span><span class="s0">&lt;/tt&gt;</span><span class="s1">.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">The code of </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">rmtree</span><span class="s0">&lt;/tt&gt; </span><span class="s1">is taken from Python's </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">shutil</span><span class="s0">&lt;/tt&gt; </span><span class="s1">module</span>
<span class="s1">and adapted for </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftputil</span><span class="s0">&lt;/tt&gt;</span><span class="s1">.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;/ul&gt;</span>
<span class="s0">&lt;/div&gt;</span>
<span class="s0">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;section&quot; </span><span class="s2">id</span><span class="s3">=&quot;removing-files-and-links&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;h3&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;toc-backref&quot; </span><span class="s2">href</span><span class="s3">=&quot;#id19&quot;</span><span class="s0">&gt;</span><span class="s1">Removing files and links</span><span class="s0">&lt;/a&gt;&lt;/h3&gt;</span>
<span class="s0">&lt;ul&gt;</span>
<span class="s0">&lt;li&gt;&lt;p </span><span class="s2">class</span><span class="s3">=&quot;first&quot;</span><span class="s0">&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">remove(path)</span><span class="s0">&lt;/tt&gt;&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">removes a file or link on the remote host, similar to </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">os.remove</span><span class="s0">&lt;/tt&gt;</span><span class="s1">.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;p </span><span class="s2">class</span><span class="s3">=&quot;first&quot;</span><span class="s0">&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">unlink(path)</span><span class="s0">&lt;/tt&gt;&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">is an alias for </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">remove</span><span class="s0">&lt;/tt&gt;</span><span class="s1">.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;/ul&gt;</span>
<span class="s0">&lt;/div&gt;</span>
<span class="s0">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;section&quot; </span><span class="s2">id</span><span class="s3">=&quot;retrieving-information-about-directories-files-and-links&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;h3&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;toc-backref&quot; </span><span class="s2">href</span><span class="s3">=&quot;#id20&quot;</span><span class="s0">&gt;</span><span class="s1">Retrieving information about directories, files and links</span><span class="s0">&lt;/a&gt;&lt;/h3&gt;</span>
<span class="s0">&lt;ul&gt;</span>
<span class="s0">&lt;li&gt;&lt;p </span><span class="s2">class</span><span class="s3">=&quot;first&quot;</span><span class="s0">&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">listdir(path)</span><span class="s0">&lt;/tt&gt;&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">returns a list containing the names of the files and directories</span>
<span class="s1">in the given path, similar to </span><span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference external&quot; </span><span class="s2">href</span><span class="s3">=&quot;https://docs.python.org/library/os.html#os.listdir&quot;</span><span class="s0">&gt;</span><span class="s1">os.listdir</span><span class="s0">&lt;/a&gt;</span><span class="s1">. The special names</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">.</span><span class="s0">&lt;/tt&gt; </span><span class="s1">and </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">..</span><span class="s0">&lt;/tt&gt; </span><span class="s1">are not in the list.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;/ul&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">The methods </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">lstat</span><span class="s0">&lt;/tt&gt; </span><span class="s1">and </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">stat</span><span class="s0">&lt;/tt&gt; </span><span class="s1">(and some others) rely on the</span>
<span class="s1">directory listing format used by the FTP server. When connecting to a</span>
<span class="s1">host, </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">FTPHost</span><span class="s0">&lt;/tt&gt;</span><span class="s1">'s constructor tries to guess the right format, which</span>
<span class="s1">succeeds in most cases. However, if you get strange results or</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ParserError</span><span class="s0">&lt;/tt&gt; </span><span class="s1">exceptions by a mere </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">lstat</span><span class="s0">&lt;/tt&gt; </span><span class="s1">call, please </span><span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference external&quot; </span><span class="s2">href</span><span class="s3">=&quot;https://ftputil.sschwarzer.net/issuetrackernotes&quot;</span><span class="s0">&gt;</span><span class="s1">enter a</span>
<span class="s1">ticket</span><span class="s0">&lt;/a&gt;</span><span class="s1">.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">If </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">lstat</span><span class="s0">&lt;/tt&gt; </span><span class="s1">or </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">stat</span><span class="s0">&lt;/tt&gt; </span><span class="s1">give wrong modification dates or times, look</span>
<span class="s1">at the methods that deal with time zone differences (</span><span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#time-zone-correction&quot;</span><span class="s0">&gt;</span><span class="s1">time zone</span>
<span class="s1">correction</span><span class="s0">&lt;/a&gt;</span><span class="s1">).</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;ul </span><span class="s2">id</span><span class="s3">=&quot;ftphost-lstat&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;li&gt;&lt;p </span><span class="s2">class</span><span class="s3">=&quot;first&quot;</span><span class="s0">&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">lstat(path)</span><span class="s0">&lt;/tt&gt;&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">returns an object similar to that from </span><span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference external&quot; </span><span class="s2">href</span><span class="s3">=&quot;https://docs.python.org/library/os.html#os.lstat&quot;</span><span class="s0">&gt;</span><span class="s1">os.lstat</span><span class="s0">&lt;/a&gt;</span><span class="s1">. This is a kind</span>
<span class="s1">of tuple with additional attributes; see the documentation of the</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">os</span><span class="s0">&lt;/tt&gt; </span><span class="s1">module for details.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">The result is derived by parsing the output of a </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">LIST</span><span class="s0">&lt;/tt&gt; </span><span class="s1">command on</span>
<span class="s1">the server. Therefore, the result from </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">FTPHost.lstat</span><span class="s0">&lt;/tt&gt; </span><span class="s1">can not</span>
<span class="s1">contain more information than the received text. In particular:</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;ul&gt;</span>
<span class="s0">&lt;li&gt;&lt;p </span><span class="s2">class</span><span class="s3">=&quot;first&quot;</span><span class="s0">&gt;</span><span class="s1">User and group ids can only be determined as strings, not as</span>
<span class="s1">numbers, and that only if the server supplies them. This is</span>
<span class="s1">usually the case with Unix servers but maybe not for other FTP</span>
<span class="s1">servers.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;p </span><span class="s2">class</span><span class="s3">=&quot;first&quot;</span><span class="s0">&gt;</span><span class="s1">Values for the time of the last modification may be rough,</span>
<span class="s1">depending on the information from the server. For timestamps</span>
<span class="s1">older than a year, this usually means that the precision of the</span>
<span class="s1">modification timestamp value is not better than a day. For newer</span>
<span class="s1">files, the information may be accurate to a minute.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">If the time of the last modification is before the epoch (usually</span>
<span class="s1">1970-01-01 UTC), set the time of the last modification to 0.0.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;p </span><span class="s2">class</span><span class="s3">=&quot;first&quot;</span><span class="s0">&gt;</span><span class="s1">Links can only be recognized on servers that provide this</span>
<span class="s1">information in the </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">LIST</span><span class="s0">&lt;/tt&gt; </span><span class="s1">output.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;dl </span><span class="s2">class</span><span class="s3">=&quot;first docutils&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;dt&gt;</span><span class="s1">Stat attributes that can't be determined at all are set to</span><span class="s0">&lt;/dt&gt;</span>
<span class="s0">&lt;dd&gt;&lt;p </span><span class="s2">class</span><span class="s3">=&quot;first last&quot;</span><span class="s0">&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">None</span><span class="s0">&lt;/tt&gt;</span><span class="s1">. For example, a line of a directory listing may not</span>
<span class="s1">contain the date/time of a directory's last modification.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/dd&gt;</span>
<span class="s0">&lt;/dl&gt;</span>
<span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;p </span><span class="s2">class</span><span class="s3">=&quot;first&quot;</span><span class="s0">&gt;</span><span class="s1">There's a special problem with stat'ing the root directory.</span>
<span class="s1">(Stat'ing things </span><span class="s0">&lt;em&gt;</span><span class="s1">in</span><span class="s0">&lt;/em&gt; </span><span class="s1">the root directory is fine though.) In</span>
<span class="s1">this case, a </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">RootDirError</span><span class="s0">&lt;/tt&gt; </span><span class="s1">is raised. This has to do with the</span>
<span class="s1">algorithm used by </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">(l)stat</span><span class="s0">&lt;/tt&gt;</span><span class="s1">, and I know of no approach which</span>
<span class="s1">mends this problem.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;/ul&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">Currently, </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftputil</span><span class="s0">&lt;/tt&gt; </span><span class="s1">recognizes the common Unix-style and</span>
<span class="s1">Microsoft/DOS-style directory formats. If you need to parse output</span>
<span class="s1">from another server type, please write to the </span><span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference external&quot; </span><span class="s2">href</span><span class="s3">=&quot;https://ftputil.sschwarzer.net/mailinglist&quot;</span><span class="s0">&gt;</span><span class="s1">ftputil mailing</span>
<span class="s1">list</span><span class="s0">&lt;/a&gt;</span><span class="s1">. You may consider </span><span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#writing-directory-parsers&quot;</span><span class="s0">&gt;</span><span class="s1">writing your own parser</span><span class="s0">&lt;/a&gt;</span><span class="s1">.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;/ul&gt;</span>
<span class="s0">&lt;ul </span><span class="s2">id</span><span class="s3">=&quot;ftphost-stat&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;li&gt;&lt;p </span><span class="s2">class</span><span class="s3">=&quot;first&quot;</span><span class="s0">&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">stat(path)</span><span class="s0">&lt;/tt&gt;&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">returns </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">stat</span><span class="s0">&lt;/tt&gt; </span><span class="s1">information also for files which are pointed to by a</span>
<span class="s1">link. This method follows multiple links until a regular file or</span>
<span class="s1">directory is found. If an infinite link chain is encountered or the</span>
<span class="s1">target of the last link in the chain doesn't exist, a</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">PermanentError</span><span class="s0">&lt;/tt&gt; </span><span class="s1">is raised.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">The limitations of the </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">lstat</span><span class="s0">&lt;/tt&gt; </span><span class="s1">method also apply to </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">stat</span><span class="s0">&lt;/tt&gt;</span><span class="s1">.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;/ul&gt;</span>
<span class="s0">&lt;p </span><span class="s2">id</span><span class="s3">=&quot;ftphost-path&quot;</span><span class="s0">&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">FTPHost</span><span class="s0">&lt;/tt&gt; </span><span class="s1">objects contain an attribute named </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">path</span><span class="s0">&lt;/tt&gt;</span><span class="s1">, similar to</span>
<span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference external&quot; </span><span class="s2">href</span><span class="s3">=&quot;https://docs.python.org/library/os.path.html&quot;</span><span class="s0">&gt;</span><span class="s1">os.path</span><span class="s0">&lt;/a&gt;</span><span class="s1">. The following methods can be applied to the remote host</span>
<span class="s1">with the same semantics as for </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">os.path</span><span class="s0">&lt;/tt&gt;</span><span class="s1">:</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;pre </span><span class="s2">class</span><span class="s3">=&quot;literal-block&quot;</span><span class="s0">&gt;</span>
<span class="s1">abspath(path)</span>
<span class="s1">basename(path)</span>
<span class="s1">commonprefix(path_list)</span>
<span class="s1">dirname(path)</span>
<span class="s1">exists(path)</span>
<span class="s1">getmtime(path)</span>
<span class="s1">getsize(path)</span>
<span class="s1">isabs(path)</span>
<span class="s1">isdir(path)</span>
<span class="s1">isfile(path)</span>
<span class="s1">islink(path)</span>
<span class="s1">join(path1, path2, ...)</span>
<span class="s1">normcase(path)</span>
<span class="s1">normpath(path)</span>
<span class="s1">split(path)</span>
<span class="s1">splitdrive(path)</span>
<span class="s1">splitext(path)</span>
<span class="s1">walk(path, func, arg)</span>
<span class="s0">&lt;/pre&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">Like Python's counterparts under </span><span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference external&quot; </span><span class="s2">href</span><span class="s3">=&quot;https://docs.python.org/library/os.path.html&quot;</span><span class="s0">&gt;</span><span class="s1">os.path</span><span class="s0">&lt;/a&gt;</span><span class="s1">, </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftputil</span><span class="s0">&lt;/tt&gt;</span><span class="s1">'s </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;&lt;span </span><span class="s2">class</span><span class="s3">=&quot;pre&quot;</span><span class="s0">&gt;</span><span class="s1">is...</span><span class="s0">&lt;/span&gt;&lt;/tt&gt;</span>
<span class="s1">methods return </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">False</span><span class="s0">&lt;/tt&gt; </span><span class="s1">if they can't find the path given by their</span>
<span class="s1">argument.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/div&gt;</span>
<span class="s0">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;section&quot; </span><span class="s2">id</span><span class="s3">=&quot;local-caching-of-file-system-information&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;h3&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;toc-backref&quot; </span><span class="s2">href</span><span class="s3">=&quot;#id21&quot;</span><span class="s0">&gt;</span><span class="s1">Local caching of file system information</span><span class="s0">&lt;/a&gt;&lt;/h3&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">Many of the above methods need access to the remote file system to</span>
<span class="s1">obtain data on directories and files. To get the most recent data,</span>
<span class="s0">&lt;em&gt;</span><span class="s1">each</span><span class="s0">&lt;/em&gt; </span><span class="s1">call to </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">lstat</span><span class="s0">&lt;/tt&gt;</span><span class="s1">, </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">stat</span><span class="s0">&lt;/tt&gt;</span><span class="s1">, </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">exists</span><span class="s0">&lt;/tt&gt;</span><span class="s1">, </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">getmtime</span><span class="s0">&lt;/tt&gt; </span><span class="s1">etc.</span>
<span class="s1">would require to fetch a directory listing from the server, which can</span>
<span class="s1">make the program </span><span class="s0">&lt;em&gt;</span><span class="s1">very</span><span class="s0">&lt;/em&gt; </span><span class="s1">slow. This effect is more pronounced for</span>
<span class="s1">operations which mostly scan the file system rather than transferring</span>
<span class="s1">file data.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">For this reason, </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftputil</span><span class="s0">&lt;/tt&gt; </span><span class="s1">by default saves the results from</span>
<span class="s1">directory listings locally and reuses those results. This reduces</span>
<span class="s1">network accesses and so speeds up the software a lot. However, since</span>
<span class="s1">data is more rarely fetched from the server, the risk of obsolete data</span>
<span class="s1">also increases. This will be discussed below.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">Caching can be controlled -- if necessary at all -- via the</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">stat_cache</span><span class="s0">&lt;/tt&gt; </span><span class="s1">object in an </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">FTPHost</span><span class="s0">&lt;/tt&gt;</span><span class="s1">'s namespace. For example,</span>
<span class="s1">after calling</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;pre </span><span class="s2">class</span><span class="s3">=&quot;literal-block&quot;</span><span class="s0">&gt;</span>
<span class="s1">ftp_host = ftputil.FTPHost(host, user, password)</span>
<span class="s0">&lt;/pre&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">the cache can be accessed as </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftp_host.stat_cache</span><span class="s0">&lt;/tt&gt;</span><span class="s1">.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">While </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftputil</span><span class="s0">&lt;/tt&gt; </span><span class="s1">usually manages the cache quite well, there are two</span>
<span class="s1">possible reasons for modifying cache parameters.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">The first is when the number of possible entries is too low. You may</span>
<span class="s1">notice that when you are processing very large directories and the</span>
<span class="s1">program becomes much slower than before. It's common for code to read</span>
<span class="s1">a directory with </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">listdir</span><span class="s0">&lt;/tt&gt; </span><span class="s1">and then process the found directories</span>
<span class="s1">and files. This can also happen implicitly by a call to</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">FTPHost.walk</span><span class="s0">&lt;/tt&gt;</span><span class="s1">. Since version 2.6 </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftputil</span><span class="s0">&lt;/tt&gt; </span><span class="s1">automatically</span>
<span class="s1">increases the cache size if directories with more entries than the</span>
<span class="s1">current maximum cache size are to be scanned. Most of the time, this</span>
<span class="s1">works fine.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">However, if you need access to stat data for several directories at</span>
<span class="s1">the same time, you may need to increase the cache explicitly. This is</span>
<span class="s1">done by the </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">resize</span><span class="s0">&lt;/tt&gt; </span><span class="s1">method:</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;pre </span><span class="s2">class</span><span class="s3">=&quot;literal-block&quot;</span><span class="s0">&gt;</span>
<span class="s1">ftp_host.stat_cache.resize(20000)</span>
<span class="s0">&lt;/pre&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">where the argument is the maximum number of </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">lstat</span><span class="s0">&lt;/tt&gt; </span><span class="s1">results to store</span>
<span class="s1">(the default is 5000, in versions before 2.6 it was 1000). Note that</span>
<span class="s1">each path on the server, e. g. </span><span class="s4">&amp;quot;</span><span class="s1">/home/schwa/some_dir</span><span class="s4">&amp;quot;</span><span class="s1">, corresponds to</span>
<span class="s1">a single cache entry. Methods like </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">exists</span><span class="s0">&lt;/tt&gt; </span><span class="s1">or </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">getmtime</span><span class="s0">&lt;/tt&gt; </span><span class="s1">all</span>
<span class="s1">derive their results from a previously fetched </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">lstat</span><span class="s0">&lt;/tt&gt; </span><span class="s1">result.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">The value 5000 above means that the cache will hold </span><span class="s0">&lt;em&gt;</span><span class="s1">at most</span><span class="s0">&lt;/em&gt; </span><span class="s1">5000</span>
<span class="s1">entries (unless increased automatically by an explicit or implicit</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">listdir</span><span class="s0">&lt;/tt&gt; </span><span class="s1">call, see above). If more are about to be stored, the</span>
<span class="s1">entries which haven't been used for the longest time will be deleted</span>
<span class="s1">to make place for newer entries.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">The second possible reason to change the cache parameters is to avoid</span>
<span class="s1">stale cache data. Caching is so effective because it reduces network</span>
<span class="s1">accesses. This can also be a disadvantage if the file system data on</span>
<span class="s1">the remote server changes after a stat result has been retrieved; the</span>
<span class="s1">client, when looking at the cached stat data, will use obsolete</span>
<span class="s1">information.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">There are two potential ways to get such out-of-date stat data. The</span>
<span class="s1">first happens when an </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">FTPHost</span><span class="s0">&lt;/tt&gt; </span><span class="s1">instance modifies a file path for</span>
<span class="s1">which it has a cache entry, e. g. by calling </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">remove</span><span class="s0">&lt;/tt&gt; </span><span class="s1">or </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">rmdir</span><span class="s0">&lt;/tt&gt;</span><span class="s1">.</span>
<span class="s1">Such changes are handled transparently; the path will be deleted from</span>
<span class="s1">the cache. A different matter are changes unknown to the </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">FTPHost</span><span class="s0">&lt;/tt&gt;</span>
<span class="s1">object which inspects its cache. Obviously, for example, these are</span>
<span class="s1">changes by programs running on the remote host. On the other hand,</span>
<span class="s1">cache inconsistencies can also occur if two </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">FTPHost</span><span class="s0">&lt;/tt&gt; </span><span class="s1">objects change</span>
<span class="s1">a file system simultaneously:</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;pre </span><span class="s2">class</span><span class="s3">=&quot;literal-block&quot;</span><span class="s0">&gt;</span>
<span class="s1">with (</span>
  <span class="s1">ftputil.FTPHost(server, user1, password1) as ftp_host1,</span>
  <span class="s1">ftputil.FTPHost(server, user1, password1) as ftp_host2</span>
<span class="s1">):</span>
    <span class="s1">stat_result1 = ftp_host1.stat(</span><span class="s4">&amp;quot;</span><span class="s1">some_file</span><span class="s4">&amp;quot;</span><span class="s1">)</span>
    <span class="s1">stat_result2 = ftp_host2.stat(</span><span class="s4">&amp;quot;</span><span class="s1">some_file</span><span class="s4">&amp;quot;</span><span class="s1">)</span>
    <span class="s1">ftp_host2.remove(</span><span class="s4">&amp;quot;</span><span class="s1">some_file</span><span class="s4">&amp;quot;</span><span class="s1">)</span>
    <span class="s1"># `ftp_host1` will still see the obsolete cache entry!</span>
    <span class="s1">print(ftp_host1.stat(</span><span class="s4">&amp;quot;</span><span class="s1">some_file</span><span class="s4">&amp;quot;</span><span class="s1">))</span>
    <span class="s1"># Will raise an exception since an `FTPHost` object</span>
    <span class="s1"># knows of its own changes.</span>
    <span class="s1">print(ftp_host2.stat(</span><span class="s4">&amp;quot;</span><span class="s1">some_file</span><span class="s4">&amp;quot;</span><span class="s1">))</span>
<span class="s0">&lt;/pre&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">At first sight, it may appear to be a good idea to have a shared cache</span>
<span class="s1">among several </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">FTPHost</span><span class="s0">&lt;/tt&gt; </span><span class="s1">objects. After some thinking, this turns out</span>
<span class="s1">to be very error-prone. For example, it won't help with different</span>
<span class="s1">processes using </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftputil</span><span class="s0">&lt;/tt&gt;</span><span class="s1">. So, if you have to deal with concurrent</span>
<span class="s1">write/read accesses to a server, you have to handle them explicitly.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">The most useful tool for this is the </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">invalidate</span><span class="s0">&lt;/tt&gt; </span><span class="s1">method. In the</span>
<span class="s1">example above, it could be used like this:</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;pre </span><span class="s2">class</span><span class="s3">=&quot;literal-block&quot;</span><span class="s0">&gt;</span>
<span class="s1">with (</span>
  <span class="s1">ftputil.FTPHost(server, user1, password1) as ftp_host1,</span>
  <span class="s1">ftputil.FTPHost(server, user1, password1) as ftp_host2</span>
<span class="s1">):</span>
    <span class="s1">stat_result1 = ftp_host1.stat(</span><span class="s4">&amp;quot;</span><span class="s1">some_file</span><span class="s4">&amp;quot;</span><span class="s1">)</span>
    <span class="s1">stat_result2 = ftp_host2.stat(</span><span class="s4">&amp;quot;</span><span class="s1">some_file</span><span class="s4">&amp;quot;</span><span class="s1">)</span>
    <span class="s1">ftp_host2.remove(</span><span class="s4">&amp;quot;</span><span class="s1">some_file</span><span class="s4">&amp;quot;</span><span class="s1">)</span>
    <span class="s1"># Invalidate using an absolute path.</span>
    <span class="s1">absolute_path = ftp_host1.path.abspath(</span>
                      <span class="s1">ftp_host1.path.join(ftp_host1.getcwd(), </span><span class="s4">&amp;quot;</span><span class="s1">some_file</span><span class="s4">&amp;quot;</span><span class="s1">))</span>
    <span class="s1">ftp_host1.stat_cache.invalidate(absolute_path)</span>
    <span class="s1"># Will now raise an exception as it should.</span>
    <span class="s1">print(ftp_host1.stat(</span><span class="s4">&amp;quot;</span><span class="s1">some_file</span><span class="s4">&amp;quot;</span><span class="s1">))</span>
    <span class="s1"># Would raise an exception since an `FTPHost` object</span>
    <span class="s1"># knows of its own changes, even without `invalidate`.</span>
    <span class="s1">print(ftp_host2.stat(</span><span class="s4">&amp;quot;</span><span class="s1">some_file</span><span class="s4">&amp;quot;</span><span class="s1">))</span>
<span class="s0">&lt;/pre&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">The method </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">invalidate</span><span class="s0">&lt;/tt&gt; </span><span class="s1">can be used on any </span><span class="s0">&lt;em&gt;</span><span class="s1">absolute</span><span class="s0">&lt;/em&gt; </span><span class="s1">path, be it a</span>
<span class="s1">directory, a file or a link.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">By default, the cache entries (if not replaced by newer ones) are</span>
<span class="s1">stored for an infinite time. That is, if you start your Python process</span>
<span class="s1">using </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftputil</span><span class="s0">&lt;/tt&gt; </span><span class="s1">and let it run for three days a stat call may still</span>
<span class="s1">access cache data that old. To avoid this, you can set the </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">max_age</span><span class="s0">&lt;/tt&gt;</span>
<span class="s1">attribute:</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;pre </span><span class="s2">class</span><span class="s3">=&quot;literal-block&quot;</span><span class="s0">&gt;</span>
<span class="s1">with ftputil.FTPHost(server, user, password) as ftp_host:</span>
    <span class="s1">ftp_host.stat_cache.max_age = 60 * 60  # = 3600 seconds</span>
<span class="s0">&lt;/pre&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">This sets the maximum age of entries in the cache to an hour. This</span>
<span class="s1">means any entry older won't be retrieved from the cache but its data</span>
<span class="s1">instead fetched again from the remote host and then again stored for</span>
<span class="s1">up to an hour. To reset </span><span class="s0">&lt;cite&gt;</span><span class="s1">max_age</span><span class="s0">&lt;/cite&gt; </span><span class="s1">to the default of unlimited age,</span>
<span class="s1">i. e. cache entries never expire, use </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">None</span><span class="s0">&lt;/tt&gt; </span><span class="s1">as value.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">If you are certain that the cache will be in the way, you can disable</span>
<span class="s1">and later re-enable it completely with </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">disable</span><span class="s0">&lt;/tt&gt; </span><span class="s1">and </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">enable</span><span class="s0">&lt;/tt&gt;</span><span class="s1">:</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;pre </span><span class="s2">class</span><span class="s3">=&quot;literal-block&quot;</span><span class="s0">&gt;</span>
<span class="s1">with ftputil.FTPHost(server, user, password) as ftp_host:</span>
    <span class="s1">ftp_host.stat_cache.disable()</span>
    <span class="s1">...</span>
    <span class="s1">ftp_host.stat_cache.enable()</span>
<span class="s0">&lt;/pre&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">During that time, the cache won't be used; all data will be fetched</span>
<span class="s1">from the network. After enabling the cache again, its entries will be</span>
<span class="s1">the same as when the cache was disabled, that is, entries won't get</span>
<span class="s1">updated with newer data during this period. Note that even when the</span>
<span class="s1">cache is disabled, the file system data in the code can become</span>
<span class="s1">inconsistent:</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;pre </span><span class="s2">class</span><span class="s3">=&quot;literal-block&quot;</span><span class="s0">&gt;</span>
<span class="s1">with ftputil.FTPHost(server, user, password) as ftp_host:</span>
    <span class="s1">ftp_host.stat_cache.disable()</span>
    <span class="s1">if ftp_host.path.exists(</span><span class="s4">&amp;quot;</span><span class="s1">some_file</span><span class="s4">&amp;quot;</span><span class="s1">):</span>
        <span class="s1">mtime = ftp_host.path.getmtime(</span><span class="s4">&amp;quot;</span><span class="s1">some_file</span><span class="s4">&amp;quot;</span><span class="s1">)</span>
<span class="s0">&lt;/pre&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">In that case, the file </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">some_file</span><span class="s0">&lt;/tt&gt; </span><span class="s1">may have been removed by another</span>
<span class="s1">process between the calls to </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">exists</span><span class="s0">&lt;/tt&gt; </span><span class="s1">and </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">getmtime</span><span class="s0">&lt;/tt&gt;</span><span class="s1">!</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/div&gt;</span>
<span class="s0">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;section&quot; </span><span class="s2">id</span><span class="s3">=&quot;iteration-over-directories&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;h3&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;toc-backref&quot; </span><span class="s2">href</span><span class="s3">=&quot;#id22&quot;</span><span class="s0">&gt;</span><span class="s1">Iteration over directories</span><span class="s0">&lt;/a&gt;&lt;/h3&gt;</span>
<span class="s0">&lt;ul </span><span class="s2">id</span><span class="s3">=&quot;ftphost-walk&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;li&gt;&lt;p </span><span class="s2">class</span><span class="s3">=&quot;first&quot;</span><span class="s0">&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">walk(top, topdown=True, onerror=None, followlinks=False)</span><span class="s0">&lt;/tt&gt;&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">iterates over a directory tree, similar to </span><span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference external&quot; </span><span class="s2">href</span><span class="s3">=&quot;https://docs.python.org/2/library/os.html#os.walk&quot;</span><span class="s0">&gt;</span><span class="s1">os.walk</span><span class="s0">&lt;/a&gt;</span><span class="s1">. Actually,</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">FTPHost.walk</span><span class="s0">&lt;/tt&gt; </span><span class="s1">uses the code from Python with just the necessary</span>
<span class="s1">modifications, so see the linked documentation.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;/ul&gt;</span>
<span class="s0">&lt;ul </span><span class="s2">id</span><span class="s3">=&quot;ftphost-path-walk&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;li&gt;&lt;p </span><span class="s2">class</span><span class="s3">=&quot;first&quot;</span><span class="s0">&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">path.walk(path, func, arg)</span><span class="s0">&lt;/tt&gt;&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">Similar to </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">os.path.walk</span><span class="s0">&lt;/tt&gt;</span><span class="s1">, the </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">walk</span><span class="s0">&lt;/tt&gt; </span><span class="s1">method in</span>
<span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#ftphost-path&quot;</span><span class="s0">&gt;</span><span class="s1">FTPHost.path</span><span class="s0">&lt;/a&gt; </span><span class="s1">can be used, though </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">FTPHost.walk</span><span class="s0">&lt;/tt&gt; </span><span class="s1">is probably</span>
<span class="s1">easier to use.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;/ul&gt;</span>
<span class="s0">&lt;/div&gt;</span>
<span class="s0">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;section&quot; </span><span class="s2">id</span><span class="s3">=&quot;other-methods&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;h3&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;toc-backref&quot; </span><span class="s2">href</span><span class="s3">=&quot;#id23&quot;</span><span class="s0">&gt;</span><span class="s1">Other methods</span><span class="s0">&lt;/a&gt;&lt;/h3&gt;</span>
<span class="s0">&lt;ul&gt;</span>
<span class="s0">&lt;li&gt;&lt;p </span><span class="s2">class</span><span class="s3">=&quot;first&quot;</span><span class="s0">&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">close()</span><span class="s0">&lt;/tt&gt;&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">closes the connection to the remote host. After this, no more</span>
<span class="s1">interaction with the FTP server is possible with this </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">FTPHost</span><span class="s0">&lt;/tt&gt;</span>
<span class="s1">object. Usually you don't need to close an </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">FTPHost</span><span class="s0">&lt;/tt&gt; </span><span class="s1">instance</span>
<span class="s1">with </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">close</span><span class="s0">&lt;/tt&gt; </span><span class="s1">if you set up the instance in a </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">with</span><span class="s0">&lt;/tt&gt; </span><span class="s1">statement.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;p </span><span class="s2">class</span><span class="s3">=&quot;first&quot;</span><span class="s0">&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">rename(source, target)</span><span class="s0">&lt;/tt&gt;&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">renames the source file (or directory) on the FTP server.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;/ul&gt;</span>
<span class="s0">&lt;ul </span><span class="s2">id</span><span class="s3">=&quot;ftphost-chmod&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;li&gt;&lt;p </span><span class="s2">class</span><span class="s3">=&quot;first&quot;</span><span class="s0">&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">chmod(path, mode)</span><span class="s0">&lt;/tt&gt;&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">sets the access mode (permission flags) for the given path. The mode</span>
<span class="s1">is an integer as returned for the mode by the </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">stat</span><span class="s0">&lt;/tt&gt; </span><span class="s1">and </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">lstat</span><span class="s0">&lt;/tt&gt;</span>
<span class="s1">methods. Be careful: Usually, mode values are written as octal</span>
<span class="s1">numbers, for example 0755 to make a directory readable and writable</span>
<span class="s1">for the owner, but not writable for the group and others. If you</span>
<span class="s1">want to use such octal values, rely on Python's support for them:</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;pre </span><span class="s2">class</span><span class="s3">=&quot;literal-block&quot;</span><span class="s0">&gt;</span>
<span class="s1">ftp_host.chmod(</span><span class="s4">&amp;quot;</span><span class="s1">some_directory</span><span class="s4">&amp;quot;</span><span class="s1">, 0o755)</span>
<span class="s0">&lt;/pre&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">Not all FTP servers support the </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">chmod</span><span class="s0">&lt;/tt&gt; </span><span class="s1">command. In case of</span>
<span class="s1">an exception, how do you know if the path doesn't exist or if</span>
<span class="s1">the command itself is invalid? If the FTP server complies with</span>
<span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference external&quot; </span><span class="s2">href</span><span class="s3">=&quot;https://www.ietf.org/rfc/rfc959.txt&quot;</span><span class="s0">&gt;</span><span class="s1">RFC 959</span><span class="s0">&lt;/a&gt;</span><span class="s1">, it should return a status code 502 if the </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">SITE CHMOD</span><span class="s0">&lt;/tt&gt;</span>
<span class="s1">command isn't allowed. </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftputil</span><span class="s0">&lt;/tt&gt; </span><span class="s1">maps this special error</span>
<span class="s1">response to a </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">CommandNotImplementedError</span><span class="s0">&lt;/tt&gt; </span><span class="s1">which is derived from</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">PermanentError</span><span class="s0">&lt;/tt&gt;</span><span class="s1">.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">So you need to code like this:</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;pre </span><span class="s2">class</span><span class="s3">=&quot;literal-block&quot;</span><span class="s0">&gt;</span>
<span class="s1">with ftputil.FTPHost(server, user, password) as ftp_host:</span>
    <span class="s1">try:</span>
        <span class="s1">ftp_host.chmod(</span><span class="s4">&amp;quot;</span><span class="s1">some_file</span><span class="s4">&amp;quot;</span><span class="s1">, 0o644)</span>
    <span class="s1">except ftputil.error.CommandNotImplementedError:</span>
        <span class="s1"># `chmod` not supported</span>
        <span class="s1">...</span>
    <span class="s1">except ftputil.error.PermanentError:</span>
        <span class="s1"># Possibly a non-existent file</span>
        <span class="s1">...</span>
<span class="s0">&lt;/pre&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">Because the </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">CommandNotImplementedError</span><span class="s0">&lt;/tt&gt; </span><span class="s1">is more specific, you</span>
<span class="s1">have to test for it first.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;/ul&gt;</span>
<span class="s0">&lt;ul&gt;</span>
<span class="s0">&lt;li&gt;&lt;p </span><span class="s2">class</span><span class="s3">=&quot;first&quot;</span><span class="s0">&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">copyfileobj(source, target, length=64*1024)</span><span class="s0">&lt;/tt&gt;&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">copies the contents from the file-like object </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">source</span><span class="s0">&lt;/tt&gt; </span><span class="s1">to the</span>
<span class="s1">file-like object </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">target</span><span class="s0">&lt;/tt&gt;</span><span class="s1">. The only difference to</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">shutil.copyfileobj</span><span class="s0">&lt;/tt&gt; </span><span class="s1">is the default buffer size. Note that</span>
<span class="s1">arbitrary file-like objects can be used as arguments (e. g. local</span>
<span class="s1">files, remote FTP files).</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">However, the interfaces of </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">source</span><span class="s0">&lt;/tt&gt; </span><span class="s1">and </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">target</span><span class="s0">&lt;/tt&gt; </span><span class="s1">have to match;</span>
<span class="s1">the string type read from </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">source</span><span class="s0">&lt;/tt&gt; </span><span class="s1">must be an accepted string type</span>
<span class="s1">when written to </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">target</span><span class="s0">&lt;/tt&gt;</span><span class="s1">. For example, if you open </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">source</span><span class="s0">&lt;/tt&gt; </span><span class="s1">in</span>
<span class="s1">Python 3 as a local text file and </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">target</span><span class="s0">&lt;/tt&gt; </span><span class="s1">as a remote file object</span>
<span class="s1">in binary mode, the transfer will fail since </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">source.read</span><span class="s0">&lt;/tt&gt; </span><span class="s1">gives</span>
<span class="s1">unicode strings (</span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">str</span><span class="s0">&lt;/tt&gt;</span><span class="s1">) whereas </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">target.write</span><span class="s0">&lt;/tt&gt; </span><span class="s1">only accepts byte</span>
<span class="s1">strings (</span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">bytes</span><span class="s0">&lt;/tt&gt;</span><span class="s1">).</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">See </span><span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#file-like-objects&quot;</span><span class="s0">&gt;</span><span class="s1">File-like objects</span><span class="s0">&lt;/a&gt; </span><span class="s1">for the construction and use of remote</span>
<span class="s1">file-like objects.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;/ul&gt;</span>
<span class="s0">&lt;ul </span><span class="s2">id</span><span class="s3">=&quot;set-parser&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;li&gt;&lt;p </span><span class="s2">class</span><span class="s3">=&quot;first&quot;</span><span class="s0">&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">set_parser(parser)</span><span class="s0">&lt;/tt&gt;&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">sets a custom parser for FTP directories. Note that you have to pass</span>
<span class="s1">in a parser </span><span class="s0">&lt;em&gt;</span><span class="s1">instance</span><span class="s0">&lt;/em&gt;</span><span class="s1">, not the class.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">An </span><span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#writing-directory-parsers&quot;</span><span class="s0">&gt;</span><span class="s1">extra section</span><span class="s0">&lt;/a&gt; </span><span class="s1">shows how to write own parsers if the default</span>
<span class="s1">parsers in </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftputil</span><span class="s0">&lt;/tt&gt; </span><span class="s1">don't work for you.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;/ul&gt;</span>
<span class="s0">&lt;ul </span><span class="s2">id</span><span class="s3">=&quot;keep-alive&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;li&gt;&lt;p </span><span class="s2">class</span><span class="s3">=&quot;first&quot;</span><span class="s0">&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">keep_alive()</span><span class="s0">&lt;/tt&gt;&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">attempts to keep the connection to the remote server active in order</span>
<span class="s1">to prevent timeouts from happening. This method is primarily</span>
<span class="s1">intended to keep the underlying FTP connection of an </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">FTPHost</span><span class="s0">&lt;/tt&gt;</span>
<span class="s1">object alive while a file is uploaded or downloaded. This will</span>
<span class="s1">require either an extra thread while the upload or download is in</span>
<span class="s1">progress or calling </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">keep_alive</span><span class="s0">&lt;/tt&gt; </span><span class="s1">from a </span><span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#callback-function&quot;</span><span class="s0">&gt;</span><span class="s1">callback function</span><span class="s0">&lt;/a&gt;</span><span class="s1">.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">The </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">keep_alive</span><span class="s0">&lt;/tt&gt; </span><span class="s1">method won't help if the connection has already</span>
<span class="s1">timed out. In this case, a </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftputil.error.TemporaryError</span><span class="s0">&lt;/tt&gt; </span><span class="s1">is raised.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">If you want to use this method, keep in mind that FTP servers define</span>
<span class="s1">a timeout for a reason. A timeout prevents running out of server</span>
<span class="s1">connections because of clients that never disconnect on their own.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">Note that the </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">keep_alive</span><span class="s0">&lt;/tt&gt; </span><span class="s1">method does </span><span class="s0">&lt;em&gt;</span><span class="s1">not</span><span class="s0">&lt;/em&gt; </span><span class="s1">affect the </span><span class="s4">&amp;quot;</span><span class="s1">hidden</span><span class="s4">&amp;quot;</span>
<span class="s1">FTP child connections established by </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">FTPHost.open</span><span class="s0">&lt;/tt&gt; </span><span class="s1">(see section</span>
<span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#ftphost-instances-vs-ftp-connections&quot;</span><span class="s0">&gt;</span><span class="s1">FTPHost instances vs. FTP connections</span><span class="s0">&lt;/a&gt; </span><span class="s1">for details). You </span><span class="s0">&lt;em&gt;</span><span class="s1">can't</span><span class="s0">&lt;/em&gt;</span>
<span class="s1">use </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">keep_alive</span><span class="s0">&lt;/tt&gt; </span><span class="s1">to avoid a timeout in a stalling transfer like</span>
<span class="s1">this:</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;pre </span><span class="s2">class</span><span class="s3">=&quot;literal-block&quot;</span><span class="s0">&gt;</span>
<span class="s1">with ftputil.FTPHost(server, userid, password) as ftp_host:</span>
    <span class="s1">with ftp_host.open(</span><span class="s4">&amp;quot;</span><span class="s1">some_remote_file</span><span class="s4">&amp;quot;</span><span class="s1">, </span><span class="s4">&amp;quot;</span><span class="s1">rb</span><span class="s4">&amp;quot;</span><span class="s1">) as fobj:</span>
        <span class="s1">data = fobj.read(100)</span>
        <span class="s1"># _Futile_ attempt to avoid file connection timeout.</span>
        <span class="s1">for i in range(15):</span>
            <span class="s1">time.sleep(60)</span>
            <span class="s1">ftp_host.keep_alive()</span>
        <span class="s1"># Will raise an `ftputil.error.TemporaryError`.</span>
        <span class="s1">data += fobj.read()</span>
<span class="s0">&lt;/pre&gt;</span>
<span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;/ul&gt;</span>
<span class="s0">&lt;/div&gt;</span>
<span class="s0">&lt;/div&gt;</span>
<span class="s0">&lt;/div&gt;</span>
<span class="s0">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;section&quot; </span><span class="s2">id</span><span class="s3">=&quot;file-like-objects&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;span </span><span class="s2">id</span><span class="s3">=&quot;ftphost-open&quot;</span><span class="s0">&gt;&lt;/span&gt;&lt;h1&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;toc-backref&quot; </span><span class="s2">href</span><span class="s3">=&quot;#id24&quot;</span><span class="s0">&gt;</span><span class="s1">File-like objects</span><span class="s0">&lt;/a&gt;&lt;/h1&gt;</span>
<span class="s0">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;section&quot; </span><span class="s2">id</span><span class="s3">=&quot;id3&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;h2&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;toc-backref&quot; </span><span class="s2">href</span><span class="s3">=&quot;#id25&quot;</span><span class="s0">&gt;</span><span class="s1">Construction</span><span class="s0">&lt;/a&gt;&lt;/h2&gt;</span>
<span class="s0">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;section&quot; </span><span class="s2">id</span><span class="s3">=&quot;basics&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;h3&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;toc-backref&quot; </span><span class="s2">href</span><span class="s3">=&quot;#id26&quot;</span><span class="s0">&gt;</span><span class="s1">Basics</span><span class="s0">&lt;/a&gt;&lt;/h3&gt;</span>
<span class="s0">&lt;p&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">FTPFile</span><span class="s0">&lt;/tt&gt; </span><span class="s1">objects are returned by a call to </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">FTPHost.open</span><span class="s0">&lt;/tt&gt;</span><span class="s1">;</span>
<span class="s1">never use the </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">FTPFile</span><span class="s0">&lt;/tt&gt; </span><span class="s1">constructor directly.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">The APIs for remote file-like objects is modeled after the APIs of</span>
<span class="s1">the built-in </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">open</span><span class="s0">&lt;/tt&gt; </span><span class="s1">function and its return value.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;ul&gt;</span>
<span class="s0">&lt;li&gt;&lt;p </span><span class="s2">class</span><span class="s3">=&quot;first&quot;</span><span class="s0">&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">FTPHost.open(path, </span><span class="s0">&lt;span </span><span class="s2">class</span><span class="s3">=&quot;pre&quot;</span><span class="s0">&gt;</span><span class="s1">mode=</span><span class="s4">&amp;quot;</span><span class="s1">r</span><span class="s4">&amp;quot;</span><span class="s1">,</span><span class="s0">&lt;/span&gt; </span><span class="s1">buffering=None, encoding=None,</span>
<span class="s1">errors=None, newline=None, rest=None)</span><span class="s0">&lt;/tt&gt;&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">returns a file-like object that refers to the path on the remote</span>
<span class="s1">host. This path may be absolute or relative to the current directory</span>
<span class="s1">on the remote host (this directory can be determined with the</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">getcwd</span><span class="s0">&lt;/tt&gt; </span><span class="s1">method). As with local file objects, the default mode is</span>
<span class="s4">&amp;quot;</span><span class="s1">r</span><span class="s4">&amp;quot;</span><span class="s1">, i. e. reading text files. Valid modes are </span><span class="s4">&amp;quot;</span><span class="s1">r</span><span class="s4">&amp;quot;</span><span class="s1">, </span><span class="s4">&amp;quot;</span><span class="s1">rb</span><span class="s4">&amp;quot;</span><span class="s1">, </span><span class="s4">&amp;quot;</span><span class="s1">w</span><span class="s4">&amp;quot;</span><span class="s1">, and</span>
<span class="s4">&amp;quot;</span><span class="s1">wb</span><span class="s4">&amp;quot;</span><span class="s1">.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">If a file is opened in binary mode, you </span><span class="s0">&lt;em&gt;</span><span class="s1">must not</span><span class="s0">&lt;/em&gt; </span><span class="s1">specify an</span>
<span class="s1">encoding. On the other hand, if you open a file in text mode, an</span>
<span class="s1">encoding is used. By default, this is the return value of</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">locale.getpreferredencoding</span><span class="s0">&lt;/tt&gt;</span><span class="s1">, but you can (and probably should)</span>
<span class="s1">specify a distinct encoding.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">If you open a file in binary mode, the read and write operations use</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">bytes</span><span class="s0">&lt;/tt&gt; </span><span class="s1">objects. That is, read operations return </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">bytes</span><span class="s0">&lt;/tt&gt; </span><span class="s1">and</span>
<span class="s1">write operations only accept </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">bytes</span><span class="s0">&lt;/tt&gt;</span><span class="s1">.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">Similarly, text files always work with strings (</span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">str</span><span class="s0">&lt;/tt&gt;</span><span class="s1">). Here, read</span>
<span class="s1">operations return string and write operations only accept strings.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">The arguments </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">buffering</span><span class="s0">&lt;/tt&gt;</span><span class="s1">, </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">errors</span><span class="s0">&lt;/tt&gt; </span><span class="s1">and </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">newline</span><span class="s0">&lt;/tt&gt; </span><span class="s1">have the</span>
<span class="s1">same semantics as in </span><span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference external&quot; </span><span class="s2">href</span><span class="s3">=&quot;https://docs.python.org/3/library/functions.html#open&quot;</span><span class="s0">&gt;</span><span class="s1">open</span><span class="s0">&lt;/a&gt;</span><span class="s1">.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">If the file is opened in binary mode, you may pass 0 or a positive</span>
<span class="s1">integer for the </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">rest</span><span class="s0">&lt;/tt&gt; </span><span class="s1">argument. The argument is passed to the</span>
<span class="s1">underlying FTP session instance (for example an instance of</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftplib.FTP</span><span class="s0">&lt;/tt&gt;</span><span class="s1">) to start reading or writing at the given byte</span>
<span class="s1">offset. For example, if a remote file contains the letters</span>
<span class="s4">&amp;quot;</span><span class="s1">abcdef</span><span class="s4">&amp;quot; </span><span class="s1">in ASCII encoding, </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">rest=3</span><span class="s0">&lt;/tt&gt; </span><span class="s1">will start reading at </span><span class="s4">&amp;quot;</span><span class="s1">d</span><span class="s4">&amp;quot;</span><span class="s1">.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;admonition warning&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;p </span><span class="s2">class</span><span class="s3">=&quot;first admonition-title&quot;</span><span class="s0">&gt;</span><span class="s1">Warning</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p </span><span class="s2">class</span><span class="s3">=&quot;last&quot;</span><span class="s0">&gt;</span><span class="s1">If you pass </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">rest</span><span class="s0">&lt;/tt&gt; </span><span class="s1">values which point </span><span class="s0">&lt;em&gt;</span><span class="s1">after</span><span class="s0">&lt;/em&gt; </span><span class="s1">the file, the</span>
<span class="s1">behavior is undefined and may even differ from one FTP server to</span>
<span class="s1">another. Therefore, use the </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">rest</span><span class="s0">&lt;/tt&gt; </span><span class="s1">argument only for error</span>
<span class="s1">recovery in case of interrupted transfers. You need to keep track</span>
<span class="s1">of the transferred data so that you can provide a valid </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">rest</span><span class="s0">&lt;/tt&gt;</span>
<span class="s1">argument for a resumed transfer.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/div&gt;</span>
<span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;/ul&gt;</span>
<span class="s0">&lt;p&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">FTPHost.open</span><span class="s0">&lt;/tt&gt; </span><span class="s1">can also be used in a </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">with</span><span class="s0">&lt;/tt&gt; </span><span class="s1">statement:</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;pre </span><span class="s2">class</span><span class="s3">=&quot;literal-block&quot;</span><span class="s0">&gt;</span>
<span class="s1">import ftputil</span>

<span class="s1">with ftputil.FTPHost(...) as ftp_host:</span>
    <span class="s1">...</span>
    <span class="s1">with ftp_host.open(</span><span class="s4">&amp;quot;</span><span class="s1">new_file</span><span class="s4">&amp;quot;</span><span class="s1">, </span><span class="s4">&amp;quot;</span><span class="s1">w</span><span class="s4">&amp;quot;</span><span class="s1">, encoding=</span><span class="s4">&amp;quot;</span><span class="s1">utf8</span><span class="s4">&amp;quot;</span><span class="s1">) as fobj:</span>
        <span class="s1">fobj.write(</span><span class="s4">&amp;quot;</span><span class="s1">This is some text.</span><span class="s4">&amp;quot;</span><span class="s1">)</span>
<span class="s0">&lt;/pre&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">At the end of the </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">with</span><span class="s0">&lt;/tt&gt; </span><span class="s1">block, the remote file will be closed</span>
<span class="s1">automatically.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">If something goes wrong during the construction of the file or in the</span>
<span class="s1">body of the </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">with</span><span class="s0">&lt;/tt&gt; </span><span class="s1">statement, the file will be closed as well.</span>
<span class="s1">Exceptions will be propagated as with </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">try ... finally</span><span class="s0">&lt;/tt&gt;</span><span class="s1">.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/div&gt;</span>
<span class="s0">&lt;/div&gt;</span>
<span class="s0">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;section&quot; </span><span class="s2">id</span><span class="s3">=&quot;attributes-and-methods&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;h2&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;toc-backref&quot; </span><span class="s2">href</span><span class="s3">=&quot;#id27&quot;</span><span class="s0">&gt;</span><span class="s1">Attributes and methods</span><span class="s0">&lt;/a&gt;&lt;/h2&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">The methods</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;pre </span><span class="s2">class</span><span class="s3">=&quot;literal-block&quot;</span><span class="s0">&gt;</span>
<span class="s1">close()</span>
<span class="s1">read([count])</span>
<span class="s1">readline([count])</span>
<span class="s1">readlines()</span>
<span class="s1">write(data)</span>
<span class="s1">writelines(string_sequence)</span>
<span class="s0">&lt;/pre&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">and the attribute </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">closed</span><span class="s0">&lt;/tt&gt; </span><span class="s1">have the same semantics as for file</span>
<span class="s1">objects of a local disk file system. The iterator protocol is</span>
<span class="s1">supported as well, i. e. you can use a loop to read a file line by</span>
<span class="s1">line:</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;pre </span><span class="s2">class</span><span class="s3">=&quot;literal-block&quot;</span><span class="s0">&gt;</span>
<span class="s1">with ftputil.FTPHost(server, user, password) as ftp_host:</span>
    <span class="s1">with ftp_host.open(</span><span class="s4">&amp;quot;</span><span class="s1">some_file</span><span class="s4">&amp;quot;</span><span class="s1">) as input_file:</span>
        <span class="s1">for line in input_file:</span>
            <span class="s1"># Do something with the line, e. g.</span>
            <span class="s1">print(line.strip().replace(</span><span class="s4">&amp;quot;</span><span class="s1">ftplib</span><span class="s4">&amp;quot;</span><span class="s1">, </span><span class="s4">&amp;quot;</span><span class="s1">ftputil</span><span class="s4">&amp;quot;</span><span class="s1">))</span>
<span class="s0">&lt;/pre&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">For more on file objects, see the section </span><span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference external&quot; </span><span class="s2">href</span><span class="s3">=&quot;https://docs.python.org/3/glossary.html#term-file-object&quot;</span><span class="s0">&gt;</span><span class="s1">File objects</span><span class="s0">&lt;/a&gt; </span><span class="s1">in the</span>
<span class="s1">Python Library Reference.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/div&gt;</span>
<span class="s0">&lt;/div&gt;</span>
<span class="s0">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;section&quot; </span><span class="s2">id</span><span class="s3">=&quot;ftphost-instances-vs-ftp-connections&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;span </span><span class="s2">id</span><span class="s3">=&quot;child-connections&quot;</span><span class="s0">&gt;&lt;/span&gt;&lt;h1&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;toc-backref&quot; </span><span class="s2">href</span><span class="s3">=&quot;#id28&quot;</span><span class="s0">&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">FTPHost</span><span class="s0">&lt;/tt&gt; </span><span class="s1">instances vs. FTP connections</span><span class="s0">&lt;/a&gt;&lt;/h1&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">This section explains why keeping an </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">FTPHost</span><span class="s0">&lt;/tt&gt; </span><span class="s1">instance </span><span class="s4">&amp;quot;</span><span class="s1">alive</span><span class="s4">&amp;quot;</span>
<span class="s1">without timing out sometimes isn't trivial. If you always finish your</span>
<span class="s1">FTP operations in time, you don't need to read this section.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">The file transfer protocol is a stateful protocol. That means an FTP</span>
<span class="s1">connection always is in a certain state. Each of these states can only</span>
<span class="s1">change to certain other states under certain conditions triggered by</span>
<span class="s1">the client or the server.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">One of the consequences is that a single FTP connection can't be used</span>
<span class="s1">at the same time, say, to transfer data on the FTP data channel and to</span>
<span class="s1">create a directory on the remote host.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">For example, consider this:</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;pre </span><span class="s2">class</span><span class="s3">=&quot;literal-block&quot;</span><span class="s0">&gt;</span>
<span class="s4">&amp;gt;&amp;gt;&amp;gt; </span><span class="s1">import ftplib</span>
<span class="s4">&amp;gt;&amp;gt;&amp;gt; </span><span class="s1">ftp = ftplib.FTP(server, user, password)</span>
<span class="s4">&amp;gt;&amp;gt;&amp;gt; </span><span class="s1">ftp.pwd()</span>
<span class="s1">'/'</span>
<span class="s4">&amp;gt;&amp;gt;&amp;gt; </span><span class="s1"># Start transfer. `CONTENTS` is a text file on the server.</span>
<span class="s4">&amp;gt;&amp;gt;&amp;gt; </span><span class="s1">socket = ftp.transfercmd(</span><span class="s4">&amp;quot;</span><span class="s1">RETR CONTENTS</span><span class="s4">&amp;quot;</span><span class="s1">)</span>
<span class="s4">&amp;gt;&amp;gt;&amp;gt; </span><span class="s1">socket</span>
<span class="s4">&amp;lt;</span><span class="s1">socket._socketobject object at 0x7f801a6386e0</span><span class="s4">&amp;gt;</span>
<span class="s4">&amp;gt;&amp;gt;&amp;gt; </span><span class="s1">ftp.pwd()</span>
<span class="s1">Traceback (most recent call last):</span>
  <span class="s1">File </span><span class="s4">&amp;quot;&amp;lt;</span><span class="s1">stdin</span><span class="s4">&amp;gt;&amp;quot;</span><span class="s1">, line 1, in </span><span class="s4">&amp;lt;</span><span class="s1">module</span><span class="s4">&amp;gt;</span>
  <span class="s1">File </span><span class="s4">&amp;quot;</span><span class="s1">/usr/lib64/python2.7/ftplib.py</span><span class="s4">&amp;quot;</span><span class="s1">, line 578, in pwd</span>
    <span class="s1">return parse257(resp)</span>
  <span class="s1">File </span><span class="s4">&amp;quot;</span><span class="s1">/usr/lib64/python2.7/ftplib.py</span><span class="s4">&amp;quot;</span><span class="s1">, line 842, in parse257</span>
    <span class="s1">raise error_reply, resp</span>
<span class="s1">ftplib.error_reply: 226-File successfully transferred</span>
<span class="s1">226 0.000 seconds (measured here), 5.60 Mbytes per second</span>
<span class="s4">&amp;gt;&amp;gt;&amp;gt;</span>
<span class="s0">&lt;/pre&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">Note that </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftp</span><span class="s0">&lt;/tt&gt; </span><span class="s1">is a single FTP connection, represented by an</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftplib.FTP</span><span class="s0">&lt;/tt&gt; </span><span class="s1">instance, not an </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftputil.FTPHost</span><span class="s0">&lt;/tt&gt; </span><span class="s1">instance.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">On the other hand, consider this:</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;pre </span><span class="s2">class</span><span class="s3">=&quot;literal-block&quot;</span><span class="s0">&gt;</span>
<span class="s4">&amp;gt;&amp;gt;&amp;gt; </span><span class="s1">import ftputil</span>
<span class="s4">&amp;gt;&amp;gt;&amp;gt; </span><span class="s1">ftp_host = ftputil.FTPHost(server, user, password)</span>
<span class="s4">&amp;gt;&amp;gt;&amp;gt; </span><span class="s1">ftp_host.getcwd()</span>
<span class="s4">&amp;gt;&amp;gt;&amp;gt; </span><span class="s1">fobj = ftp_host.open(</span><span class="s4">&amp;quot;</span><span class="s1">CONTENTS</span><span class="s4">&amp;quot;</span><span class="s1">)</span>
<span class="s4">&amp;gt;&amp;gt;&amp;gt; </span><span class="s1">fobj</span>
<span class="s4">&amp;lt;</span><span class="s1">ftputil.file.FTPFile object at 0x7f8019d3aa50</span><span class="s4">&amp;gt;</span>
<span class="s4">&amp;gt;&amp;gt;&amp;gt; </span><span class="s1">ftp_host.getcwd()</span>
<span class="s1">u'/'</span>
<span class="s4">&amp;gt;&amp;gt;&amp;gt; </span><span class="s1">fobj.readline()</span>
<span class="s1">u'Contents of FTP test directory\n'</span>
<span class="s4">&amp;gt;&amp;gt;&amp;gt; </span><span class="s1">fobj.close()</span>
<span class="s4">&amp;gt;&amp;gt;&amp;gt;</span>
<span class="s0">&lt;/pre&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">To be able to start a file transfer (i. e. open a remote file for</span>
<span class="s1">reading or writing) and still be able to use other FTP commands,</span>
<span class="s1">ftputil uses a trick. For every remote file, ftputil creates a new FTP</span>
<span class="s1">connection, called a child connection in the ftputil source code.</span>
<span class="s1">(Actually, FTP connections belonging to closed remote files are</span>
<span class="s1">re-used if they haven't timed out yet.)</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">In most cases this approach isn't noticeable by code using ftputil.</span>
<span class="s1">However, the nice abstraction of dealing with a single FTP connection</span>
<span class="s1">falls apart if one of the child connections times out. For example, if</span>
<span class="s1">you open a remote file and work only with the initial </span><span class="s4">&amp;quot;</span><span class="s1">main</span><span class="s4">&amp;quot;</span>
<span class="s1">connection to navigate the file system, the FTP connection for the</span>
<span class="s1">remote file may eventually time out.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">While it's often relatively easy to prevent the </span><span class="s4">&amp;quot;</span><span class="s1">main</span><span class="s4">&amp;quot; </span><span class="s1">connection from</span>
<span class="s1">timing out it's unfortunately practically impossible to do this for a</span>
<span class="s1">remote file connection (apart from transferring some data, of course).</span>
<span class="s1">For this reason, </span><span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#keep-alive&quot;</span><span class="s0">&gt;</span><span class="s1">FTPHost.keep_alive</span><span class="s0">&lt;/a&gt; </span><span class="s1">affects only the main</span>
<span class="s1">connection. Child connections may still time out if they're idle for</span>
<span class="s1">too long.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">Some more details:</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;ul </span><span class="s2">class</span><span class="s3">=&quot;simple&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;li&gt;</span><span class="s1">A kind of </span><span class="s4">&amp;quot;</span><span class="s1">straightforward</span><span class="s4">&amp;quot; </span><span class="s1">way of keeping the main connection alive</span>
<span class="s1">would be to call </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftp_host.getcwd()</span><span class="s0">&lt;/tt&gt;</span><span class="s1">. However, this doesn't work</span>
<span class="s1">because ftputil caches the current directory and returns it without</span>
<span class="s1">actually contacting the server. That's the main reason why there's</span>
<span class="s1">a </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">keep_alive</span><span class="s0">&lt;/tt&gt; </span><span class="s1">method since it calls </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">pwd</span><span class="s0">&lt;/tt&gt; </span><span class="s1">on the FTP connection</span>
<span class="s1">(i. e. the session object), which isn't a public attribute.</span><span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;</span><span class="s1">Some servers define not only an idle timeout but also a transfer</span>
<span class="s1">timeout. This means the connection times out unless there's some</span>
<span class="s1">transfer on the data channel for this connection. So ftputil's</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">keep_alive</span><span class="s0">&lt;/tt&gt; </span><span class="s1">doesn't prevent this timeout, but an</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftp_host.listdir(ftp_host.curdir)</span><span class="s0">&lt;/tt&gt; </span><span class="s1">call should do it. However,</span>
<span class="s1">this transfers the data for the whole directory listing which might</span>
<span class="s1">take some time if the directory has many entries.</span><span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;/ul&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">Bottom line: If you can, you should organize your FTP actions so that</span>
<span class="s1">you finish everything before a timeout happens.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/div&gt;</span>
<span class="s0">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;section&quot; </span><span class="s2">id</span><span class="s3">=&quot;writing-directory-parsers&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;h1&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;toc-backref&quot; </span><span class="s2">href</span><span class="s3">=&quot;#id29&quot;</span><span class="s0">&gt;</span><span class="s1">Writing directory parsers</span><span class="s0">&lt;/a&gt;&lt;/h1&gt;</span>
<span class="s0">&lt;p&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftputil</span><span class="s0">&lt;/tt&gt; </span><span class="s1">recognizes the two most widely-used FTP directory formats,</span>
<span class="s1">Unix and MS style, and adjusts itself automatically. Almost every FTP</span>
<span class="s1">server uses one of these formats.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">However, if your server uses a format which is different from the two</span>
<span class="s1">provided by </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftputil</span><span class="s0">&lt;/tt&gt;</span><span class="s1">, you can plug in a custom parser with a single</span>
<span class="s1">method call and have </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftputil</span><span class="s0">&lt;/tt&gt; </span><span class="s1">use this parser.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">For this, you need to write a parser class by inheriting from the</span>
<span class="s1">class </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">Parser</span><span class="s0">&lt;/tt&gt; </span><span class="s1">in the </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftputil.stat</span><span class="s0">&lt;/tt&gt; </span><span class="s1">module. Here's an example:</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;pre </span><span class="s2">class</span><span class="s3">=&quot;literal-block&quot;</span><span class="s0">&gt;</span>
<span class="s1">import ftputil.error</span>
<span class="s1">import ftputil.stat</span>

<span class="s1">class XyzParser(ftputil.stat.Parser):</span>
    <span class="s4">&amp;quot;&amp;quot;&amp;quot;</span>
    <span class="s1">Parse the default format of the FTP server of the XYZ</span>
    <span class="s1">corporation.</span>
    <span class="s4">&amp;quot;&amp;quot;&amp;quot;</span>

    <span class="s1">def parse_line(self, line, time_shift=0.0):</span>
        <span class="s4">&amp;quot;&amp;quot;&amp;quot;</span>
        <span class="s1">Parse a `line` from the directory listing and return a</span>
        <span class="s1">corresponding `StatResult` object. If the line can't</span>
        <span class="s1">be parsed, raise `ftputil.error.ParserError`.</span>

        <span class="s1">The `time_shift` argument can be used to fine-tune the</span>
        <span class="s1">parsing of dates and times. See the class</span>
        <span class="s1">`ftputil.stat.UnixParser` for an example.</span>
        <span class="s4">&amp;quot;&amp;quot;&amp;quot;</span>
        <span class="s1"># Split the `line` argument and examine it further; if</span>
        <span class="s1"># something goes wrong, raise an `ftputil.error.ParserError`.</span>
        <span class="s1">...</span>
        <span class="s1"># Make a `StatResult` object from the parts above.</span>
        <span class="s1">stat_result = ftputil.stat.StatResult(...)</span>
        <span class="s1"># `_st_name`, `_st_target` and `_st_mtime_precision` are optional.</span>
        <span class="s1">stat_result._st_name = ...</span>
        <span class="s1">stat_result._st_target = ...</span>
        <span class="s1">stat_result._st_mtime_precision = ...</span>
        <span class="s1">return stat_result</span>

    <span class="s1"># Define `ignores_line` only if the default in the base class</span>
    <span class="s1"># doesn't do enough!</span>
    <span class="s1">def ignores_line(self, line):</span>
        <span class="s4">&amp;quot;&amp;quot;&amp;quot;</span>
        <span class="s1">Return a true value if the line should be ignored. For</span>
        <span class="s1">example, the implementation in the base class handles</span>
        <span class="s1">lines like </span><span class="s4">&amp;quot;</span><span class="s1">total 17</span><span class="s4">&amp;quot;</span><span class="s1">. On the other hand, if the line</span>
        <span class="s1">should be used for stat'ing, return a false value.</span>
        <span class="s4">&amp;quot;&amp;quot;&amp;quot;</span>
        <span class="s1">is_total_line = super().ignores_line(line)</span>
        <span class="s1">my_test = ...</span>
        <span class="s1">return is_total_line or my_test</span>
<span class="s0">&lt;/pre&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">A </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">StatResult</span><span class="s0">&lt;/tt&gt; </span><span class="s1">object is similar to the value returned by</span>
<span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference external&quot; </span><span class="s2">href</span><span class="s3">=&quot;https://docs.python.org/library/os.html#os.stat&quot;</span><span class="s0">&gt;</span><span class="s1">os.stat</span><span class="s0">&lt;/a&gt; </span><span class="s1">and is usually built with statements like</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;pre </span><span class="s2">class</span><span class="s3">=&quot;literal-block&quot;</span><span class="s0">&gt;</span>
<span class="s1">stat_result = StatResult(</span>
                <span class="s1">(st_mode, st_ino, st_dev, st_nlink, st_uid,</span>
                 <span class="s1">st_gid, st_size, st_atime, st_mtime, st_ctime))</span>
<span class="s1">stat_result._st_name = ...</span>
<span class="s1">stat_result._st_target = ...</span>
<span class="s1">stat_result._st_mtime_precision = ...</span>
<span class="s0">&lt;/pre&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">with the arguments of the </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">StatResult</span><span class="s0">&lt;/tt&gt; </span><span class="s1">constructor described in</span>
<span class="s1">the following table.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;table </span><span class="s2">border</span><span class="s3">=&quot;1&quot; </span><span class="s2">class</span><span class="s3">=&quot;docutils&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;colgroup&gt;</span>
<span class="s0">&lt;col </span><span class="s2">width</span><span class="s3">=&quot;5%&quot; </span><span class="s0">/&gt;</span>
<span class="s0">&lt;col </span><span class="s2">width</span><span class="s3">=&quot;20%&quot; </span><span class="s0">/&gt;</span>
<span class="s0">&lt;col </span><span class="s2">width</span><span class="s3">=&quot;13%&quot; </span><span class="s0">/&gt;</span>
<span class="s0">&lt;col </span><span class="s2">width</span><span class="s3">=&quot;20%&quot; </span><span class="s0">/&gt;</span>
<span class="s0">&lt;col </span><span class="s2">width</span><span class="s3">=&quot;43%&quot; </span><span class="s0">/&gt;</span>
<span class="s0">&lt;/colgroup&gt;</span>
<span class="s0">&lt;thead </span><span class="s2">valign</span><span class="s3">=&quot;bottom&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;tr&gt;&lt;th </span><span class="s2">class</span><span class="s3">=&quot;head&quot;</span><span class="s0">&gt;</span><span class="s1">Index</span><span class="s0">&lt;/th&gt;</span>
<span class="s0">&lt;th </span><span class="s2">class</span><span class="s3">=&quot;head&quot;</span><span class="s0">&gt;</span><span class="s1">Attribute</span><span class="s0">&lt;/th&gt;</span>
<span class="s0">&lt;th </span><span class="s2">class</span><span class="s3">=&quot;head&quot;</span><span class="s0">&gt;</span><span class="s1">os.stat type</span><span class="s0">&lt;/th&gt;</span>
<span class="s0">&lt;th </span><span class="s2">class</span><span class="s3">=&quot;head&quot;</span><span class="s0">&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">StatResult</span><span class="s0">&lt;/tt&gt; </span><span class="s1">type</span><span class="s0">&lt;/th&gt;</span>
<span class="s0">&lt;th </span><span class="s2">class</span><span class="s3">=&quot;head&quot;</span><span class="s0">&gt;</span><span class="s1">Notes</span><span class="s0">&lt;/th&gt;</span>
<span class="s0">&lt;/tr&gt;</span>
<span class="s0">&lt;/thead&gt;</span>
<span class="s0">&lt;tbody </span><span class="s2">valign</span><span class="s3">=&quot;top&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;tr&gt;&lt;td&gt;</span><span class="s1">0</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;td&gt;</span><span class="s1">st_mode</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;td&gt;</span><span class="s1">int</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;td&gt;</span><span class="s1">int</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;td&gt;</span><span class="s4">&amp;nbsp;</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;/tr&gt;</span>
<span class="s0">&lt;tr&gt;&lt;td&gt;</span><span class="s1">1</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;td&gt;</span><span class="s1">st_ino</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;td&gt;</span><span class="s1">long</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;td&gt;</span><span class="s1">long</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;td&gt;</span><span class="s4">&amp;nbsp;</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;/tr&gt;</span>
<span class="s0">&lt;tr&gt;&lt;td&gt;</span><span class="s1">2</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;td&gt;</span><span class="s1">st_dev</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;td&gt;</span><span class="s1">long</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;td&gt;</span><span class="s1">long</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;td&gt;</span><span class="s4">&amp;nbsp;</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;/tr&gt;</span>
<span class="s0">&lt;tr&gt;&lt;td&gt;</span><span class="s1">3</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;td&gt;</span><span class="s1">st_nlink</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;td&gt;</span><span class="s1">int</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;td&gt;</span><span class="s1">int</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;td&gt;</span><span class="s4">&amp;nbsp;</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;/tr&gt;</span>
<span class="s0">&lt;tr&gt;&lt;td&gt;</span><span class="s1">4</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;td&gt;</span><span class="s1">st_uid</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;td&gt;</span><span class="s1">int</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;td&gt;</span><span class="s1">str</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;td&gt;</span><span class="s1">usually only available as string</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;/tr&gt;</span>
<span class="s0">&lt;tr&gt;&lt;td&gt;</span><span class="s1">5</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;td&gt;</span><span class="s1">st_gid</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;td&gt;</span><span class="s1">int</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;td&gt;</span><span class="s1">str</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;td&gt;</span><span class="s1">usually only available as string</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;/tr&gt;</span>
<span class="s0">&lt;tr&gt;&lt;td&gt;</span><span class="s1">6</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;td&gt;</span><span class="s1">st_size</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;td&gt;</span><span class="s1">long</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;td&gt;</span><span class="s1">long</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;td&gt;</span><span class="s4">&amp;nbsp;</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;/tr&gt;</span>
<span class="s0">&lt;tr&gt;&lt;td&gt;</span><span class="s1">7</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;td&gt;</span><span class="s1">st_atime</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;td&gt;</span><span class="s1">int/float</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;td&gt;</span><span class="s1">float</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;td&gt;</span><span class="s4">&amp;nbsp;</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;/tr&gt;</span>
<span class="s0">&lt;tr&gt;&lt;td&gt;</span><span class="s1">8</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;td&gt;</span><span class="s1">st_mtime</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;td&gt;</span><span class="s1">int/float</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;td&gt;</span><span class="s1">float</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;td&gt;</span><span class="s4">&amp;nbsp;</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;/tr&gt;</span>
<span class="s0">&lt;tr&gt;&lt;td&gt;</span><span class="s1">9</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;td&gt;</span><span class="s1">st_ctime</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;td&gt;</span><span class="s1">int/float</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;td&gt;</span><span class="s1">float</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;td&gt;</span><span class="s4">&amp;nbsp;</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;/tr&gt;</span>
<span class="s0">&lt;tr&gt;&lt;td&gt;</span><span class="s1">-</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;td&gt;</span><span class="s1">_st_name</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;td&gt;</span><span class="s1">-</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;td&gt;</span><span class="s1">str</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;td&gt;</span><span class="s1">file name without directory part</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;/tr&gt;</span>
<span class="s0">&lt;tr&gt;&lt;td&gt;</span><span class="s1">-</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;td&gt;</span><span class="s1">_st_target</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;td&gt;</span><span class="s1">-</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;td&gt;</span><span class="s1">str</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;td&gt;</span><span class="s1">link target (may be absolute or relative)</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;/tr&gt;</span>
<span class="s0">&lt;tr&gt;&lt;td&gt;</span><span class="s1">-</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;td&gt;</span><span class="s1">_st_mtime_precision</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;td&gt;</span><span class="s1">-</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;td&gt;</span><span class="s1">int</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;td&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">st_mtime</span><span class="s0">&lt;/tt&gt; </span><span class="s1">precision in seconds</span><span class="s0">&lt;/td&gt;</span>
<span class="s0">&lt;/tr&gt;</span>
<span class="s0">&lt;/tbody&gt;</span>
<span class="s0">&lt;/table&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">If you can't extract all the desirable data from a line (for</span>
<span class="s1">example, the MS format doesn't contain any information about the</span>
<span class="s1">owner of a file), set the corresponding values in the </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">StatResult</span><span class="s0">&lt;/tt&gt;</span>
<span class="s1">instance to </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">None</span><span class="s0">&lt;/tt&gt;</span><span class="s1">.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">Parser classes can use several helper methods which are defined in</span>
<span class="s1">the class </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">Parser</span><span class="s0">&lt;/tt&gt;</span><span class="s1">:</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;ul </span><span class="s2">class</span><span class="s3">=&quot;simple&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;li&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">parse_unix_mode</span><span class="s0">&lt;/tt&gt; </span><span class="s1">parses strings like </span><span class="s4">&amp;quot;</span><span class="s1">drwxr-xr-x</span><span class="s4">&amp;quot; </span><span class="s1">and returns</span>
<span class="s1">an appropriate </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">st_mode</span><span class="s0">&lt;/tt&gt; </span><span class="s1">integer value.</span><span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">parse_unix_time</span><span class="s0">&lt;/tt&gt; </span><span class="s1">returns a float number usable for the</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;&lt;span </span><span class="s2">class</span><span class="s3">=&quot;pre&quot;</span><span class="s0">&gt;</span><span class="s1">st_...time</span><span class="s0">&lt;/span&gt;&lt;/tt&gt; </span><span class="s1">values by parsing arguments like </span><span class="s4">&amp;quot;</span><span class="s1">Nov</span><span class="s4">&amp;quot;</span><span class="s1">/</span><span class="s4">&amp;quot;</span><span class="s1">23</span><span class="s4">&amp;quot;</span><span class="s1">/</span><span class="s4">&amp;quot;</span><span class="s1">02:33</span><span class="s4">&amp;quot; </span><span class="s1">or</span>
<span class="s4">&amp;quot;</span><span class="s1">May</span><span class="s4">&amp;quot;</span><span class="s1">/</span><span class="s4">&amp;quot;</span><span class="s1">26</span><span class="s4">&amp;quot;</span><span class="s1">/</span><span class="s4">&amp;quot;</span><span class="s1">2005</span><span class="s4">&amp;quot;</span><span class="s1">. Note that the method expects the timestamp string</span>
<span class="s1">already split at whitespace.</span><span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">parse_ms_time</span><span class="s0">&lt;/tt&gt; </span><span class="s1">parses arguments like </span><span class="s4">&amp;quot;</span><span class="s1">10-23-01</span><span class="s4">&amp;quot;</span><span class="s1">/</span><span class="s4">&amp;quot;</span><span class="s1">03:25PM</span><span class="s4">&amp;quot; </span><span class="s1">and</span>
<span class="s1">returns a float number like from </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">time.mktime</span><span class="s0">&lt;/tt&gt;</span><span class="s1">. Note that the</span>
<span class="s1">method expects the timestamp string already split at whitespace.</span><span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;/ul&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">Additionally, there's an attribute </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">_month_numbers</span><span class="s0">&lt;/tt&gt; </span><span class="s1">which maps</span>
<span class="s1">lowercase three-letter month abbreviations to integers.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">For more details, see the two </span><span class="s4">&amp;quot;</span><span class="s1">standard</span><span class="s4">&amp;quot; </span><span class="s1">parsers </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">UnixParser</span><span class="s0">&lt;/tt&gt; </span><span class="s1">and</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">MSParser</span><span class="s0">&lt;/tt&gt; </span><span class="s1">in the module </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftputil/stat.py</span><span class="s0">&lt;/tt&gt;</span><span class="s1">.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">To actually </span><span class="s0">&lt;em&gt;</span><span class="s1">use</span><span class="s0">&lt;/em&gt; </span><span class="s1">the parser, call the method </span><span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#set-parser&quot;</span><span class="s0">&gt;</span><span class="s1">set_parser</span><span class="s0">&lt;/a&gt; </span><span class="s1">of the</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">FTPHost</span><span class="s0">&lt;/tt&gt; </span><span class="s1">instance.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">If you can't write a parser or don't want to, please ask on the</span>
<span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference external&quot; </span><span class="s2">href</span><span class="s3">=&quot;https://ftputil.sschwarzer.net/mailinglist&quot;</span><span class="s0">&gt;</span><span class="s1">ftputil mailing list</span><span class="s0">&lt;/a&gt;</span><span class="s1">. Possibly someone has already written a parser</span>
<span class="s1">for your server or can help with it.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/div&gt;</span>
<span class="s0">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;section&quot; </span><span class="s2">id</span><span class="s3">=&quot;faq-tips-and-tricks&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;h1&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;toc-backref&quot; </span><span class="s2">href</span><span class="s3">=&quot;#id30&quot;</span><span class="s0">&gt;</span><span class="s1">FAQ / Tips and tricks</span><span class="s0">&lt;/a&gt;&lt;/h1&gt;</span>
<span class="s0">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;section&quot; </span><span class="s2">id</span><span class="s3">=&quot;where-can-i-get-the-latest-version&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;h2&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;toc-backref&quot; </span><span class="s2">href</span><span class="s3">=&quot;#id31&quot;</span><span class="s0">&gt;</span><span class="s1">Where can I get the latest version?</span><span class="s0">&lt;/a&gt;&lt;/h2&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">See the </span><span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference external&quot; </span><span class="s2">href</span><span class="s3">=&quot;https://ftputil.sschwarzer.net/download&quot;</span><span class="s0">&gt;</span><span class="s1">download page</span><span class="s0">&lt;/a&gt;</span><span class="s1">. Announcements will be sent to the </span><span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference external&quot; </span><span class="s2">href</span><span class="s3">=&quot;https://ftputil.sschwarzer.net/mailinglist&quot;</span><span class="s0">&gt;</span><span class="s1">mailing</span>
<span class="s1">list</span><span class="s0">&lt;/a&gt;</span><span class="s1">. Announcements on major updates will also be posted to the</span>
<span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference external&quot; </span><span class="s2">href</span><span class="s3">=&quot;https://mail.python.org/mailman3/lists/python-announce-list.python.org/&quot;</span><span class="s0">&gt;</span><span class="s1">Python announcements list</span><span class="s0">&lt;/a&gt;</span><span class="s1">.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/div&gt;</span>
<span class="s0">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;section&quot; </span><span class="s2">id</span><span class="s3">=&quot;is-there-a-mailing-list-on-ftputil&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;h2&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;toc-backref&quot; </span><span class="s2">href</span><span class="s3">=&quot;#id32&quot;</span><span class="s0">&gt;</span><span class="s1">Is there a mailing list on </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftputil</span><span class="s0">&lt;/tt&gt;</span><span class="s1">?</span><span class="s0">&lt;/a&gt;&lt;/h2&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">Yes, please visit </span><span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference external&quot; </span><span class="s2">href</span><span class="s3">=&quot;https://ftputil.sschwarzer.net/mailinglist&quot;</span><span class="s0">&gt;</span><span class="s1">https://ftputil.sschwarzer.net/mailinglist</span><span class="s0">&lt;/a&gt; </span><span class="s1">to</span>
<span class="s1">subscribe or read the archives.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">Though you can </span><span class="s0">&lt;em&gt;</span><span class="s1">technically</span><span class="s0">&lt;/em&gt; </span><span class="s1">post without subscribing first I can't</span>
<span class="s1">recommend it: The mails from non-subscribers have to be approved by</span>
<span class="s1">me and because the arriving mails contain </span><span class="s0">&lt;em&gt;</span><span class="s1">lots</span><span class="s0">&lt;/em&gt; </span><span class="s1">of spam, I rarely go</span>
<span class="s1">through these mails.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/div&gt;</span>
<span class="s0">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;section&quot; </span><span class="s2">id</span><span class="s3">=&quot;i-found-a-bug-what-now&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;h2&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;toc-backref&quot; </span><span class="s2">href</span><span class="s3">=&quot;#id33&quot;</span><span class="s0">&gt;</span><span class="s1">I found a bug! What now?</span><span class="s0">&lt;/a&gt;&lt;/h2&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">Before reporting a bug, make sure that you already read this manual</span>
<span class="s1">and tried the </span><span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference external&quot; </span><span class="s2">href</span><span class="s3">=&quot;https://ftputil.sschwarzer.net/download&quot;</span><span class="s0">&gt;</span><span class="s1">latest version</span><span class="s0">&lt;/a&gt; </span><span class="s1">of </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftputil</span><span class="s0">&lt;/tt&gt;</span><span class="s1">. There the bug might</span>
<span class="s1">have already been fixed.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">Please see </span><span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference external&quot; </span><span class="s2">href</span><span class="s3">=&quot;https://ftputil.sschwarzer.net/issuetrackernotes&quot;</span><span class="s0">&gt;</span><span class="s1">https://ftputil.sschwarzer.net/issuetrackernotes</span><span class="s0">&lt;/a&gt; </span><span class="s1">for</span>
<span class="s1">guidelines on entering a bug in </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftputil</span><span class="s0">&lt;/tt&gt;</span><span class="s1">'s ticket system. If you</span>
<span class="s1">are unsure if the behaviour you found is a bug or not, you should write</span>
<span class="s1">to the </span><span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference external&quot; </span><span class="s2">href</span><span class="s3">=&quot;https://ftputil.sschwarzer.net/mailinglist&quot;</span><span class="s0">&gt;</span><span class="s1">ftputil mailing list</span><span class="s0">&lt;/a&gt;</span><span class="s1">. </span><span class="s0">&lt;em&gt;</span><span class="s1">Never</span><span class="s0">&lt;/em&gt; </span><span class="s1">include confidential information</span>
<span class="s1">(user id, password, file names, etc.) in the problem report! Be</span>
<span class="s1">careful!</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/div&gt;</span>
<span class="s0">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;section&quot; </span><span class="s2">id</span><span class="s3">=&quot;does-ftputil-support-tls&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;h2&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;toc-backref&quot; </span><span class="s2">href</span><span class="s3">=&quot;#id34&quot;</span><span class="s0">&gt;</span><span class="s1">Does </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftputil</span><span class="s0">&lt;/tt&gt; </span><span class="s1">support TLS?</span><span class="s0">&lt;/a&gt;&lt;/h2&gt;</span>
<span class="s0">&lt;p&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftputil</span><span class="s0">&lt;/tt&gt; </span><span class="s1">has no </span><span class="s0">&lt;em&gt;</span><span class="s1">built-in</span><span class="s0">&lt;/em&gt; </span><span class="s1">TLS support.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">On the other hand, there are two ways to get TLS support with</span>
<span class="s1">ftputil:</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;ul&gt;</span>
<span class="s0">&lt;li&gt;&lt;p </span><span class="s2">class</span><span class="s3">=&quot;first&quot;</span><span class="s0">&gt;</span><span class="s1">The </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftplib</span><span class="s0">&lt;/tt&gt; </span><span class="s1">library has a class </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">FTP_TLS</span><span class="s0">&lt;/tt&gt; </span><span class="s1">that you can use for</span>
<span class="s1">the </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">session_factory</span><span class="s0">&lt;/tt&gt; </span><span class="s1">keyword argument in the </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">FTPHost</span><span class="s0">&lt;/tt&gt;</span>
<span class="s1">constructor. You can't use the class directly though </span><span class="s0">&lt;em&gt;</span><span class="s1">if</span><span class="s0">&lt;/em&gt; </span><span class="s1">you need</span>
<span class="s1">additional setup code in comparison to </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftplib.FTP</span><span class="s0">&lt;/tt&gt;</span><span class="s1">, for example</span>
<span class="s1">calling </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">prot_p</span><span class="s0">&lt;/tt&gt;</span><span class="s1">, to secure the data connection. On the other</span>
<span class="s1">hand, </span><span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#session-factories&quot;</span><span class="s0">&gt;</span><span class="s1">ftputil.session.session_factory</span><span class="s0">&lt;/a&gt; </span><span class="s1">can be used to create a</span>
<span class="s1">custom session factory.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;&lt;p </span><span class="s2">class</span><span class="s3">=&quot;first&quot;</span><span class="s0">&gt;</span><span class="s1">If you have other requirements that </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">session_factory</span><span class="s0">&lt;/tt&gt; </span><span class="s1">can't</span>
<span class="s1">fulfill, you may create your own session factory by inheriting from</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftplib.FTP_TLS</span><span class="s0">&lt;/tt&gt;</span><span class="s1">:</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;pre </span><span class="s2">class</span><span class="s3">=&quot;literal-block&quot;</span><span class="s0">&gt;</span>
<span class="s1">import ftplib</span>

<span class="s1">import ftputil</span>


<span class="s1">class FTPTLSSession(ftplib.FTP_TLS):</span>

    <span class="s1">def __init__(self, host, user, password):</span>
        <span class="s1">ftplib.FTP_TLS.__init__(self)</span>
        <span class="s1">self.connect(host, port)</span>
        <span class="s1">self.login(user, password)</span>
        <span class="s1"># Set up encrypted data connection.</span>
        <span class="s1">self.prot_p()</span>
        <span class="s1">...</span>

<span class="s1"># Note the `session_factory` parameter. Pass the class, not</span>
<span class="s1"># an instance.</span>
<span class="s1">with ftputil.FTPHost(server, user, password,</span>
                     <span class="s1">session_factory=FTPTLSSession) as ftp_host:</span>
    <span class="s1"># Use `ftp_host` as usual.</span>
    <span class="s1">...</span>
<span class="s0">&lt;/pre&gt;</span>
<span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;/ul&gt;</span>
<span class="s0">&lt;/div&gt;</span>
<span class="s0">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;section&quot; </span><span class="s2">id</span><span class="s3">=&quot;how-do-i-connect-to-a-non-default-port&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;h2&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;toc-backref&quot; </span><span class="s2">href</span><span class="s3">=&quot;#id35&quot;</span><span class="s0">&gt;</span><span class="s1">How do I connect to a non-default port?</span><span class="s0">&lt;/a&gt;&lt;/h2&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">By default, an instantiated </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">FTPHost</span><span class="s0">&lt;/tt&gt; </span><span class="s1">object connects on the usual</span>
<span class="s1">FTP port. If you have to use a different port, refer to the section</span>
<span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#session-factories&quot;</span><span class="s0">&gt;</span><span class="s1">Session factories</span><span class="s0">&lt;/a&gt;</span><span class="s1">.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/div&gt;</span>
<span class="s0">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;section&quot; </span><span class="s2">id</span><span class="s3">=&quot;how-do-i-set-active-or-passive-mode&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;h2&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;toc-backref&quot; </span><span class="s2">href</span><span class="s3">=&quot;#id36&quot;</span><span class="s0">&gt;</span><span class="s1">How do I set active or passive mode?</span><span class="s0">&lt;/a&gt;&lt;/h2&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">Please see the section </span><span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#session-factories&quot;</span><span class="s0">&gt;</span><span class="s1">Session factories</span><span class="s0">&lt;/a&gt;</span><span class="s1">.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/div&gt;</span>
<span class="s0">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;section&quot; </span><span class="s2">id</span><span class="s3">=&quot;how-can-i-debug-an-ftp-connection-problem&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;h2&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;toc-backref&quot; </span><span class="s2">href</span><span class="s3">=&quot;#id37&quot;</span><span class="s0">&gt;</span><span class="s1">How can I debug an FTP connection problem?</span><span class="s0">&lt;/a&gt;&lt;/h2&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">You can do this with a session factory. See </span><span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#session-factories&quot;</span><span class="s0">&gt;</span><span class="s1">Session factories</span><span class="s0">&lt;/a&gt;</span><span class="s1">.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">If you want to change the debug level only temporarily after the</span>
<span class="s1">connection is established, you can reach the </span><span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#session-factories&quot;</span><span class="s0">&gt;</span><span class="s1">session object</span><span class="s0">&lt;/a&gt; </span><span class="s1">as the</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">_session</span><span class="s0">&lt;/tt&gt; </span><span class="s1">attribute of the </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">FTPHost</span><span class="s0">&lt;/tt&gt; </span><span class="s1">instance and call</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">_session.set_debuglevel</span><span class="s0">&lt;/tt&gt;</span><span class="s1">. Note that the </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">_session</span><span class="s0">&lt;/tt&gt; </span><span class="s1">attribute</span>
<span class="s1">should </span><span class="s0">&lt;em&gt;</span><span class="s1">only</span><span class="s0">&lt;/em&gt; </span><span class="s1">be accessed for debugging. Calling arbitrary</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftplib.FTP</span><span class="s0">&lt;/tt&gt; </span><span class="s1">methods on the session object may </span><span class="s0">&lt;em&gt;</span><span class="s1">cause</span><span class="s0">&lt;/em&gt; </span><span class="s1">bugs!</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/div&gt;</span>
<span class="s0">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;section&quot; </span><span class="s2">id</span><span class="s3">=&quot;conditional-upload-download-to-from-a-server-in-a-different-time-zone&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;h2&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;toc-backref&quot; </span><span class="s2">href</span><span class="s3">=&quot;#id38&quot;</span><span class="s0">&gt;</span><span class="s1">Conditional upload/download to/from a server in a different time zone</span><span class="s0">&lt;/a&gt;&lt;/h2&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">You may find that </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftputil</span><span class="s0">&lt;/tt&gt; </span><span class="s1">uploads or downloads files</span>
<span class="s1">unnecessarily, or not when it should. Please see the section on </span><span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#time-zone-correction&quot;</span><span class="s0">&gt;</span><span class="s1">time</span>
<span class="s1">zone correction</span><span class="s0">&lt;/a&gt;</span><span class="s1">. It may even be sufficient to call</span>
<span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#synchronize-times&quot;</span><span class="s0">&gt;</span><span class="s1">synchronize_times</span><span class="s0">&lt;/a&gt;</span><span class="s1">.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/div&gt;</span>
<span class="s0">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;section&quot; </span><span class="s2">id</span><span class="s3">=&quot;when-i-use-ftputil-all-i-get-is-a-parsererror-exception&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;h2&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;toc-backref&quot; </span><span class="s2">href</span><span class="s3">=&quot;#id39&quot;</span><span class="s0">&gt;</span><span class="s1">When I use </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftputil</span><span class="s0">&lt;/tt&gt;</span><span class="s1">, all I get is a </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ParserError</span><span class="s0">&lt;/tt&gt; </span><span class="s1">exception</span><span class="s0">&lt;/a&gt;&lt;/h2&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">The FTP server you connect to may use a directory format that</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftputil</span><span class="s0">&lt;/tt&gt; </span><span class="s1">doesn't understand. You can either write and</span>
<span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#writing-directory-parsers&quot;</span><span class="s0">&gt;</span><span class="s1">plug in your own parser</span><span class="s0">&lt;/a&gt; </span><span class="s1">or ask on the </span><span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference external&quot; </span><span class="s2">href</span><span class="s3">=&quot;https://ftputil.sschwarzer.net/mailinglist&quot;</span><span class="s0">&gt;</span><span class="s1">mailing list</span><span class="s0">&lt;/a&gt; </span><span class="s1">for</span>
<span class="s1">help.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/div&gt;</span>
<span class="s0">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;section&quot; </span><span class="s2">id</span><span class="s3">=&quot;isdir-isfile-or-islink-incorrectly-return-false&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;h2&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;toc-backref&quot; </span><span class="s2">href</span><span class="s3">=&quot;#id40&quot;</span><span class="s0">&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">isdir</span><span class="s0">&lt;/tt&gt;</span><span class="s1">, </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">isfile</span><span class="s0">&lt;/tt&gt; </span><span class="s1">or </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">islink</span><span class="s0">&lt;/tt&gt; </span><span class="s1">incorrectly return </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">False</span><span class="s0">&lt;/tt&gt;&lt;/a&gt;&lt;/h2&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">Like Python's counterparts under </span><span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference external&quot; </span><span class="s2">href</span><span class="s3">=&quot;https://docs.python.org/library/os.path.html&quot;</span><span class="s0">&gt;</span><span class="s1">os.path</span><span class="s0">&lt;/a&gt;</span><span class="s1">, </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftputil</span><span class="s0">&lt;/tt&gt;</span><span class="s1">'s methods</span>
<span class="s1">return </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">False</span><span class="s0">&lt;/tt&gt; </span><span class="s1">if they can't find the given path.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">Probably you used </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">listdir</span><span class="s0">&lt;/tt&gt; </span><span class="s1">on a directory and called </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;&lt;span </span><span class="s2">class</span><span class="s3">=&quot;pre&quot;</span><span class="s0">&gt;</span><span class="s1">is...()</span><span class="s0">&lt;/span&gt;&lt;/tt&gt; </span><span class="s1">on</span>
<span class="s1">the returned names. But if the argument for </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">listdir</span><span class="s0">&lt;/tt&gt; </span><span class="s1">wasn't the</span>
<span class="s1">current directory, the paths won't be found and so all </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;&lt;span </span><span class="s2">class</span><span class="s3">=&quot;pre&quot;</span><span class="s0">&gt;</span><span class="s1">is...()</span><span class="s0">&lt;/span&gt;&lt;/tt&gt;</span>
<span class="s1">variants will return </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">False</span><span class="s0">&lt;/tt&gt;</span><span class="s1">.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/div&gt;</span>
<span class="s0">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;section&quot; </span><span class="s2">id</span><span class="s3">=&quot;i-don-t-find-an-answer-to-my-problem-in-this-document&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;h2&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;toc-backref&quot; </span><span class="s2">href</span><span class="s3">=&quot;#id41&quot;</span><span class="s0">&gt;</span><span class="s1">I don't find an answer to my problem in this document</span><span class="s0">&lt;/a&gt;&lt;/h2&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">Please send an email with your problem report or question to the</span>
<span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference external&quot; </span><span class="s2">href</span><span class="s3">=&quot;https://ftputil.sschwarzer.net/mailinglist&quot;</span><span class="s0">&gt;</span><span class="s1">ftputil mailing list</span><span class="s0">&lt;/a&gt;</span><span class="s1">, and we'll see what we can do for you. :-)</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/div&gt;</span>
<span class="s0">&lt;/div&gt;</span>
<span class="s0">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;section&quot; </span><span class="s2">id</span><span class="s3">=&quot;bugs-and-limitations&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;h1&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;toc-backref&quot; </span><span class="s2">href</span><span class="s3">=&quot;#id42&quot;</span><span class="s0">&gt;</span><span class="s1">Bugs and limitations</span><span class="s0">&lt;/a&gt;&lt;/h1&gt;</span>
<span class="s0">&lt;ul </span><span class="s2">class</span><span class="s3">=&quot;simple&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;li&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftputil</span><span class="s0">&lt;/tt&gt; </span><span class="s1">needs at least Python 3.6 to work.</span><span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;</span><span class="s1">Whether </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftputil</span><span class="s0">&lt;/tt&gt; </span><span class="s4">&amp;quot;</span><span class="s1">sees</span><span class="s4">&amp;quot; &amp;quot;</span><span class="s1">hidden</span><span class="s4">&amp;quot; </span><span class="s1">directory and file names (i. e.</span>
<span class="s1">names starting with a dot) depends on the configuration of the FTP</span>
<span class="s1">server. See </span><span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#hidden-files-and-directories&quot;</span><span class="s0">&gt;</span><span class="s1">Hidden files and directories</span><span class="s0">&lt;/a&gt; </span><span class="s1">for details.</span><span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;</span><span class="s1">Due to the implementation of </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">lstat</span><span class="s0">&lt;/tt&gt; </span><span class="s1">it can not return a sensible</span>
<span class="s1">value for the root directory </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">/</span><span class="s0">&lt;/tt&gt; </span><span class="s1">though stat'ing entries </span><span class="s0">&lt;em&gt;</span><span class="s1">in</span><span class="s0">&lt;/em&gt; </span><span class="s1">the</span>
<span class="s1">root directory isn't a problem. If you know an implementation that</span>
<span class="s1">can do this, please let me know. The root directory is handled</span>
<span class="s1">appropriately in </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">FTPHost.path.exists/isfile/isdir/islink</span><span class="s0">&lt;/tt&gt;</span><span class="s1">, though.</span><span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;</span><span class="s1">In multithreaded programs, you can have each thread use one or more</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">FTPHost</span><span class="s0">&lt;/tt&gt; </span><span class="s1">instances as long as no instance is shared with other</span>
<span class="s1">threads.</span><span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;</span><span class="s1">Currently, it is not possible to continue an interrupted upload or</span>
<span class="s1">download. Contact me if this causes problems for you.</span><span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;</span><span class="s1">There's exactly one cache for </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">lstat</span><span class="s0">&lt;/tt&gt; </span><span class="s1">results for each </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">FTPHost</span><span class="s0">&lt;/tt&gt;</span>
<span class="s1">object, i. e. there's no sharing of cache results determined by</span>
<span class="s1">several </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">FTPHost</span><span class="s0">&lt;/tt&gt; </span><span class="s1">objects. See </span><span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference internal&quot; </span><span class="s2">href</span><span class="s3">=&quot;#local-caching-of-file-system-information&quot;</span><span class="s0">&gt;</span><span class="s1">Local caching of file system</span>
<span class="s1">information</span><span class="s0">&lt;/a&gt; </span><span class="s1">for the reasons.</span><span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;/ul&gt;</span>
<span class="s0">&lt;/div&gt;</span>
<span class="s0">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;section&quot; </span><span class="s2">id</span><span class="s3">=&quot;files&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;h1&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;toc-backref&quot; </span><span class="s2">href</span><span class="s3">=&quot;#id43&quot;</span><span class="s0">&gt;</span><span class="s1">Files</span><span class="s0">&lt;/a&gt;&lt;/h1&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">If not overwritten via installation options, the </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftputil</span><span class="s0">&lt;/tt&gt; </span><span class="s1">files</span>
<span class="s1">reside in the </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftputil</span><span class="s0">&lt;/tt&gt; </span><span class="s1">package. There's also documentation in</span>
<span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference external&quot; </span><span class="s2">href</span><span class="s3">=&quot;https://docutils.sourceforge.net/rst.html&quot;</span><span class="s0">&gt;</span><span class="s1">reStructuredText</span><span class="s0">&lt;/a&gt; </span><span class="s1">and in HTML format. The locations of these</span>
<span class="s1">files after installation is system-dependent.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">The files </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;&lt;span </span><span class="s2">class</span><span class="s3">=&quot;pre&quot;</span><span class="s0">&gt;</span><span class="s1">test_*.py</span><span class="s0">&lt;/span&gt;&lt;/tt&gt; </span><span class="s1">and </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">scripted_session.py</span><span class="s0">&lt;/tt&gt; </span><span class="s1">are for</span>
<span class="s1">unit-testing. If you only </span><span class="s0">&lt;em&gt;</span><span class="s1">use</span><span class="s0">&lt;/em&gt; &lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftputil</span><span class="s0">&lt;/tt&gt;</span><span class="s1">, i. e. </span><span class="s0">&lt;em&gt;</span><span class="s1">don't</span><span class="s0">&lt;/em&gt; </span><span class="s1">modify it,</span>
<span class="s1">you can delete these files.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/div&gt;</span>
<span class="s0">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;section&quot; </span><span class="s2">id</span><span class="s3">=&quot;references&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;h1&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;toc-backref&quot; </span><span class="s2">href</span><span class="s3">=&quot;#id44&quot;</span><span class="s0">&gt;</span><span class="s1">References</span><span class="s0">&lt;/a&gt;&lt;/h1&gt;</span>
<span class="s0">&lt;ul </span><span class="s2">class</span><span class="s3">=&quot;simple&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;li&gt;</span><span class="s1">Postel J, Reynolds J. 1985. </span><span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference external&quot; </span><span class="s2">href</span><span class="s3">=&quot;https://www.ietf.org/rfc/rfc959.txt&quot;</span><span class="s0">&gt;</span><span class="s1">RFC 959 - File Transfer Protocol (FTP)</span><span class="s0">&lt;/a&gt;</span><span class="s1">.</span><span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;li&gt;</span><span class="s1">Python Software Foundation. 2020. </span><span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference external&quot; </span><span class="s2">href</span><span class="s3">=&quot;https://docs.python.org/library/index.html&quot;</span><span class="s0">&gt;</span><span class="s1">The Python Standard Library</span><span class="s0">&lt;/a&gt;</span><span class="s1">.</span><span class="s0">&lt;/li&gt;</span>
<span class="s0">&lt;/ul&gt;</span>
<span class="s0">&lt;/div&gt;</span>
<span class="s0">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;section&quot; </span><span class="s2">id</span><span class="s3">=&quot;authors&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;h1&gt;&lt;a </span><span class="s2">class</span><span class="s3">=&quot;toc-backref&quot; </span><span class="s2">href</span><span class="s3">=&quot;#id45&quot;</span><span class="s0">&gt;</span><span class="s1">Authors</span><span class="s0">&lt;/a&gt;&lt;/h1&gt;</span>
<span class="s0">&lt;p&gt;&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">ftputil</span><span class="s0">&lt;/tt&gt; </span><span class="s1">is written by Stefan Schwarzer</span>
<span class="s4">&amp;lt;</span><span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference external&quot; </span><span class="s2">href</span><span class="s3">=&quot;mailto:sschwarzer</span><span class="s4">&amp;#64;</span><span class="s3">sschwarzer.net&quot;</span><span class="s0">&gt;</span><span class="s1">sschwarzer</span><span class="s4">&amp;#64;</span><span class="s1">sschwarzer.net</span><span class="s0">&lt;/a&gt;</span><span class="s4">&amp;gt; </span><span class="s1">and contributors (see</span>
<span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">doc/contributors.txt</span><span class="s0">&lt;/tt&gt;</span><span class="s1">).</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">The original </span><span class="s0">&lt;tt </span><span class="s2">class</span><span class="s3">=&quot;docutils literal&quot;</span><span class="s0">&gt;</span><span class="s1">lrucache</span><span class="s0">&lt;/tt&gt; </span><span class="s1">module was written by Evan Prodromou</span>
<span class="s4">&amp;lt;</span><span class="s0">&lt;a </span><span class="s2">class</span><span class="s3">=&quot;reference external&quot; </span><span class="s2">href</span><span class="s3">=&quot;mailto:evan</span><span class="s4">&amp;#64;</span><span class="s3">prodromou.name&quot;</span><span class="s0">&gt;</span><span class="s1">evan</span><span class="s4">&amp;#64;</span><span class="s1">prodromou.name</span><span class="s0">&lt;/a&gt;</span><span class="s4">&amp;gt;</span><span class="s1">.</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;p&gt;</span><span class="s1">Feedback is appreciated. :-)</span><span class="s0">&lt;/p&gt;</span>
<span class="s0">&lt;/div&gt;</span>
<span class="s0">&lt;/div&gt;</span>
<span class="s0">&lt;/body&gt;</span>
<span class="s0">&lt;/html&gt;</span>
</pre>
</body>
</html>